{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/nuno/orya/ORYA-WebApp/app/organizador/objectiveNav.ts"],"sourcesContent":["export type ObjectiveTab = \"manage\" | \"promote\" | \"analyze\" | \"profile\";\nexport type OrgCategory = \"EVENTOS\" | \"PADEL\" | \"VOLUNTARIADO\";\n\nexport type ObjectiveNavContext = {\n  category: OrgCategory;\n  modules: string[];\n  username?: string | null;\n};\n\nexport type ObjectiveNavSection = {\n  id: string;\n  label: string;\n  href: string;\n  description?: string;\n};\n\nexport function normalizeOrgCategory(value?: string | null): OrgCategory {\n  const normalized = value?.toUpperCase() ?? \"\";\n  if (normalized === \"PADEL\") return \"PADEL\";\n  if (normalized === \"VOLUNTARIADO\") return \"VOLUNTARIADO\";\n  return \"EVENTOS\";\n}\n\nexport function getObjectiveSections(\n  objective: ObjectiveTab,\n  _context: ObjectiveNavContext,\n  _options?: { mode?: \"dashboard\" | \"page\" },\n): ObjectiveNavSection[] {\n  const sections: ObjectiveNavSection[] = [];\n\n  if (objective === \"manage\") {\n    sections.push({\n      id: \"eventos\",\n      label: \"Eventos\",\n      href: \"/organizador?tab=manage&section=eventos\",\n    });\n    sections.push({\n      id: \"inscricoes\",\n      label: \"Inscrições\",\n      href: \"/organizador?tab=manage&section=inscricoes\",\n    });\n    return sections;\n  }\n\n  if (objective === \"promote\") {\n    const baseHref = \"/organizador?tab=promote&section=marketing&marketing=\";\n    sections.push({\n      id: \"overview\",\n      label: \"Visão geral\",\n      href: `${baseHref}overview`,\n    });\n    sections.push({\n      id: \"promos\",\n      label: \"Códigos promocionais\",\n      href: `${baseHref}promos`,\n    });\n    sections.push({\n      id: \"updates\",\n      label: \"Canal oficial\",\n      href: `${baseHref}updates`,\n    });\n    sections.push({\n      id: \"promoters\",\n      label: \"Promotores e parcerias\",\n      href: `${baseHref}promoters`,\n    });\n    sections.push({\n      id: \"content\",\n      label: \"Conteúdos e kits\",\n      href: `${baseHref}content`,\n    });\n    return sections;\n  }\n\n  if (objective === \"profile\") {\n    return [\n      {\n        id: \"perfil\",\n        label: \"Perfil público\",\n        href: \"/organizador?tab=profile\",\n      },\n    ];\n  }\n\n  return [\n    {\n      id: \"financas\",\n      label: \"Finanças\",\n      href: \"/organizador?tab=analyze&section=financas\",\n    },\n    {\n      id: \"invoices\",\n      label: \"Faturação\",\n      href: \"/organizador?tab=analyze&section=invoices\",\n    },\n  ];\n}\n"],"names":[],"mappings":";;;;;;AAgBO,SAAS,qBAAqB,KAAqB;IACxD,MAAM,aAAa,OAAO,iBAAiB;IAC3C,IAAI,eAAe,SAAS,OAAO;IACnC,IAAI,eAAe,gBAAgB,OAAO;IAC1C,OAAO;AACT;AAEO,SAAS,qBACd,SAAuB,EACvB,QAA6B,EAC7B,QAA0C;IAE1C,MAAM,WAAkC,EAAE;IAE1C,IAAI,cAAc,UAAU;QAC1B,SAAS,IAAI,CAAC;YACZ,IAAI;YACJ,OAAO;YACP,MAAM;QACR;QACA,SAAS,IAAI,CAAC;YACZ,IAAI;YACJ,OAAO;YACP,MAAM;QACR;QACA,OAAO;IACT;IAEA,IAAI,cAAc,WAAW;QAC3B,MAAM,WAAW;QACjB,SAAS,IAAI,CAAC;YACZ,IAAI;YACJ,OAAO;YACP,MAAM,GAAG,SAAS,QAAQ,CAAC;QAC7B;QACA,SAAS,IAAI,CAAC;YACZ,IAAI;YACJ,OAAO;YACP,MAAM,GAAG,SAAS,MAAM,CAAC;QAC3B;QACA,SAAS,IAAI,CAAC;YACZ,IAAI;YACJ,OAAO;YACP,MAAM,GAAG,SAAS,OAAO,CAAC;QAC5B;QACA,SAAS,IAAI,CAAC;YACZ,IAAI;YACJ,OAAO;YACP,MAAM,GAAG,SAAS,SAAS,CAAC;QAC9B;QACA,SAAS,IAAI,CAAC;YACZ,IAAI;YACJ,OAAO;YACP,MAAM,GAAG,SAAS,OAAO,CAAC;QAC5B;QACA,OAAO;IACT;IAEA,IAAI,cAAc,WAAW;QAC3B,OAAO;YACL;gBACE,IAAI;gBACJ,OAAO;gBACP,MAAM;YACR;SACD;IACH;IAEA,OAAO;QACL;YACE,IAAI;YACJ,OAAO;YACP,MAAM;QACR;QACA;YACE,IAAI;YACJ,OAAO;YACP,MAAM;QACR;KACD;AACH"}},
    {"offset": {"line": 86, "column": 0}, "map": {"version":3,"sources":["file:///Users/nuno/orya/ORYA-WebApp/app/organizador/ObjectiveSubnav.tsx"],"sourcesContent":["\"use client\";\n\nimport Link from \"next/link\";\nimport useSWR from \"swr\";\nimport { cn } from \"@/lib/utils\";\nimport {\n  getObjectiveSections,\n  normalizeOrgCategory,\n  type ObjectiveNavContext,\n  type ObjectiveTab,\n} from \"./objectiveNav\";\n\nconst fetcher = (url: string) => fetch(url).then((res) => res.json());\n\nconst OBJECTIVE_LABELS: Record<ObjectiveTab, string> = {\n  manage: \"Gerir\",\n  promote: \"Promover\",\n  analyze: \"Analisar\",\n  profile: \"Perfil\",\n};\n\ntype ObjectiveSubnavProps = {\n  objective: ObjectiveTab;\n  activeId?: string;\n  category?: string | null;\n  modules?: string[] | null;\n  mode?: \"dashboard\" | \"page\";\n  variant?: \"full\" | \"tabs\";\n  hideWhenSingle?: boolean;\n  className?: string;\n};\n\nexport default function ObjectiveSubnav({\n  objective,\n  activeId,\n  category,\n  modules,\n  mode,\n  variant = \"full\",\n  hideWhenSingle = true,\n  className,\n}: ObjectiveSubnavProps) {\n  const { data } = useSWR(category || modules ? null : \"/api/organizador/me\", fetcher);\n  const organizer = data?.organizer ?? null;\n\n  const context: ObjectiveNavContext = {\n    category: normalizeOrgCategory(category ?? organizer?.organizationCategory),\n    modules: Array.isArray(modules) ? modules : Array.isArray(organizer?.modules) ? organizer.modules : [],\n    username: organizer?.username ?? null,\n  };\n\n  const sections = getObjectiveSections(objective, context, { mode });\n  const active =\n    activeId && sections.some((section) => section.id === activeId)\n      ? activeId\n      : sections[0]?.id;\n\n  if (hideWhenSingle && sections.length <= 1) return null;\n\n  const tabs = (\n    <div className=\"flex flex-wrap gap-2 rounded-2xl border border-white/10 bg-white/5 px-2 py-2 text-sm shadow-[0_16px_50px_rgba(0,0,0,0.4)]\">\n      {sections.map((section) => {\n        const isActive = section.id === active;\n        return (\n          <Link\n            key={section.id}\n            href={section.href}\n            className={cn(\n              \"rounded-xl px-3 py-2 font-semibold transition\",\n              isActive\n                ? \"bg-gradient-to-r from-[#FF7AD1]/60 via-[#7FE0FF]/35 to-[#6A7BFF]/55 text-white shadow-[0_14px_36px_rgba(107,255,255,0.45)]\"\n                : \"text-white/80 hover:bg-white/10\",\n            )}\n            aria-current={isActive ? \"page\" : undefined}\n          >\n            {section.label}\n          </Link>\n        );\n      })}\n    </div>\n  );\n\n  if (variant === \"tabs\") {\n    return <div className={className}>{tabs}</div>;\n  }\n\n  return (\n    <div\n      className={cn(\n        \"rounded-3xl border border-white/12 bg-gradient-to-r from-[#0b1226]/80 via-[#101b39]/75 to-[#050811]/90 p-4 shadow-[0_26px_90px_rgba(0,0,0,0.55)] backdrop-blur-2xl\",\n        className,\n      )}\n    >\n      <div className=\"flex flex-wrap items-center justify-between gap-3\">\n        <div className=\"inline-flex items-center gap-2 rounded-full border border-white/20 bg-white/10 px-3 py-1 text-[11px] uppercase tracking-[0.26em] text-white/70 shadow-[0_12px_32px_rgba(0,0,0,0.4)]\">\n          Objetivo · {OBJECTIVE_LABELS[objective]}\n        </div>\n        <div className=\"text-[11px] text-white/60\">{sections.length} secções</div>\n      </div>\n      <div className=\"mt-3\">{tabs}</div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAYA,MAAM,UAAU,CAAC,MAAgB,MAAM,KAAK,IAAI,CAAC,CAAC,MAAQ,IAAI,IAAI;AAElE,MAAM,mBAAiD;IACrD,QAAQ;IACR,SAAS;IACT,SAAS;IACT,SAAS;AACX;AAae,SAAS,gBAAgB,EACtC,SAAS,EACT,QAAQ,EACR,QAAQ,EACR,OAAO,EACP,IAAI,EACJ,UAAU,MAAM,EAChB,iBAAiB,IAAI,EACrB,SAAS,EACY;IACrB,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,yKAAM,EAAC,YAAY,UAAU,OAAO,uBAAuB;IAC5E,MAAM,YAAY,MAAM,aAAa;IAErC,MAAM,UAA+B;QACnC,UAAU,IAAA,0JAAoB,EAAC,YAAY,WAAW;QACtD,SAAS,MAAM,OAAO,CAAC,WAAW,UAAU,MAAM,OAAO,CAAC,WAAW,WAAW,UAAU,OAAO,GAAG,EAAE;QACtG,UAAU,WAAW,YAAY;IACnC;IAEA,MAAM,WAAW,IAAA,0JAAoB,EAAC,WAAW,SAAS;QAAE;IAAK;IACjE,MAAM,SACJ,YAAY,SAAS,IAAI,CAAC,CAAC,UAAY,QAAQ,EAAE,KAAK,YAClD,WACA,QAAQ,CAAC,EAAE,EAAE;IAEnB,IAAI,kBAAkB,SAAS,MAAM,IAAI,GAAG,OAAO;IAEnD,MAAM,qBACJ,8OAAC;QAAI,WAAU;kBACZ,SAAS,GAAG,CAAC,CAAC;YACb,MAAM,WAAW,QAAQ,EAAE,KAAK;YAChC,qBACE,8OAAC,uKAAI;gBAEH,MAAM,QAAQ,IAAI;gBAClB,WAAW,IAAA,kHAAE,EACX,iDACA,WACI,+HACA;gBAEN,gBAAc,WAAW,SAAS;0BAEjC,QAAQ,KAAK;eAVT,QAAQ,EAAE;;;;;QAarB;;;;;;IAIJ,IAAI,YAAY,QAAQ;QACtB,qBAAO,8OAAC;YAAI,WAAW;sBAAY;;;;;;IACrC;IAEA,qBACE,8OAAC;QACC,WAAW,IAAA,kHAAE,EACX,sKACA;;0BAGF,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;4BAAsL;4BACvL,gBAAgB,CAAC,UAAU;;;;;;;kCAEzC,8OAAC;wBAAI,WAAU;;4BAA6B,SAAS,MAAM;4BAAC;;;;;;;;;;;;;0BAE9D,8OAAC;gBAAI,WAAU;0BAAQ;;;;;;;;;;;;AAG7B"}},
    {"offset": {"line": 204, "column": 0}, "map": {"version":3,"sources":["file:///Users/nuno/orya/ORYA-WebApp/app/organizador/pagamentos/invoices/invoices-client.tsx"],"sourcesContent":["\"use client\";\n\nimport useSWR from \"swr\";\nimport { useSearchParams, useRouter } from \"next/navigation\";\nimport { useMemo, useEffect } from \"react\";\nimport { formatEuro } from \"@/lib/money\";\nimport { CTA_PRIMARY, CTA_SECONDARY } from \"@/app/organizador/dashboardUi\";\n\ntype InvoiceLine = { quantity: number };\ntype InvoiceEvent = { id: number; title: string; slug?: string | null; payoutMode?: string | null };\ntype InvoiceItem = {\n  id: number;\n  createdAt: string;\n  subtotalCents: number;\n  discountCents: number;\n  platformFeeCents: number;\n  totalCents: number;\n  netCents: number;\n  event?: InvoiceEvent | null;\n  lines?: InvoiceLine[];\n};\ntype InvoiceSummary = { grossCents: number; discountCents: number; platformFeeCents: number; netCents: number; tickets: number };\ntype InvoiceResponse =\n  | { ok: true; items: InvoiceItem[]; summary: InvoiceSummary }\n  | { ok: false; error?: string };\ntype OrganizerMeResponse = { organizer?: { id?: number | null } | null };\n\nconst fetcher = (url: string) => fetch(url).then((r) => r.json() as Promise<InvoiceResponse>);\nconst orgFetcher = (url: string) => fetch(url).then((r) => r.json() as Promise<OrganizerMeResponse>);\n\nconst toQuery = (params: Record<string, string | number | null | undefined>) => {\n  const url = new URLSearchParams();\n  Object.entries(params).forEach(([k, v]) => {\n    if (v !== null && v !== undefined && String(v).trim() !== \"\") {\n      url.set(k, String(v));\n    }\n  });\n  const qs = url.toString();\n  return qs ? `?${qs}` : \"\";\n};\n\nconst formatDateTime = (iso: string) =>\n  new Date(iso).toLocaleString(\"pt-PT\", { day: \"2-digit\", month: \"short\", hour: \"2-digit\", minute: \"2-digit\" });\n\ntype InvoicesClientProps = {\n  basePath?: string;\n  fullWidth?: boolean;\n  organizerId?: number | null;\n};\n\nexport default function InvoicesClient({\n  basePath = \"/organizador/pagamentos/invoices\",\n  fullWidth = true,\n  organizerId: organizerIdProp = null,\n}: InvoicesClientProps) {\n  const searchParams = useSearchParams();\n  const router = useRouter();\n  const organizerIdParam = searchParams?.get(\"organizerId\") ?? null;\n  const from = searchParams?.get(\"from\") ?? \"\";\n  const to = searchParams?.get(\"to\") ?? \"\";\n  const organizerIdQuery = organizerIdParam ? Number(organizerIdParam) : null;\n  const shouldFetchOrganizer = !organizerIdProp && !organizerIdQuery;\n  const { data: organizerData } = useSWR<OrganizerMeResponse>(\n    () => (shouldFetchOrganizer ? \"/api/organizador/me\" : null),\n    orgFetcher,\n  );\n  const organizerIdFromMe = organizerData?.organizer?.id ?? null;\n  const organizerId =\n    organizerIdProp ??\n    (organizerIdQuery && !Number.isNaN(organizerIdQuery) ? organizerIdQuery : null) ??\n    organizerIdFromMe ??\n    null;\n  const qs = toQuery({ organizerId, from, to });\n  const { data, isLoading, mutate } = useSWR(\n    () => (organizerId ? `/api/organizador/pagamentos/invoices${qs}` : null),\n    fetcher,\n    { revalidateOnFocus: false },\n  );\n\n  const summary: InvoiceSummary = data?.ok ? data.summary : { grossCents: 0, discountCents: 0, platformFeeCents: 0, netCents: 0, tickets: 0 };\n  const items: InvoiceItem[] = data?.ok ? data.items : [];\n  const totalTickets = useMemo(\n    () => (data?.ok ? data.items.reduce((acc, sale) => acc + (sale.lines?.reduce((s, l) => s + l.quantity, 0) ?? 0), 0) : 0),\n    [data],\n  );\n\n  const withQuery = (path: string, params: Record<string, string | number | null | undefined>) => {\n    const query = toQuery(params);\n    if (!query) return path;\n    return path.includes(\"?\") ? `${path}&${query.slice(1)}` : `${path}${query}`;\n  };\n\n  // Se houver organizerId mas não na query, sincroniza a URL.\n  useEffect(() => {\n    if (!organizerIdParam && organizerId) {\n      router.replace(withQuery(basePath, { organizerId, from, to }));\n    }\n  }, [organizerIdParam, organizerId, router, from, to, basePath]);\n\n  const downloadCsv = () => {\n    if (!items.length) return;\n    const rows = [\n      [\"Data\", \"Evento\", \"Payout Mode\", \"Subtotal\", \"Desconto\", \"Taxas\", \"Total\", \"Líquido\", \"Bilhetes\"],\n      ...items.map((sale) => [\n        sale.createdAt,\n        sale.event?.title ?? \"\",\n        sale.event?.payoutMode ?? \"\",\n        (sale.subtotalCents / 100).toFixed(2),\n        (sale.discountCents / 100).toFixed(2),\n        (sale.platformFeeCents / 100).toFixed(2),\n        (sale.totalCents / 100).toFixed(2),\n        (sale.netCents / 100).toFixed(2),\n        sale.lines?.reduce((s, l) => s + l.quantity, 0) ?? 0,\n      ]),\n    ];\n\n    const csvContent = rows.map((r) => r.join(\",\")).join(\"\\n\");\n    const blob = new Blob([csvContent], { type: \"text/csv;charset=utf-8;\" });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement(\"a\");\n    a.href = url;\n    a.download = \"invoices.csv\";\n    a.click();\n    URL.revokeObjectURL(url);\n  };\n\n  const handleDateChange = (which: \"from\" | \"to\", value: string) => {\n    router.push(\n      withQuery(basePath, {\n        organizerId,\n        from: which === \"from\" ? value : from,\n        to: which === \"to\" ? value : to,\n      }),\n    );\n  };\n\n  const stateCard = (() => {\n    if (isLoading) {\n      return (\n        <div className=\"rounded-3xl border border-white/10 bg-white/5 p-6 space-y-4 shadow-[0_18px_60px_rgba(0,0,0,0.55)]\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"h-10 w-10 rounded-2xl bg-white/10 animate-pulse\" />\n            <div className=\"space-y-2\">\n              <div className=\"h-4 w-40 rounded bg-white/10 animate-pulse\" />\n              <div className=\"h-3 w-32 rounded bg-white/10 animate-pulse\" />\n            </div>\n          </div>\n          <div className=\"grid gap-2 md:grid-cols-3\">\n            {[...Array(3)].map((_, idx) => (\n              <div key={idx} className=\"h-16 rounded-2xl border border-white/10 bg-white/5 animate-pulse\" />\n            ))}\n          </div>\n        </div>\n      );\n    }\n    if (!organizerId) {\n      return (\n        <div className=\"rounded-3xl border border-white/12 bg-white/5 p-5 text-sm text-white/75 shadow-[0_18px_50px_rgba(0,0,0,0.55)]\">\n          A carregar organização...\n        </div>\n      );\n    }\n    if (!data || data.ok === false) {\n      const errorCode = data && \"error\" in data ? data.error : null;\n      if (errorCode && [\"UNAUTHENTICATED\", \"FORBIDDEN\"].includes(errorCode)) {\n        return (\n          <div className=\"rounded-3xl border border-white/12 bg-white/5 p-5 text-sm text-white/75 shadow-[0_18px_50px_rgba(0,0,0,0.55)]\">\n            Não tens permissões para ver a faturação desta organização.\n          </div>\n        );\n      }\n      if (errorCode && errorCode !== \"INTERNAL_ERROR\") {\n        return (\n          <div className=\"rounded-3xl border border-white/10 bg-white/5 p-6 text-white/70 shadow-[0_18px_60px_rgba(0,0,0,0.55)]\">\n            Ainda não há faturação para mostrar. Quando houver vendas, vais ver tudo aqui.\n          </div>\n        );\n      }\n      return (\n        <div className=\"rounded-3xl border border-white/15 bg-red-500/10 p-5 text-sm text-white/80 shadow-[0_18px_50px_rgba(0,0,0,0.55)]\">\n          <p className=\"font-semibold text-white\">Não foi possível carregar faturação.</p>\n          <p className=\"text-white/65\">Tenta novamente ou ajusta o intervalo.</p>\n          <button\n            type=\"button\"\n            onClick={() => mutate()}\n            className={`${CTA_SECONDARY} mt-3 text-[12px]`}\n          >\n            Recarregar\n          </button>\n        </div>\n      );\n    }\n    if (items.length === 0) {\n      return (\n        <div className=\"rounded-3xl border border-white/10 bg-white/5 p-6 text-white/70 shadow-[0_18px_60px_rgba(0,0,0,0.55)]\">\n          Ainda não existem vendas neste intervalo. Ajusta as datas ou volta mais tarde.\n        </div>\n      );\n    }\n    return null;\n  })();\n\n  return (\n    <div className={fullWidth ? \"w-full space-y-6 text-white\" : \"mx-auto max-w-6xl px-4 py-6 space-y-6 text-white\"}>\n      <div className=\"rounded-3xl border border-white/12 bg-gradient-to-br from-white/10 via-[#0d1530]/75 to-[#050912]/90 p-5 shadow-[0_28px_90px_rgba(0,0,0,0.6)] backdrop-blur-3xl\">\n        <div className=\"flex flex-col gap-4 md:flex-row md:items-center md:justify-between\">\n          <div className=\"space-y-2\">\n            <div className=\"inline-flex items-center gap-2 rounded-full border border-white/20 bg-white/10 px-3 py-1 text-[11px] uppercase tracking-[0.24em] text-white/80 shadow-[0_10px_30px_rgba(0,0,0,0.4)]\">\n              Faturação premium\n            </div>\n            <h1 className=\"text-3xl font-semibold drop-shadow-[0_12px_40px_rgba(0,0,0,0.55)]\">Receitas, taxas e liquidez.</h1>\n            <p className=\"text-sm text-white/70\">Bruto, descontos, Stripe/ORYA e líquido por evento. Exporta tudo em CSV num clique.</p>\n          </div>\n          <div className=\"flex flex-wrap items-center gap-2 text-[12px]\">\n            {[\n              { key: \"7d\", label: \"7d\" },\n              { key: \"30d\", label: \"30d\" },\n              { key: \"90d\", label: \"90d\" },\n              { key: \"all\", label: \"Sempre\" },\n            ].map((preset) => (\n              <button\n                key={preset.key}\n                type=\"button\"\n                onClick={() =>\n                  router.push(\n                    withQuery(basePath, {\n                      organizerId,\n                      from: preset.key === \"all\" ? \"\" : new Date(Date.now() - (preset.key === \"7d\" ? 7 : preset.key === \"30d\" ? 30 : 90) * 86400000)\n                        .toISOString()\n                        .slice(0, 10),\n                      to: preset.key === \"all\" ? \"\" : new Date().toISOString().slice(0, 10),\n                    }),\n                  )\n                }\n                className={`rounded-full px-3 py-1.5 transition ${\n                  preset.key !== \"all\" && from && to\n                    ? \"bg-gradient-to-r from-[#FF00C8]/25 via-[#6BFFFF]/20 to-[#1646F5]/25 text-white shadow-[0_0_14px_rgba(107,255,255,0.35)]\"\n                    : \"border border-white/20 text-white/75 hover:bg-white/10\"\n                }`}\n              >\n                {preset.label}\n              </button>\n            ))}\n            <input\n              type=\"date\"\n              value={from}\n              onChange={(e) => handleDateChange(\"from\", e.target.value)}\n              className=\"rounded-xl border border-white/15 bg-black/40 px-3 py-2 text-sm outline-none focus:border-[#6BFFFF] focus:ring-1 focus:ring-[#6BFFFF]/50\"\n            />\n            <input\n              type=\"date\"\n              value={to}\n              onChange={(e) => handleDateChange(\"to\", e.target.value)}\n              className=\"rounded-xl border border-white/15 bg-black/40 px-3 py-2 text-sm outline-none focus:border-[#6BFFFF] focus:ring-1 focus:ring-[#6BFFFF]/50\"\n            />\n            <button\n              type=\"button\"\n              onClick={downloadCsv}\n              className={`${CTA_PRIMARY} disabled:opacity-50`}\n              disabled={!items.length}\n            >\n              Exportar CSV\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {stateCard}\n\n      {data?.ok && items.length > 0 && (\n        <>\n          <div className=\"grid gap-3 md:grid-cols-5\">\n            <SummaryCard label=\"Receita bruta\" value={formatEuro(summary.grossCents / 100)} tone=\"bright\" />\n            <SummaryCard label=\"Descontos\" value={formatEuro(summary.discountCents / 100)} tone=\"muted\" />\n            <SummaryCard label=\"Taxas\" value={formatEuro(summary.platformFeeCents / 100)} tone=\"muted\" helper=\"Inclui Stripe + ORYA (se aplicável).\" />\n            <SummaryCard label=\"Líquido\" value={formatEuro(summary.netCents / 100)} tone=\"success\" helper=\"Valor que recebes.\" />\n            <SummaryCard label=\"Bilhetes\" value={`${totalTickets}`} tone=\"slate\" helper=\"Total no intervalo.\" />\n          </div>\n\n          <div className=\"rounded-3xl border border-white/12 bg-gradient-to-br from-white/8 via-[#0b1124]/75 to-[#050810]/92 p-4 shadow-[0_22px_70px_rgba(0,0,0,0.6)] overflow-x-auto backdrop-blur-2xl\">\n            <table className=\"min-w-full text-sm text-white/85\">\n              <thead className=\"text-left text-[11px] uppercase tracking-[0.18em] text-white/60\">\n                <tr className=\"border-b border-white/10\">\n                  <th className=\"py-2 pr-3\">Evento</th>\n                  <th className=\"py-2 pr-3\">Data</th>\n                  <th className=\"py-2 pr-3\">Bilhetes</th>\n                  <th className=\"py-2 pr-3\">Bruto</th>\n                  <th className=\"py-2 pr-3\">Descontos</th>\n                  <th className=\"py-2 pr-3\">Taxas</th>\n                  <th className=\"py-2 pr-3\">Líquido</th>\n                  <th className=\"py-2 pr-3\">Modo</th>\n                </tr>\n              </thead>\n              <tbody className=\"divide-y divide-white/10\">\n                {items.map((sale) => {\n                  const tickets = sale.lines?.reduce((s, l) => s + l.quantity, 0) ?? 0;\n                  return (\n                    <tr key={sale.id} className=\"hover:bg-white/5 transition\">\n                      <td className=\"py-3 pr-3\">\n                        <div className=\"font-semibold text-white\">{sale.event?.title ?? \"Evento\"}</div>\n                        <div className=\"text-[11px] text-white/60\">{sale.event?.slug ?? \"—\"}</div>\n                      </td>\n                      <td className=\"py-3 pr-3 text-[12px] text-white/70\">{formatDateTime(sale.createdAt)}</td>\n                      <td className=\"py-3 pr-3 text-[12px]\">{tickets}</td>\n                      <td className=\"py-3 pr-3\">{formatEuro(sale.subtotalCents / 100)}</td>\n                      <td className=\"py-3 pr-3\">{formatEuro(sale.discountCents / 100)}</td>\n                      <td className=\"py-3 pr-3\">{formatEuro(sale.platformFeeCents / 100)}</td>\n                      <td className=\"py-3 pr-3 font-semibold text-white\">{formatEuro(sale.netCents / 100)}</td>\n                      <td className=\"py-3 pr-3 text-[11px]\">\n                        <span className=\"rounded-full border border-white/25 bg-white/10 px-2.5 py-0.5 text-white shadow-[0_8px_18px_rgba(0,0,0,0.35)]\">\n                          {sale.event?.payoutMode ?? \"STANDARD\"}\n                        </span>\n                      </td>\n                    </tr>\n                  );\n                })}\n              </tbody>\n            </table>\n          </div>\n        </>\n      )}\n    </div>\n  );\n}\n\nfunction SummaryCard({\n  label,\n  value,\n  tone = \"default\",\n  helper,\n}: {\n  label: string;\n  value: string;\n  tone?: \"default\" | \"muted\" | \"bright\" | \"success\" | \"slate\";\n  helper?: string;\n}) {\n  const toneClass =\n    tone === \"success\"\n      ? \"bg-gradient-to-br from-emerald-400/25 via-emerald-500/20 to-teal-500/25 border-emerald-300/45 text-emerald-50\"\n      : tone === \"bright\"\n        ? \"bg-gradient-to-r from-[#FF00C8]/30 via-[#6BFFFF]/18 to-[#1646F5]/28 border-white/18 text-white\"\n        : tone === \"muted\"\n          ? \"bg-white/6 text-white/70 border-white/12\"\n          : tone === \"slate\"\n            ? \"bg-gradient-to-br from-white/12 via-white/6 to-white/4 text-white/80 border-white/14\"\n            : \"bg-white/8 text-white border-white/12\";\n\n  return (\n    <div className={`rounded-2xl border p-4 shadow-[0_16px_50px_rgba(0,0,0,0.38)] backdrop-blur-2xl ${toneClass}`}>\n      <p className=\"text-[11px] uppercase tracking-[0.2em] text-white/75\">{label}</p>\n      <p className=\"text-xl font-semibold leading-tight drop-shadow-[0_10px_25px_rgba(0,0,0,0.4)]\">{value}</p>\n      {helper && <p className=\"text-[11px] text-white/60 mt-1\">{helper}</p>}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}