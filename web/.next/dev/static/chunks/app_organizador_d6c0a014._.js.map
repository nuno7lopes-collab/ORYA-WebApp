{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/nuno/orya/ORYA-WebApp/app/organizador/objectiveNav.ts"],"sourcesContent":["export type ObjectiveTab = \"create\" | \"manage\" | \"promote\" | \"analyze\";\nexport type OrgCategory = \"EVENTOS\" | \"PADEL\" | \"VOLUNTARIADO\";\n\nexport type ObjectiveNavContext = {\n  category: OrgCategory;\n  modules: string[];\n  username?: string | null;\n};\n\nexport type ObjectiveNavSection = {\n  id: string;\n  label: string;\n  href: string;\n  description?: string;\n};\n\nconst CATEGORY_META: Record<\n  OrgCategory,\n  {\n    createLabel: string;\n    manageLabel: string;\n    createHref: string;\n    manageSection: string;\n  }\n> = {\n  EVENTOS: {\n    createLabel: \"Criar evento\",\n    manageLabel: \"Eventos\",\n    createHref: \"/organizador/eventos/novo\",\n    manageSection: \"eventos\",\n  },\n  PADEL: {\n    createLabel: \"Criar evento\",\n    manageLabel: \"Eventos\",\n    createHref: \"/organizador/eventos/novo?preset=padel\",\n    manageSection: \"eventos\",\n  },\n  VOLUNTARIADO: {\n    createLabel: \"Criar evento\",\n    manageLabel: \"Eventos\",\n    createHref: \"/organizador/eventos/novo?preset=voluntariado\",\n    manageSection: \"acoes\",\n  },\n};\n\nexport function normalizeOrgCategory(value?: string | null): OrgCategory {\n  const normalized = value?.toUpperCase() ?? \"\";\n  if (normalized === \"PADEL\") return \"PADEL\";\n  if (normalized === \"VOLUNTARIADO\") return \"VOLUNTARIADO\";\n  return \"EVENTOS\";\n}\n\nfunction hasModule(modules: string[], key: string) {\n  return Array.isArray(modules) && modules.includes(key);\n}\n\nexport function getObjectiveSections(\n  objective: ObjectiveTab,\n  context: ObjectiveNavContext,\n  options?: { mode?: \"dashboard\" | \"page\" },\n): ObjectiveNavSection[] {\n  const categoryMeta = CATEGORY_META[context.category];\n  const sections: ObjectiveNavSection[] = [];\n  const isDashboard = options?.mode === \"dashboard\";\n\n  if (objective === \"create\") {\n    sections.push({\n      id: \"overview\",\n      label: \"Resumo\",\n      href: \"/organizador?tab=overview\",\n    });\n    if (!isDashboard) {\n      sections.push({\n        id: \"primary\",\n        label: categoryMeta.createLabel,\n        href: categoryMeta.createHref,\n      });\n      if (hasModule(context.modules, \"INSCRICOES\")) {\n        sections.push({\n          id: \"inscricoes\",\n          label: \"Inscrições\",\n          href: \"/organizador/inscricoes\",\n        });\n      }\n    }\n    return sections;\n  }\n\n  if (objective === \"manage\") {\n    sections.push({\n      id: \"eventos\",\n      label: \"Eventos\",\n      href: \"/organizador?tab=manage&section=eventos\",\n    });\n    sections.push({\n      id: \"inscricoes\",\n      label: \"Inscrições\",\n      href: \"/organizador?tab=manage&section=inscricoes\",\n    });\n    return sections;\n  }\n\n  if (objective === \"promote\") {\n    const baseHref = \"/organizador?tab=promote&section=marketing&marketing=\";\n    sections.push({\n      id: \"overview\",\n      label: \"Visão geral\",\n      href: `${baseHref}overview`,\n    });\n    sections.push({\n      id: \"promos\",\n      label: \"Códigos promocionais\",\n      href: `${baseHref}promos`,\n    });\n    sections.push({\n      id: \"updates\",\n      label: \"Canal oficial\",\n      href: `${baseHref}updates`,\n    });\n    sections.push({\n      id: \"promoters\",\n      label: \"Promotores e parcerias\",\n      href: `${baseHref}promoters`,\n    });\n    sections.push({\n      id: \"content\",\n      label: \"Conteúdos e kits\",\n      href: `${baseHref}content`,\n    });\n    return sections;\n  }\n\n  return [\n    {\n      id: \"financas\",\n      label: \"Finanças\",\n      href: \"/organizador?tab=analyze&section=financas\",\n    },\n    {\n      id: \"invoices\",\n      label: \"Faturação\",\n      href: \"/organizador?tab=analyze&section=invoices\",\n    },\n  ];\n}\n"],"names":[],"mappings":";;;;;;AAgBA,MAAM,gBAQF;IACF,SAAS;QACP,aAAa;QACb,aAAa;QACb,YAAY;QACZ,eAAe;IACjB;IACA,OAAO;QACL,aAAa;QACb,aAAa;QACb,YAAY;QACZ,eAAe;IACjB;IACA,cAAc;QACZ,aAAa;QACb,aAAa;QACb,YAAY;QACZ,eAAe;IACjB;AACF;AAEO,SAAS,qBAAqB,KAAqB;IACxD,MAAM,aAAa,OAAO,iBAAiB;IAC3C,IAAI,eAAe,SAAS,OAAO;IACnC,IAAI,eAAe,gBAAgB,OAAO;IAC1C,OAAO;AACT;AAEA,SAAS,UAAU,OAAiB,EAAE,GAAW;IAC/C,OAAO,MAAM,OAAO,CAAC,YAAY,QAAQ,QAAQ,CAAC;AACpD;AAEO,SAAS,qBACd,SAAuB,EACvB,OAA4B,EAC5B,OAAyC;IAEzC,MAAM,eAAe,aAAa,CAAC,QAAQ,QAAQ,CAAC;IACpD,MAAM,WAAkC,EAAE;IAC1C,MAAM,cAAc,SAAS,SAAS;IAEtC,IAAI,cAAc,UAAU;QAC1B,SAAS,IAAI,CAAC;YACZ,IAAI;YACJ,OAAO;YACP,MAAM;QACR;QACA,IAAI,CAAC,aAAa;YAChB,SAAS,IAAI,CAAC;gBACZ,IAAI;gBACJ,OAAO,aAAa,WAAW;gBAC/B,MAAM,aAAa,UAAU;YAC/B;YACA,IAAI,UAAU,QAAQ,OAAO,EAAE,eAAe;gBAC5C,SAAS,IAAI,CAAC;oBACZ,IAAI;oBACJ,OAAO;oBACP,MAAM;gBACR;YACF;QACF;QACA,OAAO;IACT;IAEA,IAAI,cAAc,UAAU;QAC1B,SAAS,IAAI,CAAC;YACZ,IAAI;YACJ,OAAO;YACP,MAAM;QACR;QACA,SAAS,IAAI,CAAC;YACZ,IAAI;YACJ,OAAO;YACP,MAAM;QACR;QACA,OAAO;IACT;IAEA,IAAI,cAAc,WAAW;QAC3B,MAAM,WAAW;QACjB,SAAS,IAAI,CAAC;YACZ,IAAI;YACJ,OAAO;YACP,MAAM,GAAG,SAAS,QAAQ,CAAC;QAC7B;QACA,SAAS,IAAI,CAAC;YACZ,IAAI;YACJ,OAAO;YACP,MAAM,GAAG,SAAS,MAAM,CAAC;QAC3B;QACA,SAAS,IAAI,CAAC;YACZ,IAAI;YACJ,OAAO;YACP,MAAM,GAAG,SAAS,OAAO,CAAC;QAC5B;QACA,SAAS,IAAI,CAAC;YACZ,IAAI;YACJ,OAAO;YACP,MAAM,GAAG,SAAS,SAAS,CAAC;QAC9B;QACA,SAAS,IAAI,CAAC;YACZ,IAAI;YACJ,OAAO;YACP,MAAM,GAAG,SAAS,OAAO,CAAC;QAC5B;QACA,OAAO;IACT;IAEA,OAAO;QACL;YACE,IAAI;YACJ,OAAO;YACP,MAAM;QACR;QACA;YACE,IAAI;YACJ,OAAO;YACP,MAAM;QACR;KACD;AACH"}},
    {"offset": {"line": 127, "column": 0}, "map": {"version":3,"sources":["file:///Users/nuno/orya/ORYA-WebApp/app/organizador/ObjectiveSubnav.tsx"],"sourcesContent":["\"use client\";\n\nimport Link from \"next/link\";\nimport useSWR from \"swr\";\nimport { cn } from \"@/lib/utils\";\nimport {\n  getObjectiveSections,\n  normalizeOrgCategory,\n  type ObjectiveNavContext,\n  type ObjectiveTab,\n} from \"./objectiveNav\";\n\nconst fetcher = (url: string) => fetch(url).then((res) => res.json());\n\nconst OBJECTIVE_LABELS: Record<ObjectiveTab, string> = {\n  create: \"Criar\",\n  manage: \"Gerir\",\n  promote: \"Promover\",\n  analyze: \"Analisar\",\n};\n\ntype ObjectiveSubnavProps = {\n  objective: ObjectiveTab;\n  activeId?: string;\n  category?: string | null;\n  modules?: string[] | null;\n  mode?: \"dashboard\" | \"page\";\n  variant?: \"full\" | \"tabs\";\n  hideWhenSingle?: boolean;\n  className?: string;\n};\n\nexport default function ObjectiveSubnav({\n  objective,\n  activeId,\n  category,\n  modules,\n  mode,\n  variant = \"full\",\n  hideWhenSingle = true,\n  className,\n}: ObjectiveSubnavProps) {\n  const { data } = useSWR(category || modules ? null : \"/api/organizador/me\", fetcher);\n  const organizer = data?.organizer ?? null;\n\n  const context: ObjectiveNavContext = {\n    category: normalizeOrgCategory(category ?? organizer?.organizationCategory),\n    modules: Array.isArray(modules) ? modules : Array.isArray(organizer?.modules) ? organizer.modules : [],\n    username: organizer?.username ?? null,\n  };\n\n  const sections = getObjectiveSections(objective, context, { mode });\n  const active =\n    activeId && sections.some((section) => section.id === activeId)\n      ? activeId\n      : \"overview\";\n\n  if (hideWhenSingle && sections.length <= 1) return null;\n\n  const tabs = (\n    <div className=\"flex flex-wrap gap-2 rounded-2xl border border-white/10 bg-white/5 px-2 py-2 text-sm shadow-[0_16px_50px_rgba(0,0,0,0.4)]\">\n      {sections.map((section) => {\n        const isActive = section.id === active;\n        return (\n          <Link\n            key={section.id}\n            href={section.href}\n            className={cn(\n              \"rounded-xl px-3 py-2 font-semibold transition\",\n              isActive\n                ? \"bg-gradient-to-r from-[#FF7AD1]/60 via-[#7FE0FF]/35 to-[#6A7BFF]/55 text-white shadow-[0_14px_36px_rgba(107,255,255,0.45)]\"\n                : \"text-white/80 hover:bg-white/10\",\n            )}\n            aria-current={isActive ? \"page\" : undefined}\n          >\n            {section.label}\n          </Link>\n        );\n      })}\n    </div>\n  );\n\n  if (variant === \"tabs\") {\n    return <div className={className}>{tabs}</div>;\n  }\n\n  return (\n    <div\n      className={cn(\n        \"rounded-3xl border border-white/12 bg-gradient-to-r from-[#0b1226]/80 via-[#101b39]/75 to-[#050811]/90 p-4 shadow-[0_26px_90px_rgba(0,0,0,0.55)] backdrop-blur-2xl\",\n        className,\n      )}\n    >\n      <div className=\"flex flex-wrap items-center justify-between gap-3\">\n        <div className=\"inline-flex items-center gap-2 rounded-full border border-white/20 bg-white/10 px-3 py-1 text-[11px] uppercase tracking-[0.26em] text-white/70 shadow-[0_12px_32px_rgba(0,0,0,0.4)]\">\n          Objetivo · {OBJECTIVE_LABELS[objective]}\n        </div>\n        <div className=\"text-[11px] text-white/60\">{sections.length} secções</div>\n      </div>\n      <div className=\"mt-3\">{tabs}</div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;;;AALA;;;;;AAYA,MAAM,UAAU,CAAC,MAAgB,MAAM,KAAK,IAAI,CAAC,CAAC,MAAQ,IAAI,IAAI;AAElE,MAAM,mBAAiD;IACrD,QAAQ;IACR,QAAQ;IACR,SAAS;IACT,SAAS;AACX;AAae,SAAS,gBAAgB,EACtC,SAAS,EACT,QAAQ,EACR,QAAQ,EACR,OAAO,EACP,IAAI,EACJ,UAAU,MAAM,EAChB,iBAAiB,IAAI,EACrB,SAAS,EACY;;IACrB,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,4KAAM,EAAC,YAAY,UAAU,OAAO,uBAAuB;IAC5E,MAAM,YAAY,MAAM,aAAa;IAErC,MAAM,UAA+B;QACnC,UAAU,IAAA,6JAAoB,EAAC,YAAY,WAAW;QACtD,SAAS,MAAM,OAAO,CAAC,WAAW,UAAU,MAAM,OAAO,CAAC,WAAW,WAAW,UAAU,OAAO,GAAG,EAAE;QACtG,UAAU,WAAW,YAAY;IACnC;IAEA,MAAM,WAAW,IAAA,6JAAoB,EAAC,WAAW,SAAS;QAAE;IAAK;IACjE,MAAM,SACJ,YAAY,SAAS,IAAI,CAAC,CAAC,UAAY,QAAQ,EAAE,KAAK,YAClD,WACA;IAEN,IAAI,kBAAkB,SAAS,MAAM,IAAI,GAAG,OAAO;IAEnD,MAAM,qBACJ,6LAAC;QAAI,WAAU;kBACZ,SAAS,GAAG,CAAC,CAAC;YACb,MAAM,WAAW,QAAQ,EAAE,KAAK;YAChC,qBACE,6LAAC,0KAAI;gBAEH,MAAM,QAAQ,IAAI;gBAClB,WAAW,IAAA,qHAAE,EACX,iDACA,WACI,+HACA;gBAEN,gBAAc,WAAW,SAAS;0BAEjC,QAAQ,KAAK;eAVT,QAAQ,EAAE;;;;;QAarB;;;;;;IAIJ,IAAI,YAAY,QAAQ;QACtB,qBAAO,6LAAC;YAAI,WAAW;sBAAY;;;;;;IACrC;IAEA,qBACE,6LAAC;QACC,WAAW,IAAA,qHAAE,EACX,sKACA;;0BAGF,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;4BAAsL;4BACvL,gBAAgB,CAAC,UAAU;;;;;;;kCAEzC,6LAAC;wBAAI,WAAU;;4BAA6B,SAAS,MAAM;4BAAC;;;;;;;;;;;;;0BAE9D,6LAAC;gBAAI,WAAU;0BAAQ;;;;;;;;;;;;AAG7B;GAtEwB;;QAUL,4KAAM;;;KAVD"}},
    {"offset": {"line": 258, "column": 0}, "map": {"version":3,"sources":["file:///Users/nuno/orya/ORYA-WebApp/app/organizador/pagamentos/invoices/invoices-client.tsx"],"sourcesContent":["\"use client\";\n\nimport useSWR from \"swr\";\nimport { useSearchParams, useRouter } from \"next/navigation\";\nimport { useMemo, useEffect } from \"react\";\nimport { formatEuro } from \"@/lib/money\";\nimport { CTA_PRIMARY, CTA_SECONDARY } from \"@/app/organizador/dashboardUi\";\n\ntype InvoiceLine = { quantity: number };\ntype InvoiceEvent = { id: number; title: string; slug?: string | null; payoutMode?: string | null };\ntype InvoiceItem = {\n  id: number;\n  createdAt: string;\n  subtotalCents: number;\n  discountCents: number;\n  platformFeeCents: number;\n  totalCents: number;\n  netCents: number;\n  event?: InvoiceEvent | null;\n  lines?: InvoiceLine[];\n};\ntype InvoiceSummary = { grossCents: number; discountCents: number; platformFeeCents: number; netCents: number; tickets: number };\ntype InvoiceResponse =\n  | { ok: true; items: InvoiceItem[]; summary: InvoiceSummary }\n  | { ok: false; error?: string };\ntype OrganizerMeResponse = { organizer?: { id?: number | null } | null };\n\nconst fetcher = (url: string) => fetch(url).then((r) => r.json() as Promise<InvoiceResponse>);\nconst orgFetcher = (url: string) => fetch(url).then((r) => r.json() as Promise<OrganizerMeResponse>);\n\nconst toQuery = (params: Record<string, string | number | null | undefined>) => {\n  const url = new URLSearchParams();\n  Object.entries(params).forEach(([k, v]) => {\n    if (v !== null && v !== undefined && String(v).trim() !== \"\") {\n      url.set(k, String(v));\n    }\n  });\n  const qs = url.toString();\n  return qs ? `?${qs}` : \"\";\n};\n\nconst formatDateTime = (iso: string) =>\n  new Date(iso).toLocaleString(\"pt-PT\", { day: \"2-digit\", month: \"short\", hour: \"2-digit\", minute: \"2-digit\" });\n\ntype InvoicesClientProps = {\n  basePath?: string;\n  fullWidth?: boolean;\n  organizerId?: number | null;\n};\n\nexport default function InvoicesClient({\n  basePath = \"/organizador/pagamentos/invoices\",\n  fullWidth = true,\n  organizerId: organizerIdProp = null,\n}: InvoicesClientProps) {\n  const searchParams = useSearchParams();\n  const router = useRouter();\n  const organizerIdParam = searchParams?.get(\"organizerId\") ?? null;\n  const from = searchParams?.get(\"from\") ?? \"\";\n  const to = searchParams?.get(\"to\") ?? \"\";\n  const organizerIdQuery = organizerIdParam ? Number(organizerIdParam) : null;\n  const shouldFetchOrganizer = !organizerIdProp && !organizerIdQuery;\n  const { data: organizerData } = useSWR<OrganizerMeResponse>(\n    () => (shouldFetchOrganizer ? \"/api/organizador/me\" : null),\n    orgFetcher,\n  );\n  const organizerIdFromMe = organizerData?.organizer?.id ?? null;\n  const organizerId =\n    organizerIdProp ??\n    (organizerIdQuery && !Number.isNaN(organizerIdQuery) ? organizerIdQuery : null) ??\n    organizerIdFromMe ??\n    null;\n  const qs = toQuery({ organizerId, from, to });\n  const { data, isLoading, mutate } = useSWR(\n    () => (organizerId ? `/api/organizador/pagamentos/invoices${qs}` : null),\n    fetcher,\n    { revalidateOnFocus: false },\n  );\n\n  const summary: InvoiceSummary = data?.ok ? data.summary : { grossCents: 0, discountCents: 0, platformFeeCents: 0, netCents: 0, tickets: 0 };\n  const items: InvoiceItem[] = data?.ok ? data.items : [];\n  const totalTickets = useMemo(\n    () => (data?.ok ? data.items.reduce((acc, sale) => acc + (sale.lines?.reduce((s, l) => s + l.quantity, 0) ?? 0), 0) : 0),\n    [data],\n  );\n\n  const withQuery = (path: string, params: Record<string, string | number | null | undefined>) => {\n    const query = toQuery(params);\n    if (!query) return path;\n    return path.includes(\"?\") ? `${path}&${query.slice(1)}` : `${path}${query}`;\n  };\n\n  // Se houver organizerId mas não na query, sincroniza a URL.\n  useEffect(() => {\n    if (!organizerIdParam && organizerId) {\n      router.replace(withQuery(basePath, { organizerId, from, to }));\n    }\n  }, [organizerIdParam, organizerId, router, from, to, basePath]);\n\n  const downloadCsv = () => {\n    if (!items.length) return;\n    const rows = [\n      [\"Data\", \"Evento\", \"Payout Mode\", \"Subtotal\", \"Desconto\", \"Taxas\", \"Total\", \"Líquido\", \"Bilhetes\"],\n      ...items.map((sale) => [\n        sale.createdAt,\n        sale.event?.title ?? \"\",\n        sale.event?.payoutMode ?? \"\",\n        (sale.subtotalCents / 100).toFixed(2),\n        (sale.discountCents / 100).toFixed(2),\n        (sale.platformFeeCents / 100).toFixed(2),\n        (sale.totalCents / 100).toFixed(2),\n        (sale.netCents / 100).toFixed(2),\n        sale.lines?.reduce((s, l) => s + l.quantity, 0) ?? 0,\n      ]),\n    ];\n\n    const csvContent = rows.map((r) => r.join(\",\")).join(\"\\n\");\n    const blob = new Blob([csvContent], { type: \"text/csv;charset=utf-8;\" });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement(\"a\");\n    a.href = url;\n    a.download = \"invoices.csv\";\n    a.click();\n    URL.revokeObjectURL(url);\n  };\n\n  const handleDateChange = (which: \"from\" | \"to\", value: string) => {\n    router.push(\n      withQuery(basePath, {\n        organizerId,\n        from: which === \"from\" ? value : from,\n        to: which === \"to\" ? value : to,\n      }),\n    );\n  };\n\n  const stateCard = (() => {\n    if (isLoading) {\n      return (\n        <div className=\"rounded-3xl border border-white/10 bg-white/5 p-6 space-y-4 shadow-[0_18px_60px_rgba(0,0,0,0.55)]\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"h-10 w-10 rounded-2xl bg-white/10 animate-pulse\" />\n            <div className=\"space-y-2\">\n              <div className=\"h-4 w-40 rounded bg-white/10 animate-pulse\" />\n              <div className=\"h-3 w-32 rounded bg-white/10 animate-pulse\" />\n            </div>\n          </div>\n          <div className=\"grid gap-2 md:grid-cols-3\">\n            {[...Array(3)].map((_, idx) => (\n              <div key={idx} className=\"h-16 rounded-2xl border border-white/10 bg-white/5 animate-pulse\" />\n            ))}\n          </div>\n        </div>\n      );\n    }\n    if (!organizerId) {\n      return (\n        <div className=\"rounded-3xl border border-white/12 bg-white/5 p-5 text-sm text-white/75 shadow-[0_18px_50px_rgba(0,0,0,0.55)]\">\n          A carregar organização...\n        </div>\n      );\n    }\n    if (!data || data.ok === false) {\n      const errorCode = data && \"error\" in data ? data.error : null;\n      if (errorCode && [\"UNAUTHENTICATED\", \"FORBIDDEN\"].includes(errorCode)) {\n        return (\n          <div className=\"rounded-3xl border border-white/12 bg-white/5 p-5 text-sm text-white/75 shadow-[0_18px_50px_rgba(0,0,0,0.55)]\">\n            Não tens permissões para ver a faturação desta organização.\n          </div>\n        );\n      }\n      if (errorCode && errorCode !== \"INTERNAL_ERROR\") {\n        return (\n          <div className=\"rounded-3xl border border-white/10 bg-white/5 p-6 text-white/70 shadow-[0_18px_60px_rgba(0,0,0,0.55)]\">\n            Ainda não há faturação para mostrar. Quando houver vendas, vais ver tudo aqui.\n          </div>\n        );\n      }\n      return (\n        <div className=\"rounded-3xl border border-white/15 bg-red-500/10 p-5 text-sm text-white/80 shadow-[0_18px_50px_rgba(0,0,0,0.55)]\">\n          <p className=\"font-semibold text-white\">Não foi possível carregar faturação.</p>\n          <p className=\"text-white/65\">Tenta novamente ou ajusta o intervalo.</p>\n          <button\n            type=\"button\"\n            onClick={() => mutate()}\n            className={`${CTA_SECONDARY} mt-3 text-[12px]`}\n          >\n            Recarregar\n          </button>\n        </div>\n      );\n    }\n    if (items.length === 0) {\n      return (\n        <div className=\"rounded-3xl border border-white/10 bg-white/5 p-6 text-white/70 shadow-[0_18px_60px_rgba(0,0,0,0.55)]\">\n          Ainda não existem vendas neste intervalo. Ajusta as datas ou volta mais tarde.\n        </div>\n      );\n    }\n    return null;\n  })();\n\n  return (\n    <div className={fullWidth ? \"w-full space-y-6 text-white\" : \"mx-auto max-w-6xl px-4 py-6 space-y-6 text-white\"}>\n      <div className=\"rounded-3xl border border-white/12 bg-gradient-to-br from-white/10 via-[#0d1530]/75 to-[#050912]/90 p-5 shadow-[0_28px_90px_rgba(0,0,0,0.6)] backdrop-blur-3xl\">\n        <div className=\"flex flex-col gap-4 md:flex-row md:items-center md:justify-between\">\n          <div className=\"space-y-2\">\n            <div className=\"inline-flex items-center gap-2 rounded-full border border-white/20 bg-white/10 px-3 py-1 text-[11px] uppercase tracking-[0.24em] text-white/80 shadow-[0_10px_30px_rgba(0,0,0,0.4)]\">\n              Faturação premium\n            </div>\n            <h1 className=\"text-3xl font-semibold drop-shadow-[0_12px_40px_rgba(0,0,0,0.55)]\">Receitas, taxas e liquidez.</h1>\n            <p className=\"text-sm text-white/70\">Bruto, descontos, Stripe/ORYA e líquido por evento. Exporta tudo em CSV num clique.</p>\n          </div>\n          <div className=\"flex flex-wrap items-center gap-2 text-[12px]\">\n            {[\n              { key: \"7d\", label: \"7d\" },\n              { key: \"30d\", label: \"30d\" },\n              { key: \"90d\", label: \"90d\" },\n              { key: \"all\", label: \"Sempre\" },\n            ].map((preset) => (\n              <button\n                key={preset.key}\n                type=\"button\"\n                onClick={() =>\n                  router.push(\n                    withQuery(basePath, {\n                      organizerId,\n                      from: preset.key === \"all\" ? \"\" : new Date(Date.now() - (preset.key === \"7d\" ? 7 : preset.key === \"30d\" ? 30 : 90) * 86400000)\n                        .toISOString()\n                        .slice(0, 10),\n                      to: preset.key === \"all\" ? \"\" : new Date().toISOString().slice(0, 10),\n                    }),\n                  )\n                }\n                className={`rounded-full px-3 py-1.5 transition ${\n                  preset.key !== \"all\" && from && to\n                    ? \"bg-gradient-to-r from-[#FF00C8]/25 via-[#6BFFFF]/20 to-[#1646F5]/25 text-white shadow-[0_0_14px_rgba(107,255,255,0.35)]\"\n                    : \"border border-white/20 text-white/75 hover:bg-white/10\"\n                }`}\n              >\n                {preset.label}\n              </button>\n            ))}\n            <input\n              type=\"date\"\n              value={from}\n              onChange={(e) => handleDateChange(\"from\", e.target.value)}\n              className=\"rounded-xl border border-white/15 bg-black/40 px-3 py-2 text-sm outline-none focus:border-[#6BFFFF] focus:ring-1 focus:ring-[#6BFFFF]/50\"\n            />\n            <input\n              type=\"date\"\n              value={to}\n              onChange={(e) => handleDateChange(\"to\", e.target.value)}\n              className=\"rounded-xl border border-white/15 bg-black/40 px-3 py-2 text-sm outline-none focus:border-[#6BFFFF] focus:ring-1 focus:ring-[#6BFFFF]/50\"\n            />\n            <button\n              type=\"button\"\n              onClick={downloadCsv}\n              className={`${CTA_PRIMARY} disabled:opacity-50`}\n              disabled={!items.length}\n            >\n              Exportar CSV\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {stateCard}\n\n      {data?.ok && items.length > 0 && (\n        <>\n          <div className=\"grid gap-3 md:grid-cols-5\">\n            <SummaryCard label=\"Receita bruta\" value={formatEuro(summary.grossCents / 100)} tone=\"bright\" />\n            <SummaryCard label=\"Descontos\" value={formatEuro(summary.discountCents / 100)} tone=\"muted\" />\n            <SummaryCard label=\"Taxas\" value={formatEuro(summary.platformFeeCents / 100)} tone=\"muted\" helper=\"Inclui Stripe + ORYA (se aplicável).\" />\n            <SummaryCard label=\"Líquido\" value={formatEuro(summary.netCents / 100)} tone=\"success\" helper=\"Valor que recebes.\" />\n            <SummaryCard label=\"Bilhetes\" value={`${totalTickets}`} tone=\"slate\" helper=\"Total no intervalo.\" />\n          </div>\n\n          <div className=\"rounded-3xl border border-white/12 bg-gradient-to-br from-white/8 via-[#0b1124]/75 to-[#050810]/92 p-4 shadow-[0_22px_70px_rgba(0,0,0,0.6)] overflow-x-auto backdrop-blur-2xl\">\n            <table className=\"min-w-full text-sm text-white/85\">\n              <thead className=\"text-left text-[11px] uppercase tracking-[0.18em] text-white/60\">\n                <tr className=\"border-b border-white/10\">\n                  <th className=\"py-2 pr-3\">Evento</th>\n                  <th className=\"py-2 pr-3\">Data</th>\n                  <th className=\"py-2 pr-3\">Bilhetes</th>\n                  <th className=\"py-2 pr-3\">Bruto</th>\n                  <th className=\"py-2 pr-3\">Descontos</th>\n                  <th className=\"py-2 pr-3\">Taxas</th>\n                  <th className=\"py-2 pr-3\">Líquido</th>\n                  <th className=\"py-2 pr-3\">Modo</th>\n                </tr>\n              </thead>\n              <tbody className=\"divide-y divide-white/10\">\n                {items.map((sale) => {\n                  const tickets = sale.lines?.reduce((s, l) => s + l.quantity, 0) ?? 0;\n                  return (\n                    <tr key={sale.id} className=\"hover:bg-white/5 transition\">\n                      <td className=\"py-3 pr-3\">\n                        <div className=\"font-semibold text-white\">{sale.event?.title ?? \"Evento\"}</div>\n                        <div className=\"text-[11px] text-white/60\">{sale.event?.slug ?? \"—\"}</div>\n                      </td>\n                      <td className=\"py-3 pr-3 text-[12px] text-white/70\">{formatDateTime(sale.createdAt)}</td>\n                      <td className=\"py-3 pr-3 text-[12px]\">{tickets}</td>\n                      <td className=\"py-3 pr-3\">{formatEuro(sale.subtotalCents / 100)}</td>\n                      <td className=\"py-3 pr-3\">{formatEuro(sale.discountCents / 100)}</td>\n                      <td className=\"py-3 pr-3\">{formatEuro(sale.platformFeeCents / 100)}</td>\n                      <td className=\"py-3 pr-3 font-semibold text-white\">{formatEuro(sale.netCents / 100)}</td>\n                      <td className=\"py-3 pr-3 text-[11px]\">\n                        <span className=\"rounded-full border border-white/25 bg-white/10 px-2.5 py-0.5 text-white shadow-[0_8px_18px_rgba(0,0,0,0.35)]\">\n                          {sale.event?.payoutMode ?? \"STANDARD\"}\n                        </span>\n                      </td>\n                    </tr>\n                  );\n                })}\n              </tbody>\n            </table>\n          </div>\n        </>\n      )}\n    </div>\n  );\n}\n\nfunction SummaryCard({\n  label,\n  value,\n  tone = \"default\",\n  helper,\n}: {\n  label: string;\n  value: string;\n  tone?: \"default\" | \"muted\" | \"bright\" | \"success\" | \"slate\";\n  helper?: string;\n}) {\n  const toneClass =\n    tone === \"success\"\n      ? \"bg-gradient-to-br from-emerald-400/25 via-emerald-500/20 to-teal-500/25 border-emerald-300/45 text-emerald-50\"\n      : tone === \"bright\"\n        ? \"bg-gradient-to-r from-[#FF00C8]/30 via-[#6BFFFF]/18 to-[#1646F5]/28 border-white/18 text-white\"\n        : tone === \"muted\"\n          ? \"bg-white/6 text-white/70 border-white/12\"\n          : tone === \"slate\"\n            ? \"bg-gradient-to-br from-white/12 via-white/6 to-white/4 text-white/80 border-white/14\"\n            : \"bg-white/8 text-white border-white/12\";\n\n  return (\n    <div className={`rounded-2xl border p-4 shadow-[0_16px_50px_rgba(0,0,0,0.38)] backdrop-blur-2xl ${toneClass}`}>\n      <p className=\"text-[11px] uppercase tracking-[0.2em] text-white/75\">{label}</p>\n      <p className=\"text-xl font-semibold leading-tight drop-shadow-[0_10px_25px_rgba(0,0,0,0.4)]\">{value}</p>\n      {helper && <p className=\"text-[11px] text-white/60 mt-1\">{helper}</p>}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1006, "column": 0}, "map": {"version":3,"sources":["file:///Users/nuno/orya/ORYA-WebApp/app/organizador/OrganizerPublicProfilePanel.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useRef, useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { sanitizeUsername, validateUsername } from \"@/lib/username\";\nimport { CTA_PRIMARY, CTA_SECONDARY, CTA_NEUTRAL } from \"@/app/organizador/dashboardUi\";\nimport { useUser } from \"@/app/hooks/useUser\";\nimport { useAuthModal } from \"@/app/components/autenticação/AuthModalContext\";\n\nconst BIO_LIMIT = 280;\n\ntype OrganizerProfileInfo = {\n  id?: number;\n  publicName?: string | null;\n  businessName?: string | null;\n  username?: string | null;\n  publicDescription?: string | null;\n  brandingAvatarUrl?: string | null;\n  brandingCoverUrl?: string | null;\n  publicListingEnabled?: boolean | null;\n  publicWebsite?: string | null;\n  publicInstagram?: string | null;\n  publicYoutube?: string | null;\n  publicHours?: string | null;\n  officialEmail?: string | null;\n  officialEmailVerifiedAt?: string | Date | null;\n  address?: string | null;\n  showAddressPublicly?: boolean | null;\n  city?: string | null;\n  liveHubPremiumEnabled?: boolean | null;\n};\n\ntype OrganizerPublicProfilePanelProps = {\n  organizer: OrganizerProfileInfo | null;\n  membershipRole?: string | null;\n  categoryLabel?: string;\n  coverUrl?: string | null;\n};\n\nexport default function OrganizerPublicProfilePanel({\n  organizer,\n  membershipRole,\n  categoryLabel,\n  coverUrl,\n}: OrganizerPublicProfilePanelProps) {\n  const { user } = useUser();\n  const { openModal } = useAuthModal();\n  const router = useRouter();\n  const canEdit = membershipRole === \"OWNER\";\n\n  const [name, setName] = useState(\"\");\n  const [username, setUsername] = useState(\"\");\n  const [bio, setBio] = useState(\"\");\n  const [city, setCity] = useState(\"\");\n  const [avatarUrl, setAvatarUrl] = useState<string | null>(null);\n  const [coverImageUrl, setCoverImageUrl] = useState<string | null>(null);\n  const [editingField, setEditingField] = useState<\"name\" | \"username\" | \"city\" | \"bio\" | null>(null);\n  const [saving, setSaving] = useState(false);\n  const [savingUsername, setSavingUsername] = useState(false);\n  const [message, setMessage] = useState<string | null>(null);\n  const [usernameMessage, setUsernameMessage] = useState<string | null>(null);\n  const [uploading, setUploading] = useState(false);\n  const [uploadingCover, setUploadingCover] = useState(false);\n  const [coverDirty, setCoverDirty] = useState(false);\n  const avatarInputRef = useRef<HTMLInputElement | null>(null);\n  const coverInputRef = useRef<HTMLInputElement | null>(null);\n\n  useEffect(() => {\n    if (!organizer) return;\n    const initialName = organizer.publicName || organizer.businessName || \"\";\n    setName(initialName);\n    setUsername(organizer.username ?? \"\");\n    setBio(organizer.publicDescription ?? \"\");\n    setAvatarUrl(organizer.brandingAvatarUrl ?? null);\n    setCity(organizer.city ?? \"\");\n    if (!coverDirty) {\n      setCoverImageUrl(organizer.brandingCoverUrl ?? coverUrl ?? null);\n    }\n  }, [organizer, coverUrl, coverDirty]);\n\n  useEffect(() => {\n    setCoverDirty(false);\n  }, [organizer?.id]);\n\n\n  const handleAvatarUpload = async (file: File | null) => {\n    if (!file) return;\n    setUploading(true);\n    setMessage(null);\n    try {\n      const formData = new FormData();\n      formData.append(\"file\", file);\n      const res = await fetch(\"/api/upload?scope=avatar\", { method: \"POST\", body: formData });\n      const json = await res.json().catch(() => null);\n      if (!res.ok || !json?.url) {\n        setMessage(json?.error || \"Não foi possível carregar a imagem.\");\n        return;\n      }\n      setAvatarUrl(json.url as string);\n      setMessage(\"Imagem atualizada. Não te esqueças de guardar.\");\n    } catch (err) {\n      console.error(\"[perfil-publico] upload\", err);\n      setMessage(\"Erro ao carregar a imagem.\");\n    } finally {\n      setUploading(false);\n    }\n  };\n\n  const handleCoverUpload = async (file: File | null) => {\n    if (!file) return;\n    setUploadingCover(true);\n    setMessage(null);\n    try {\n      const formData = new FormData();\n      formData.append(\"file\", file);\n      const res = await fetch(\"/api/upload?scope=event-cover\", { method: \"POST\", body: formData });\n      const json = await res.json().catch(() => null);\n      if (!res.ok || !json?.url) {\n        setMessage(json?.error || \"Não foi possível carregar a capa.\");\n        return;\n      }\n      setCoverImageUrl(json.url as string);\n      setCoverDirty(true);\n      setMessage(\"Capa atualizada. Não te esqueças de guardar.\");\n    } catch (err) {\n      console.error(\"[perfil-publico] cover upload\", err);\n      setMessage(\"Erro ao carregar a capa.\");\n    } finally {\n      setUploadingCover(false);\n    }\n  };\n\n  const handleSaveProfile = async () => {\n    if (!user) {\n      openModal({ mode: \"login\", redirectTo: \"/organizador?tab=overview\" });\n      return;\n    }\n    if (!canEdit) return;\n    const trimmedName = name.trim();\n    if (!trimmedName) {\n      setMessage(\"O nome público é obrigatório.\");\n      return;\n    }\n    if (bio.length > BIO_LIMIT) {\n      setMessage(\"A bio é demasiado longa.\");\n      return;\n    }\n\n    setSaving(true);\n    setMessage(null);\n    try {\n      const res = await fetch(\"/api/organizador/me\", {\n        method: \"PATCH\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          publicName: trimmedName,\n          publicDescription: bio.trim(),\n          brandingAvatarUrl: avatarUrl,\n          brandingCoverUrl: coverImageUrl,\n          city: city.trim(),\n        }),\n      });\n      const json = await res.json().catch(() => null);\n      if (!res.ok || json?.ok === false) {\n        setMessage(json?.error || \"Não foi possível guardar o perfil público.\");\n        return;\n      }\n      setMessage(\"Perfil público atualizado.\");\n      setEditingField(null);\n      setCoverDirty(false);\n      router.refresh();\n    } catch (err) {\n      console.error(\"[perfil-publico] save\", err);\n      setMessage(\"Erro ao guardar alterações.\");\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleSaveUsername = async () => {\n    if (!user) {\n      openModal({ mode: \"login\", redirectTo: \"/organizador?tab=overview\" });\n      return;\n    }\n    if (!canEdit) return;\n    setUsernameMessage(null);\n    const validation = validateUsername(username);\n    if (!validation.valid) {\n      setUsernameMessage(validation.error);\n      return;\n    }\n    setSavingUsername(true);\n    try {\n      const res = await fetch(\"/api/organizador/username\", {\n        method: \"PATCH\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ username: validation.normalized }),\n      });\n      const json = await res.json().catch(() => null);\n      if (!res.ok || json?.ok === false) {\n        setUsernameMessage(json?.error || \"Não foi possível atualizar o username.\");\n        return;\n      }\n      setUsername(validation.normalized);\n      setUsernameMessage(\"Username atualizado.\");\n      setEditingField(null);\n      router.refresh();\n    } catch (err) {\n      console.error(\"[perfil-publico] username\", err);\n      setUsernameMessage(\"Erro ao atualizar o username.\");\n    } finally {\n      setSavingUsername(false);\n    }\n  };\n\n  const displayName = name.trim() || organizer?.businessName?.trim() || \"Organização ORYA\";\n  const displayUsername = username.trim() || organizer?.username?.trim() || null;\n  const displayBio = bio.trim() || organizer?.publicDescription?.trim() || \"\";\n  const displayCity = city.trim() || organizer?.city?.trim() || \"\";\n  const avatarPreviewUrl = avatarUrl ?? organizer?.brandingAvatarUrl ?? null;\n  const coverPreviewUrl = coverImageUrl ?? coverUrl ?? null;\n  const publicProfileUrl = displayUsername ? `/${displayUsername}` : null;\n\n  if (!organizer) {\n    return (\n      <div className=\"rounded-3xl border border-white/12 bg-white/5 p-6 text-white/70\">\n        A carregar perfil público…\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"mt-4\">\n      <input\n        ref={coverInputRef}\n        type=\"file\"\n        accept=\"image/*\"\n        className=\"hidden\"\n        disabled={!canEdit || uploadingCover}\n        onChange={(e) => handleCoverUpload(e.target.files?.[0] ?? null)}\n      />\n      <input\n        ref={avatarInputRef}\n        type=\"file\"\n        accept=\"image/*\"\n        className=\"hidden\"\n        disabled={!canEdit || uploading}\n        onChange={(e) => handleAvatarUpload(e.target.files?.[0] ?? null)}\n      />\n\n      <section className=\"relative overflow-hidden rounded-3xl border border-white/12 bg-gradient-to-br from-white/7 via-[#060914]/92 to-[#05070f]/96 shadow-[0_26px_80px_rgba(0,0,0,0.85)] backdrop-blur-2xl\">\n        <div className=\"px-5 pt-5 sm:px-8\">\n          <div className=\"mx-auto w-full max-w-5xl\">\n            <div className=\"relative h-36 w-full overflow-hidden rounded-2xl border border-white/10\">\n              <div\n                className=\"absolute inset-0 bg-cover bg-center\"\n                style={coverPreviewUrl ? { backgroundImage: `url(${coverPreviewUrl})` } : undefined}\n              />\n              {!coverPreviewUrl && (\n                <div className=\"absolute inset-0 bg-[radial-gradient(circle_at_20%_20%,rgba(107,255,255,0.25),transparent_55%),radial-gradient(circle_at_80%_20%,rgba(255,0,200,0.2),transparent_55%),linear-gradient(135deg,rgba(6,10,20,0.8),rgba(9,10,18,0.95))]\" />\n              )}\n              <div className=\"absolute inset-0 bg-gradient-to-b from-black/10 via-black/50 to-[#05070f]/95\" />\n              {canEdit && (\n                <div className=\"absolute right-3 top-3 z-10 flex items-center gap-2\">\n                  <button\n                    type=\"button\"\n                    onClick={() => coverInputRef.current?.click()}\n                    className=\"rounded-full border border-white/20 bg-black/40 px-3 py-1 text-[11px] text-white/80 hover:bg-black/60\"\n                    disabled={uploadingCover}\n                  >\n                    {uploadingCover ? \"A carregar…\" : \"Alterar capa\"}\n                  </button>\n                  {coverPreviewUrl && (\n                    <button\n                      type=\"button\"\n                      onClick={() => {\n                        setCoverImageUrl(null);\n                        setCoverDirty(true);\n                        setMessage(\"Capa removida. Não te esqueças de guardar.\");\n                      }}\n                      className={CTA_NEUTRAL}\n                      disabled={uploadingCover}\n                    >\n                      Remover\n                    </button>\n                  )}\n                </div>\n              )}\n              {canEdit && (\n                <button\n                  type=\"button\"\n                  onClick={() => coverInputRef.current?.click()}\n                  className=\"absolute inset-0 z-0\"\n                  aria-label=\"Editar capa\"\n                />\n              )}\n            </div>\n          </div>\n        </div>\n\n        <div className=\"relative -mt-10 px-5 pb-6 sm:px-8\">\n          <div className=\"mx-auto flex w-full max-w-5xl flex-col gap-4 md:flex-row md:items-end md:justify-between\">\n            <div className=\"flex items-start gap-4\">\n              <div className=\"relative shrink-0\">\n                <button\n                  type=\"button\"\n                  onClick={() => avatarInputRef.current?.click()}\n                  className=\"relative inline-flex h-20 w-20 sm:h-24 sm:w-24 items-center justify-center rounded-full bg-gradient-to-tr from-[#FF00C8] via-[#6BFFFF] to-[#1646F5] p-[2px] shadow-[0_0_24px_rgba(255,0,200,0.26)]\"\n                  disabled={!canEdit || uploading}\n                >\n                  <div className=\"flex h-full w-full items-center justify-center overflow-hidden rounded-full bg-black/90\">\n                    {avatarPreviewUrl ? (\n                      // eslint-disable-next-line @next/next/no-img-element\n                      <img src={avatarPreviewUrl} alt={displayName} className=\"h-full w-full object-cover\" />\n                    ) : (\n                      <span className=\"text-xs font-semibold uppercase tracking-[0.2em] text-white/60\">\n                        {displayName.slice(0, 2).toUpperCase()}\n                      </span>\n                    )}\n                  </div>\n                  {canEdit && (\n                    <span className=\"absolute -bottom-1 -right-1 rounded-full border border-white/20 bg-black/70 p-1.5 text-white/80\">\n                      <PencilIcon />\n                    </span>\n                  )}\n                </button>\n                {canEdit && avatarPreviewUrl && (\n                  <button\n                    type=\"button\"\n                    onClick={() => {\n                      setAvatarUrl(null);\n                      setMessage(\"Foto removida. Não te esqueças de guardar.\");\n                    }}\n                    className=\"mt-2 text-[11px] text-white/70 hover:text-white\"\n                  >\n                    Remover foto\n                  </button>\n                )}\n              </div>\n\n              <div className=\"flex min-w-0 flex-col gap-3\">\n                <div className=\"flex flex-wrap items-center gap-2\">\n                  {editingField === \"name\" ? (\n                    <input\n                      value={name}\n                      onChange={(e) => setName(e.target.value)}\n                      className=\"rounded-xl border border-white/15 bg-black/30 px-3 py-1.5 text-lg font-semibold text-white outline-none focus:border-white/40\"\n                      placeholder=\"Nome público\"\n                    />\n                  ) : (\n                    <h1 className=\"text-[22px] sm:text-3xl font-semibold tracking-tight text-white truncate\">\n                      {displayName}\n                    </h1>\n                  )}\n                  {canEdit && (\n                    <button\n                      type=\"button\"\n                      onClick={() => setEditingField(editingField === \"name\" ? null : \"name\")}\n                      className=\"rounded-full border border-white/20 bg-white/5 px-2.5 py-1 text-[11px] text-white/70 hover:bg-white/10\"\n                    >\n                      <PencilIcon />\n                    </button>\n                  )}\n                </div>\n\n                <div className=\"flex flex-wrap items-center gap-2 text-[12px] text-white/80\">\n                  {editingField === \"username\" ? (\n                    <div className=\"flex flex-wrap items-center gap-2\">\n                      <div className=\"inline-flex items-center rounded-xl border border-white/15 bg-black/30 px-3 py-1.5 text-sm text-white\">\n                        <span className=\"text-white/50\">@</span>\n                        <input\n                          value={username}\n                          onChange={(e) => setUsername(sanitizeUsername(e.target.value))}\n                          className=\"ml-2 min-w-[140px] bg-transparent text-sm text-white outline-none\"\n                        />\n                      </div>\n                      <button\n                        type=\"button\"\n                        className={CTA_SECONDARY}\n                        onClick={handleSaveUsername}\n                        disabled={!canEdit || savingUsername}\n                      >\n                        {savingUsername ? \"A guardar…\" : \"Guardar @\"}\n                      </button>\n                    </div>\n                  ) : (\n                    <span className=\"rounded-full border border-white/15 bg-white/6 px-3 py-1 font-semibold text-white\">\n                      {displayUsername ? `@${displayUsername}` : \"Define um @username\"}\n                    </span>\n                  )}\n                  {canEdit && (\n                    <button\n                      type=\"button\"\n                      onClick={() => setEditingField(editingField === \"username\" ? null : \"username\")}\n                      className=\"rounded-full border border-white/20 bg-white/5 px-2.5 py-1 text-[11px] text-white/70 hover:bg-white/10\"\n                    >\n                      <PencilIcon />\n                    </button>\n                  )}\n                  {editingField === \"city\" ? (\n                    <input\n                      value={city}\n                      onChange={(e) => setCity(e.target.value)}\n                      className=\"rounded-xl border border-white/15 bg-black/30 px-3 py-1.5 text-sm text-white outline-none focus:border-white/40\"\n                      placeholder=\"Cidade\"\n                    />\n                  ) : (\n                    <span className=\"rounded-full border border-white/10 px-3 py-1 text-white/70\">\n                      {displayCity || \"Cidade por definir\"}\n                    </span>\n                  )}\n                  {canEdit && (\n                    <button\n                      type=\"button\"\n                      onClick={() => setEditingField(editingField === \"city\" ? null : \"city\")}\n                      className=\"rounded-full border border-white/20 bg-white/5 px-2.5 py-1 text-[11px] text-white/70 hover:bg-white/10\"\n                    >\n                      <PencilIcon />\n                    </button>\n                  )}\n                </div>\n\n                <div className=\"flex items-start gap-2\">\n                  {editingField === \"bio\" ? (\n                    <textarea\n                      value={bio}\n                      onChange={(e) => setBio(e.target.value.slice(0, BIO_LIMIT))}\n                      rows={3}\n                      className=\"w-full rounded-xl border border-white/15 bg-black/30 px-3 py-2 text-sm text-white outline-none focus:border-white/40\"\n                      placeholder=\"Escreve uma bio curta\"\n                    />\n                  ) : (\n                    <p className=\"max-w-xl text-sm text-white/85 leading-relaxed\">\n                      {displayBio || \"Sem bio no momento.\"}\n                    </p>\n                  )}\n                  {canEdit && (\n                    <button\n                      type=\"button\"\n                      onClick={() => setEditingField(editingField === \"bio\" ? null : \"bio\")}\n                      className=\"mt-1 rounded-full border border-white/20 bg-white/5 px-2.5 py-1 text-[11px] text-white/70 hover:bg-white/10\"\n                    >\n                      <PencilIcon />\n                    </button>\n                  )}\n                </div>\n                {categoryLabel && <span className=\"text-[11px] text-white/50\">Categoria: {categoryLabel}</span>}\n                {usernameMessage && <p className=\"text-[11px] text-white/60\">{usernameMessage}</p>}\n                {message && <p className=\"text-[12px] text-white/70\">{message}</p>}\n              </div>\n            </div>\n\n            {organizer && (\n              <div className=\"rounded-2xl border border-white/12 bg-white/5 px-3 py-3 text-sm text-white/75\">\n                <p className=\"text-[11px] uppercase tracking-[0.24em] text-white/60\">\n                  Premium da organização\n                </p>\n                <p className=\"text-sm text-white/80\">\n                  {organizer.liveHubPremiumEnabled ? \"Ativo\" : \"Inativo\"} · Gerido automaticamente pela subscrição.\n                </p>\n              </div>\n            )}\n\n            <div className=\"flex flex-wrap items-center gap-2\">\n              {publicProfileUrl && (\n                <span className=\"rounded-full border border-white/15 bg-white/5 px-3 py-2 text-[11px] text-white/70\">\n                  {publicProfileUrl}\n                </span>\n              )}\n              {canEdit && (\n                <button\n                  type=\"button\"\n                  onClick={handleSaveProfile}\n                  className={CTA_PRIMARY}\n                  disabled={saving}\n                >\n                  {saving ? \"A guardar…\" : \"Guardar alterações\"}\n                </button>\n              )}\n            </div>\n          </div>\n        </div>\n      </section>\n    </div>\n  );\n}\n\nfunction PencilIcon() {\n  return (\n    <svg\n      aria-hidden=\"true\"\n      className=\"h-3.5 w-3.5\"\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n    >\n      <path\n        d=\"M4 20l4.5-1 9.2-9.2a2.5 2.5 0 0 0 0-3.5l-.9-.9a2.5 2.5 0 0 0-3.5 0L4 14.6V20z\"\n        stroke=\"currentColor\"\n        strokeWidth=\"1.5\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      />\n      <path\n        d=\"M12.5 6.5l5 5\"\n        stroke=\"currentColor\"\n        strokeWidth=\"1.5\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      />\n    </svg>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1799, "column": 0}, "map": {"version":3,"sources":["file:///Users/nuno/orya/ORYA-WebApp/app/organizador/OrganizerTour.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\nimport { usePathname, useRouter } from \"next/navigation\";\nimport { trackEvent } from \"@/lib/analytics\";\n\ntype Step = {\n  id: string;\n  title: string;\n  body: string;\n  anchor?: string;\n  ctaLabel?: string;\n  ctaAction?: { type: \"navigate\" | \"next\"; href?: string };\n};\n\nconst steps: Step[] = [\n  {\n    id: \"welcome\",\n    title: \"Bem-vindo ao painel de organizador\",\n    body: \"Vamos guiar-te pelos pontos chave para lançares o teu primeiro evento em minutos.\",\n    ctaLabel: \"Começar\",\n    ctaAction: { type: \"next\" },\n  },\n  {\n    id: \"org-switcher\",\n    title: \"Organizações e troca rápida\",\n    body: \"Aqui mudas entre organizações, crias uma nova ou voltas ao modo utilizador.\",\n    anchor: \"[data-tour='org-switcher-button']\",\n    ctaLabel: \"Seguinte\",\n    ctaAction: { type: \"next\" },\n  },\n  {\n    id: \"create-event\",\n    title: \"Criar evento\",\n    body: \"Usa templates de Padel ou eventos gerais e publica em minutos.\",\n    anchor: \"[data-tour='criar-evento']\",\n    ctaLabel: \"Seguinte\",\n    ctaAction: { type: \"next\" },\n  },\n  {\n    id: \"finance\",\n    title: \"Finanças & Stripe\",\n    body: \"Liga o Stripe/Connect, acompanha receita, payouts e alertas.\",\n    anchor: \"[data-tour='finance']\",\n    ctaLabel: \"Seguinte\",\n    ctaAction: { type: \"next\" },\n  },\n  {\n    id: \"marketing\",\n    title: \"Marketing & códigos\",\n    body: \"Códigos promocionais, boosts e partilha de links para vender mais rápido.\",\n    anchor: \"[data-tour='marketing']\",\n    ctaLabel: \"Seguinte\",\n    ctaAction: { type: \"next\" },\n  },\n  {\n    id: \"staff\",\n    title: \"Equipa & acessos\",\n    body: \"Convida staff, define papéis e controla quem faz check-in.\",\n    anchor: \"[data-tour='staff']\",\n    ctaLabel: \"Seguinte\",\n    ctaAction: { type: \"next\" },\n  },\n  {\n    id: \"overview\",\n    title: \"KPIs e resumo\",\n    body: \"Acompanha vendas, receita líquida e próximos passos logo no resumo.\",\n    anchor: \"[data-tour='overview']\",\n    ctaLabel: \"Seguinte\",\n    ctaAction: { type: \"next\" },\n  },\n  {\n    id: \"finish\",\n    title: \"Pronto para lançar\",\n    body: \"Completa Stripe, cria o evento e convida a equipa. Estamos aqui se precisares.\",\n    ctaLabel: \"Terminar tour\",\n    ctaAction: { type: \"next\" },\n  },\n];\n\nconst TOUR_KEY = \"orya_org_tour_seen_v2\";\nconst TOUR_PROGRESS_KEY = \"orya_org_tour_step_v2\";\nconst TOUR_GLOBAL_KEY = \"orya_org_tour_seen_once\";\nconst TOUR_EVENT = \"orya:startTour\";\nconst SIDEBAR_WIDTH_EVENT = \"orya:sidebar-width\";\nconst SIDEBAR_READY_EVENT = \"orya:sidebar-ready\";\n\nconst anchorSelectors = (anchor?: string) => {\n  if (!anchor) return [] as string[];\n  const list = [anchor];\n  if (anchor === \"[data-tour='org-switcher']\" || anchor === \"[data-tour='org-switcher-button']\") {\n    list.push(\"[data-tour='org-switcher-button']\", \"[data-tour='org-switcher']\");\n  }\n  // Fallback apenas quando há anchor definido\n  list.push(\"[data-tour='sidebar-rail']\");\n  return list;\n};\n\ntype OrganizerTourProps = {\n  organizerId?: number | null;\n};\n\nexport function OrganizerTour({ organizerId }: OrganizerTourProps) {\n  const router = useRouter();\n  const pathname = usePathname();\n  const [open, setOpen] = useState(false);\n  const [index, setIndex] = useState(0);\n  const [mounted, setMounted] = useState(false);\n  const [viewport, setViewport] = useState<{ width: number; height: number }>({ width: 0, height: 0 });\n  const [anchorRect, setAnchorRect] = useState<DOMRect | null>(null);\n  const [anchorEl, setAnchorEl] = useState<HTMLElement | null>(null);\n\n  const tourKey = useMemo(\n    () => (organizerId ? `${TOUR_KEY}:${organizerId}` : TOUR_KEY),\n    [organizerId],\n  );\n  const progressKey = useMemo(\n    () => (organizerId ? `${TOUR_PROGRESS_KEY}:${organizerId}` : TOUR_PROGRESS_KEY),\n    [organizerId],\n  );\n\n  const shouldShow = mounted && open;\n\n  useEffect(() => {\n    const id = requestAnimationFrame(() => {\n      setMounted(true);\n      const seenGlobal = typeof window !== \"undefined\" ? localStorage.getItem(TOUR_GLOBAL_KEY) : \"1\";\n      const seen = typeof window !== \"undefined\" ? localStorage.getItem(tourKey) : \"1\";\n      if (!seen && !seenGlobal) {\n        const savedStep = typeof window !== \"undefined\" ? Number(localStorage.getItem(progressKey)) : 0;\n        if (Number.isFinite(savedStep) && savedStep > 0 && savedStep < steps.length) {\n          setIndex(savedStep);\n        }\n        setOpen(true);\n      }\n      const handler = () => {\n        if (typeof window !== \"undefined\" && localStorage.getItem(TOUR_GLOBAL_KEY)) return;\n        localStorage.removeItem(tourKey);\n        localStorage.removeItem(progressKey);\n        setIndex(0);\n        setOpen(true);\n      };\n      window.addEventListener(TOUR_EVENT, handler);\n      return () => window.removeEventListener(TOUR_EVENT, handler);\n    });\n    return () => cancelAnimationFrame(id);\n  }, []);\n\n  useEffect(() => {\n    const updateViewport = () => {\n      if (typeof window === \"undefined\") return;\n      setViewport({ width: window.innerWidth, height: window.innerHeight });\n    };\n    updateViewport();\n    window.addEventListener(\"resize\", updateViewport);\n    return () => window.removeEventListener(\"resize\", updateViewport);\n  }, []);\n\n  const step = useMemo(() => steps[index], [index]);\n  const isMobile = viewport.width < 768 && viewport.width > 0;\n  const highlightEnabled = shouldShow && !isMobile && !!step.anchor;\n\n  useEffect(() => {\n    if (!shouldShow) return;\n    if (!highlightEnabled || !step.anchor) {\n      const id = requestAnimationFrame(() => {\n        setAnchorRect(null);\n        setAnchorEl(null);\n      });\n      return () => cancelAnimationFrame(id);\n    }\n\n    let stopped = false;\n    let observer: ResizeObserver | null = null;\n\n    const tryResolve = () => {\n      if (!shouldShow || stopped || !highlightEnabled) return;\n      const el = document.querySelector(step.anchor!) as HTMLElement | null;\n      if (el) {\n        const rect = el.getBoundingClientRect();\n        setAnchorRect(rect);\n        setAnchorEl(el);\n        observer = new ResizeObserver(() => {\n          const nextRect = el.getBoundingClientRect();\n          setAnchorRect(nextRect);\n        });\n        observer.observe(el);\n      } else {\n        setAnchorRect(null);\n        setAnchorEl(null);\n        requestAnimationFrame(tryResolve);\n      }\n    };\n\n    tryResolve();\n\n    return () => {\n      stopped = true;\n      if (observer) observer.disconnect();\n    };\n  }, [shouldShow, step.anchor, pathname, highlightEnabled]);\n\n  const goNext = () => {\n    trackEvent(\"organizer_tour_next\", { step: index });\n    if (index < steps.length - 1) {\n      setIndex((v) => {\n        const next = v + 1;\n        localStorage.setItem(progressKey, String(next));\n        return next;\n      });\n    } else {\n      finish();\n    }\n  };\n\n  const goPrev = () => {\n    if (index === 0) return;\n    setIndex((v) => {\n      const prev = Math.max(0, v - 1);\n      localStorage.setItem(progressKey, String(prev));\n      return prev;\n    });\n  };\n\n  const finish = () => {\n    trackEvent(\"organizer_tour_finish\");\n    localStorage.setItem(TOUR_GLOBAL_KEY, \"1\");\n    localStorage.setItem(tourKey, \"1\");\n    localStorage.removeItem(progressKey);\n    setOpen(false);\n  };\n\n  useEffect(() => {\n    if (highlightEnabled && anchorRect && step.anchor) {\n      const selectors = anchorSelectors(step.anchor);\n      const el = selectors.map((sel) => document.querySelector(sel)).find(Boolean);\n      el?.scrollIntoView({ behavior: \"smooth\", block: \"center\" });\n    }\n  }, [anchorRect, highlightEnabled, step.anchor]);\n\n  useEffect(() => {\n    if (!highlightEnabled) return;\n    const handler = () => {\n      if (!step.anchor) return;\n      const el = document.querySelector(step.anchor) as HTMLElement | null;\n      if (!el) return;\n      setAnchorRect(el.getBoundingClientRect());\n      setAnchorEl(el);\n    };\n    window.addEventListener(SIDEBAR_WIDTH_EVENT, handler);\n    window.addEventListener(SIDEBAR_READY_EVENT, handler);\n    return () => {\n      window.removeEventListener(SIDEBAR_WIDTH_EVENT, handler);\n      window.removeEventListener(SIDEBAR_READY_EVENT, handler);\n    };\n  }, [highlightEnabled, step.anchor]);\n\n  useEffect(() => {\n    if (typeof document === \"undefined\") return;\n    if (!document.getElementById(\"tour-highlight-style\")) {\n      const style = document.createElement(\"style\");\n      style.id = \"tour-highlight-style\";\n      style.textContent =\n        \".tour-highlight-ring{position:relative;box-shadow:0 0 0 3px rgba(107,255,255,0.6),0 0 24px rgba(107,255,255,0.35);border-radius:14px;z-index:9999;}\";\n      document.head.appendChild(style);\n    }\n  }, []);\n\n  useEffect(() => {\n    if (!highlightEnabled) return;\n    if (!anchorEl) return;\n    const previousPointerEvents = anchorEl.style.pointerEvents;\n    anchorEl.classList.add(\"tour-highlight-ring\");\n    // Evita cliques acidentais no elemento real enquanto o tour está aberto\n    anchorEl.style.pointerEvents = \"none\";\n    return () => {\n      anchorEl.classList.remove(\"tour-highlight-ring\");\n      anchorEl.style.pointerEvents = previousPointerEvents;\n    };\n  }, [anchorEl, highlightEnabled, step.id]);\n\n  useEffect(() => {\n    const onKey = (e: KeyboardEvent) => {\n      if (e.key === \"Escape\") {\n        finish();\n      }\n    };\n    if (!shouldShow) return;\n    window.addEventListener(\"keydown\", onKey);\n    return () => {\n      window.removeEventListener(\"keydown\", onKey);\n    };\n  }, [shouldShow]);\n\n  useEffect(() => {\n    if (!shouldShow) return;\n    if (step.anchor !== \"[data-tour='user-event']\") return;\n    const el = document.querySelector(step.anchor);\n    if (!el) return;\n    const details = el.closest(\"details\");\n    if (!details) return;\n    const hadOpen = details.hasAttribute(\"open\");\n    details.setAttribute(\"open\", \"true\");\n    return () => {\n      if (!hadOpen) details.removeAttribute(\"open\");\n    };\n  }, [shouldShow, step.anchor]);\n\n  if (!shouldShow) return null;\n\n  const cardWidth = isMobile ? viewport.width - 32 : Math.min(480, viewport.width - 32);\n  const margin = 16;\n  const estimatedHeight = isMobile ? 260 : 240;\n  let cardLeft = (viewport.width - cardWidth) / 2;\n  let cardTop = isMobile ? Math.max((viewport.height - estimatedHeight) / 2, margin) : 96;\n  let arrowPos: { x: number; y: number; side: \"top\" | \"bottom\" | \"left\" | \"right\" } | null = null;\n\n  if (!isMobile && anchorRect) {\n    const centerX = anchorRect.left + anchorRect.width / 2;\n    const preferRight = centerX < viewport.width / 2;\n\n    // Horizontal positioning: prefer ao lado do alvo, senão centra próximo\n    if (preferRight) {\n      cardLeft = Math.min(viewport.width - cardWidth - margin, anchorRect.right + margin);\n    } else {\n      cardLeft = Math.max(margin, anchorRect.left - cardWidth - margin);\n    }\n\n    // Vertical positioning: centrar relativamente ao alvo, com limites\n    cardTop = Math.max(\n      margin,\n      Math.min(viewport.height - estimatedHeight - margin, anchorRect.top + anchorRect.height / 2 - estimatedHeight / 2),\n    );\n\n    const arrowX = preferRight\n      ? Math.max(12, Math.min(cardWidth - 12, anchorRect.left - cardLeft))\n      : Math.max(12, Math.min(cardWidth - 12, anchorRect.right - cardLeft));\n    const arrowY = Math.max(12, Math.min(estimatedHeight - 12, anchorRect.top + anchorRect.height / 2 - cardTop));\n    arrowPos = { x: arrowX, y: arrowY, side: preferRight ? \"left\" : \"right\" };\n  }\n\n  const highlightPadding = 12;\n  const highlightRect =\n    highlightEnabled && anchorRect && viewport.width && viewport.height\n      ? {\n          left: Math.max(0, anchorRect.left - highlightPadding),\n          top: Math.max(0, anchorRect.top - highlightPadding),\n          width: Math.min(anchorRect.width + highlightPadding * 2, viewport.width - Math.max(0, anchorRect.left - highlightPadding)),\n          height: Math.min(\n            anchorRect.height + highlightPadding * 2,\n            viewport.height - Math.max(0, anchorRect.top - highlightPadding)\n          ),\n        }\n      : null;\n\n  const rightWidth =\n    highlightRect && viewport.width ? Math.max(0, viewport.width - (highlightRect.left + highlightRect.width)) : 0;\n  const bottomHeight =\n    highlightRect && viewport.height ? Math.max(0, viewport.height - (highlightRect.top + highlightRect.height)) : 0;\n\n  return (\n    <div className=\"fixed inset-0 z-[9999] pointer-events-auto\">\n      <div className=\"pointer-events-none absolute inset-0 bg-[radial-gradient(circle_at_30%_20%,rgba(107,255,255,0.09),rgba(0,0,0,0)),rgba(5,9,21,0.7)] backdrop-blur-[9px] backdrop-saturate-[1.4]\" />\n      {highlightRect && (\n        <div\n          className=\"pointer-events-none absolute rounded-2xl\"\n          style={{\n            left: highlightRect.left,\n            top: highlightRect.top,\n            width: highlightRect.width,\n            height: highlightRect.height,\n            boxShadow: \"0 0 0 2px rgba(107,255,255,0.75), 0 0 24px rgba(107,255,255,0.35)\",\n            background: \"radial-gradient(circle at center, rgba(107,255,255,0.08), rgba(7,11,19,0))\",\n          }}\n        />\n      )}\n      <div\n        className=\"absolute rounded-2xl border border-white/10 bg-black/80 backdrop-blur-xl p-5 shadow-[0_30px_120px_rgba(0,0,0,0.7)] pointer-events-auto\"\n        style={{\n          width: cardWidth,\n          left: cardLeft,\n          top: cardTop,\n          maxHeight: isMobile ? \"80vh\" : \"60vh\",\n          overflow: \"auto\",\n        }}\n      >\n        {!isMobile && arrowPos && (\n          <div\n            className=\"absolute h-3 w-3 rotate-45 border border-white/15 bg-black/80\"\n            style={{\n              left:\n                arrowPos.side === \"left\"\n                  ? -6\n                  : arrowPos.side === \"right\"\n                  ? cardWidth - 10\n                  : Math.min(cardWidth - 10, Math.max(10, arrowPos.x - 6)),\n              top:\n                arrowPos.side === \"top\"\n                  ? arrowPos.y\n                  : arrowPos.side === \"bottom\"\n                  ? undefined\n                  : Math.min(estimatedHeight - 10, Math.max(10, arrowPos.y - 6)),\n              bottom: arrowPos.side === \"bottom\" ? -6 : undefined,\n            }}\n          />\n        )}\n        <div className=\"flex items-start justify-between gap-2\">\n          <div className=\"space-y-1\">\n            <p className=\"text-[11px] uppercase tracking-[0.18em] text-white/55\">Tour</p>\n            <h3 className=\"text-lg font-semibold text-white\">{step.title}</h3>\n            <p className=\"text-sm text-white/80\">{step.body}</p>\n          </div>\n          <button\n            onClick={finish}\n            className=\"text-white/60 hover:text-white rounded-full p-1 transition\"\n            aria-label=\"Fechar tour\"\n          >\n            ✕\n          </button>\n        </div>\n        <div className=\"mt-4 flex items-center justify-between text-[12px] text-white/60\">\n          <span>\n            Passo {index + 1} / {steps.length}\n          </span>\n          <div className=\"flex gap-2\">\n            <button\n              onClick={finish}\n              className=\"rounded-full border border-white/20 px-3 py-1 text-white/75 hover:bg-white/10\"\n            >\n              Saltar\n            </button>\n            {isMobile ? (\n              <>\n                <button\n                  onClick={goPrev}\n                  disabled={index === 0}\n                  className=\"rounded-full border border-white/20 px-4 py-1.5 text-white/80 hover:bg-white/10 disabled:opacity-50 disabled:cursor-not-allowed\"\n                >\n                  Anterior\n                </button>\n                <button\n                  onClick={() => {\n                    if (step.ctaAction?.type === \"navigate\" && step.ctaAction.href) {\n                      router.push(step.ctaAction.href);\n                    }\n                    goNext();\n                  }}\n                  className=\"rounded-full bg-white text-black px-4 py-1.5 font-semibold hover:scale-[1.01] active:scale-95 transition\"\n                >\n                  {index === steps.length - 1 ? \"Terminar\" : \"Próximo\"}\n                </button>\n              </>\n            ) : step.ctaLabel ? (\n              <button\n                onClick={() => {\n                  if (step.ctaAction?.type === \"navigate\" && step.ctaAction.href) {\n                    router.push(step.ctaAction.href);\n                  }\n                  goNext();\n                }}\n                className=\"rounded-full bg-white text-black px-4 py-1.5 font-semibold hover:scale-[1.01] active:scale-95 transition\"\n              >\n                {step.ctaLabel}\n              </button>\n            ) : (\n              <button\n                onClick={goNext}\n                className=\"rounded-full bg-white text-black px-4 py-1.5 font-semibold hover:scale-[1.01] active:scale-95 transition\"\n              >\n                {index === steps.length - 1 ? \"Terminar\" : \"Seguinte\"}\n              </button>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}