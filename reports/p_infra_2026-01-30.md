# P1 Infra Progress — 2026-01-30

## Status
BLOCKED: Route53 CreateHostedZone permission missing; ECR PutLifecyclePolicy permission missing.

## Autodiscovery
- VPC: vpc-034a95d2f825f22dd (default)
- Subnets (public, no NAT):
  - subnet-040edfb7592af78d3 (eu-west-1a)
  - subnet-0febbb37d114cdf1d (eu-west-1b)
  - subnet-08161dd803de79bbd (eu-west-1c)
- Route53 hosted zone for orya.pt: not found

## AWS Operations (requestId/correlationId)
- route53:create-hosted-zone (FAILED: AccessDenied)
  - requestId: f2acd25c-2040-4c39-ae70-91ae689e84eb
- secretsmanager:list-secrets (orya/dev/*)
  - requestId: a92cd06a-adec-403e-b5e9-3ed5f25d2470
  - requestId: 162d0632-08a1-4622-a267-242127949dfe
  - requestId: af385080-aa2d-451c-923f-3227edffc3d4
- secretsmanager:get-secret-value (orya/dev/app)
  - requestId: 8bfe22f1-8961-4f32-bd72-c48bad785d3a
- secretsmanager:delete-secret (orya/dev/admin)
  - requestId: 1b0bdf7e-e87e-4b3a-990e-aeb4acdbe90d
- secretsmanager:create-secret (orya/dev/admin)
  - requestId: 753b3689-a648-4cd5-ac76-571991c06590
- ecr:put-lifecycle-policy (FAILED: AccessDenied)
  - requestId: c4caa682-0758-41e0-b957-6861614e85f7

## Secrets
Created/confirmed dev groups:
- orya/dev/app
- orya/dev/supabase
- orya/dev/payments
- orya/dev/apple
- orya/dev/email
- orya/dev/admin (deleted + recreated)

Created/confirmed prod groups (previous step):
- orya/prod/app
- orya/prod/supabase
- orya/prod/payments
- orya/prod/apple
- orya/prod/email
- orya/prod/admin

## Blockers
1) `route53:CreateHostedZone` denied — cannot create hosted zone for orya.pt.
2) `ecr:PutLifecyclePolicy` denied — cannot enforce lifecycle keep-last-5 (required by scripts).

## Next steps once unblocked
- Create hosted zone orya.pt, request ACM certs (eu-west-1 + us-east-1), create DNS validation records (TTL 300).
- Create S3 + CloudFront for /.well-known/ AASA & Apple Pay verification.
- Build/push images, deploy dev serverless, deploy CFN prod, run migrations + healthcheck.
