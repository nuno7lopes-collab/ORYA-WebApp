{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/nuno/orya/ORYA-WebApp/app/components/forms/InlineDateTimePicker.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\nimport { createPortal } from \"react-dom\";\n\ntype Props = {\n  label: string;\n  value: string;\n  onChange: (value: string) => void;\n  minDateTime?: Date;\n  required?: boolean;\n};\n\nfunction formatToLocalInput(date: Date) {\n  const pad = (n: number) => n.toString().padStart(2, \"0\");\n  return `${date.getFullYear()}-${pad(date.getMonth() + 1)}-${pad(date.getDate())}T${pad(date.getHours())}:${pad(date.getMinutes())}`;\n}\n\nfunction startOfDay(date: Date) {\n  const d = new Date(date);\n  d.setHours(0, 0, 0, 0);\n  return d;\n}\n\nfunction isSameDay(a: Date, b: Date) {\n  return (\n    a.getFullYear() === b.getFullYear() &&\n    a.getMonth() === b.getMonth() &&\n    a.getDate() === b.getDate()\n  );\n}\n\nfunction roundUpToQuarter(date: Date) {\n  const d = new Date(date);\n  const minutes = d.getMinutes();\n  const rounded = Math.ceil(minutes / 15) * 15;\n  d.setMinutes(rounded, 0, 0);\n  return d;\n}\n\nexport function InlineDateTimePicker({\n  label,\n  value,\n  onChange,\n  minDateTime,\n  required,\n}: Props) {\n  const parsedValue = useMemo(() => {\n    if (!value) return null;\n    const parsed = new Date(value);\n    return Number.isNaN(parsed.getTime()) ? null : parsed;\n  }, [value]);\n\n  const minDate = useMemo(() => startOfDay(minDateTime ?? new Date()), [minDateTime]);\n  const minDateTimeRounded = useMemo(\n    () => (minDateTime ? roundUpToQuarter(minDateTime) : roundUpToQuarter(new Date())),\n    [minDateTime],\n  );\n\n  const [open, setOpen] = useState(false);\n  const [viewMonth, setViewMonth] = useState<Date>(parsedValue ?? new Date());\n  const [selectedDate, setSelectedDate] = useState<Date | null>(parsedValue ?? null);\n  const [selectedTime, setSelectedTime] = useState<string>(() => {\n    if (!parsedValue) return \"\";\n    const pad = (n: number) => n.toString().padStart(2, \"0\");\n    return `${pad(parsedValue.getHours())}:${pad(parsedValue.getMinutes())}`;\n  });\n  const [mounted, setMounted] = useState(false);\n\n  useEffect(() => {\n    setMounted(true);\n  }, []);\n\n  useEffect(() => {\n    if (parsedValue) {\n      setSelectedDate(parsedValue);\n      const pad = (n: number) => n.toString().padStart(2, \"0\");\n      setSelectedTime(`${pad(parsedValue.getHours())}:${pad(parsedValue.getMinutes())}`);\n      setViewMonth(parsedValue);\n    }\n  }, [parsedValue]);\n  const days = useMemo(() => {\n    const firstOfMonth = new Date(viewMonth.getFullYear(), viewMonth.getMonth(), 1);\n    const startWeekday = firstOfMonth.getDay(); // 0-6\n    const daysInMonth = new Date(viewMonth.getFullYear(), viewMonth.getMonth() + 1, 0).getDate();\n    const list: { date: Date; disabled: boolean }[] = [];\n    for (let i = 0; i < startWeekday; i++) {\n      list.push({ date: new Date(NaN), disabled: true });\n    }\n    for (let d = 1; d <= daysInMonth; d++) {\n      const dayDate = new Date(viewMonth.getFullYear(), viewMonth.getMonth(), d);\n      const disabled = dayDate < minDate;\n      list.push({ date: dayDate, disabled });\n    }\n    return list;\n  }, [viewMonth, minDate]);\n\n  const timeOptions = useMemo(() => {\n    const options: { label: string; value: string; disabled: boolean }[] = [];\n    const baseDate = selectedDate ?? minDate;\n    for (let h = 0; h < 24; h++) {\n      for (let m = 0; m < 60; m += 15) {\n        const label = `${h.toString().padStart(2, \"0\")}:${m.toString().padStart(2, \"0\")}`;\n        const optionDate = new Date(baseDate);\n        optionDate.setHours(h, m, 0, 0);\n        let disabled = false;\n        if (minDateTimeRounded && selectedDate && isSameDay(selectedDate, minDateTimeRounded)) {\n          disabled = optionDate < minDateTimeRounded;\n        } else if (!selectedDate && minDateTimeRounded) {\n          disabled = optionDate < minDateTimeRounded;\n        }\n        options.push({ label, value: label, disabled });\n      }\n    }\n    return options;\n  }, [selectedDate, minDateTimeRounded, minDate]);\n\n  useEffect(() => {\n    if (!selectedDate || !selectedTime) return;\n    const [h, m] = selectedTime.split(\":\").map((v) => Number(v));\n    const next = new Date(selectedDate);\n    next.setHours(h || 0, m || 0, 0, 0);\n    if (minDateTimeRounded && next < minDateTimeRounded && isSameDay(next, minDateTimeRounded)) {\n      return;\n    }\n    const nextValue = formatToLocalInput(next);\n    if (nextValue === value) return;\n    onChange(nextValue);\n  }, [selectedDate, selectedTime, minDateTimeRounded, onChange, value]);\n\n  const monthLabel = viewMonth.toLocaleString(\"pt-PT\", { month: \"long\", year: \"numeric\" });\n\n  return (\n    <div className=\"space-y-1\">\n      <label className=\"block text-sm font-medium mb-1\">{label}</label>\n      <button\n        type=\"button\"\n        onClick={() => setOpen(true)}\n        className=\"flex w-full items-center justify-between rounded-md border border-white/15 bg-black/20 px-3 py-2 text-sm outline-none focus:border-[#6BFFFF] focus:ring-1 focus:ring-[#6BFFFF]/60\"\n      >\n        <span>{parsedValue ? parsedValue.toLocaleString(\"pt-PT\") : \"Escolher data e hora\"}</span>\n        <span className=\"text-[11px] text-white/60\">üìÖ</span>\n      </button>\n      {open && mounted && createPortal(\n        <div\n          className=\"fixed inset-0 z-[var(--z-modal)] flex items-center justify-center bg-black/70 px-4\"\n          onClick={() => setOpen(false)}\n        >\n          <div\n            className=\"w-full max-w-3xl rounded-2xl border border-white/15 bg-[#040712]/95 p-4 shadow-[0_20px_60px_rgba(0,0,0,0.7)] space-y-4\"\n            onClick={(e) => e.stopPropagation()}\n          >\n            <div className=\"flex items-center justify-between text-sm text-white/80\">\n              <button\n                type=\"button\"\n                onClick={() => {\n                  const prev = new Date(viewMonth);\n                  prev.setMonth(prev.getMonth() - 1);\n                  if (startOfDay(prev) < minDate) return;\n                  setViewMonth(prev);\n                }}\n                className=\"rounded-full px-2 py-1 text-xs hover:bg-white/10 disabled:opacity-40\"\n              >\n                ‚Üê\n              </button>\n              <span className=\"font-semibold capitalize\">{monthLabel}</span>\n              <button\n                type=\"button\"\n                onClick={() => {\n                  const next = new Date(viewMonth);\n                  next.setMonth(next.getMonth() + 1);\n                  setViewMonth(next);\n                }}\n                className=\"rounded-full px-2 py-1 text-xs hover:bg-white/10\"\n              >\n                ‚Üí\n              </button>\n            </div>\n            <div className=\"grid grid-cols-7 gap-1 text-[11px] text-white/60\">\n              {[\"D\", \"S\", \"T\", \"Q\", \"Q\", \"S\", \"S\"].map((d, idx) => (\n                <span key={`${d}-${idx}`} className=\"text-center py-1\">\n                  {d}\n                </span>\n              ))}\n              {days.map((d, idx) => {\n                if (Number.isNaN(d.date.getTime())) {\n                  return <span key={`blank-${idx}`} />;\n                }\n                const isSelected = selectedDate ? isSameDay(selectedDate, d.date) : false;\n                return (\n                  <button\n                    key={d.date.toISOString()}\n                    type=\"button\"\n                    disabled={d.disabled}\n                    onClick={() => {\n                      setSelectedDate(d.date);\n                    }}\n                    className={`h-9 w-9 rounded-full text-[12px] ${\n                      d.disabled\n                        ? \"text-white/25 cursor-not-allowed\"\n                        : isSelected\n                          ? \"bg-gradient-to-r from-[#FF00C8] via-[#6BFFFF] to-[#1646F5] text-black font-semibold shadow-[0_0_14px_rgba(107,255,255,0.6)]\"\n                          : \"text-white/80 hover:bg-white/10\"\n                    }`}\n                  >\n                    {d.date.getDate()}\n                  </button>\n                );\n              })}\n            </div>\n\n            <div className=\"space-y-2\">\n              <p className=\"text-[11px] text-white/60\">Hora (15 em 15 min)</p>\n              <div className=\"grid grid-cols-4 gap-2 max-h-40 overflow-y-auto pr-1\">\n                {timeOptions.map((opt) => (\n                  <button\n                    key={opt.value}\n                    type=\"button\"\n                    disabled={opt.disabled}\n                    onClick={() => setSelectedTime(opt.value)}\n                    className={`rounded-lg px-2 py-1 text-xs ${\n                      opt.disabled\n                        ? \"text-white/30 cursor-not-allowed\"\n                        : selectedTime === opt.value\n                          ? \"bg-gradient-to-r from-[#FF00C8] via-[#6BFFFF] to-[#1646F5] text-black font-semibold shadow-[0_0_12px_rgba(107,255,255,0.5)]\"\n                          : \"bg-white/5 text-white/80 hover:bg-white/10\"\n                    }`}\n                  >\n                    {opt.label}\n                  </button>\n                ))}\n              </div>\n            </div>\n            <div className=\"flex justify-end\">\n              <button\n                type=\"button\"\n                onClick={() => setOpen(false)}\n                className=\"rounded-full border border-white/20 px-4 py-2 text-[12px] text-white hover:bg-white/10\"\n              >\n                Confirmar\n              </button>\n            </div>\n          </div>\n        </div>,\n        document.body,\n      )}\n      {required && !value && <p className=\"text-xs text-red-400\">Obrigat√≥rio</p>}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 363, "column": 0}, "map": {"version":3,"sources":["file:///Users/nuno/orya/ORYA-WebApp/app/components/flows/FlowStickyFooter.tsx"],"sourcesContent":["\"use client\";\n\nimport { CTA_PRIMARY, CTA_SECONDARY } from \"@/app/organizador/dashboardUi\";\n\ntype FlowStickyFooterProps = {\n  backLabel?: string;\n  nextLabel: string;\n  helper?: string;\n  disabledReason?: string | null;\n  loading?: boolean;\n  loadingLabel?: string;\n  showLoadingHint?: boolean;\n  disableBack?: boolean;\n  disableNext?: boolean;\n  onBack?: () => void;\n  onNext?: () => void;\n};\n\nexport function FlowStickyFooter({\n  backLabel = \"Voltar\",\n  nextLabel,\n  helper,\n  disabledReason,\n  loading,\n  loadingLabel,\n  showLoadingHint,\n  disableBack,\n  disableNext,\n  onBack,\n  onNext,\n}: FlowStickyFooterProps) {\n  const nextIsDisabled = disableNext || Boolean(disabledReason);\n  return (\n    <div className=\"sticky bottom-0 left-0 right-0 z-[var(--z-footer)] pt-4\">\n      <div className=\"relative overflow-hidden border-t border-white/10 bg-black/30 px-4 py-3 md:px-5 md:py-4 backdrop-blur-xl shadow-[0_-18px_45px_rgba(0,0,0,0.45)]\">\n        {loading && showLoadingHint && (\n          <div className=\"absolute left-0 right-0 top-0 h-[3px] overflow-hidden\">\n            <div className=\"h-full w-full animate-pulse bg-gradient-to-r from-[#FF00C8] via-[#6BFFFF] to-[#1646F5]\" />\n          </div>\n        )}\n        <div className=\"relative flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between\">\n          <div className=\"text-[12px] text-white/70 leading-snug\">\n            {helper ? <p>{helper}</p> : <p>Guarda e rev√™ no final. Navega sem perder contexto.</p>}\n            {disabledReason && <p className=\"text-white/55\">{disabledReason}</p>}\n          </div>\n          <div className=\"flex flex-wrap gap-2\">\n            <button\n              type=\"button\"\n              onClick={onBack}\n              disabled={disableBack}\n              className={`${CTA_SECONDARY} disabled:opacity-55`}\n            >\n              {backLabel}\n            </button>\n            <button\n              type=\"button\"\n              onClick={onNext}\n              disabled={nextIsDisabled || loading}\n              className={`${CTA_PRIMARY} px-6 text-sm font-semibold shadow-none disabled:opacity-60`}\n              title={disabledReason ?? \"\"}\n            >\n              {loading ? loadingLabel || \"A processar...\" : nextLabel}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAkBO,SAAS,iBAAiB,EAC/B,YAAY,QAAQ,EACpB,SAAS,EACT,MAAM,EACN,cAAc,EACd,OAAO,EACP,YAAY,EACZ,eAAe,EACf,WAAW,EACX,WAAW,EACX,MAAM,EACN,MAAM,EACgB;IACtB,MAAM,iBAAiB,eAAe,QAAQ;IAC9C,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;gBACZ,WAAW,iCACV,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBAAI,WAAU;;;;;;;;;;;8BAGnB,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;;gCACZ,uBAAS,8OAAC;8CAAG;;;;;yDAAc,8OAAC;8CAAE;;;;;;gCAC9B,gCAAkB,8OAAC;oCAAE,WAAU;8CAAiB;;;;;;;;;;;;sCAEnD,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCACC,MAAK;oCACL,SAAS;oCACT,UAAU;oCACV,WAAW,GAAG,kJAAa,CAAC,oBAAoB,CAAC;8CAEhD;;;;;;8CAEH,8OAAC;oCACC,MAAK;oCACL,SAAS;oCACT,UAAU,kBAAkB;oCAC5B,WAAW,GAAG,gJAAW,CAAC,2DAA2D,CAAC;oCACtF,OAAO,kBAAkB;8CAExB,UAAU,gBAAgB,mBAAmB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAO5D"}},
    {"offset": {"line": 480, "column": 0}, "map": {"version":3,"sources":["file:///Users/nuno/orya/ORYA-WebApp/components/organizador/eventos/wizard/StepperDots.tsx"],"sourcesContent":["\"use client\";\n\nimport React from \"react\";\n\ntype StepId = \"formato\" | \"essenciais\" | \"datas_local\" | \"bilhetes\" | \"revisao\";\n\nexport type WizardStep = { id: StepId; title: string };\n\nfunction CheckIcon(props: React.SVGProps<SVGSVGElement>) {\n  return (\n    <svg viewBox=\"0 0 24 24\" fill=\"none\" {...props}>\n      <path\n        d=\"M20 6L9 17l-5-5\"\n        stroke=\"currentColor\"\n        strokeWidth=\"2.2\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      />\n    </svg>\n  );\n}\n\nexport function StepperDots({\n  steps,\n  current,\n  maxUnlockedIndex,\n  onGoTo,\n}: {\n  steps: WizardStep[];\n  current: StepId;\n  maxUnlockedIndex: number;\n  onGoTo?: (id: StepId) => void;\n}) {\n  const currentIndex = Math.max(\n    0,\n    steps.findIndex((s) => s.id === current),\n  );\n  const progress =\n    steps.length > 1 ? Math.min(100, Math.max(0, (currentIndex / (steps.length - 1)) * 100)) : 0;\n  const dotSize = 36; // px\n  const lineTop = dotSize / 2; // center of the dot\n\n  return (\n    <div className=\"w-full\">\n      <div className=\"relative py-3\">\n        <div\n          className=\"absolute left-0 right-0 h-px bg-white/10\"\n          style={{ top: lineTop }}\n          aria-hidden\n        />\n        <div\n          className=\"absolute left-0 h-px bg-gradient-to-r from-[var(--orya-blue)] via-[var(--orya-cyan)] to-[var(--orya-pink)]\"\n          style={{ width: `${progress}%`, top: lineTop }}\n          aria-hidden\n        />\n\n        <ol className=\"relative flex items-start justify-between gap-4 px-1\">\n          {steps.map((s, i) => {\n            const clickable = i <= maxUnlockedIndex;\n            const status = i < currentIndex ? \"done\" : i === currentIndex ? \"current\" : \"todo\";\n            const isLockedFuture = i > maxUnlockedIndex;\n            const isUnlockedFuture = i > currentIndex && !isLockedFuture;\n            return (\n              <li\n                key={s.id}\n                className=\"group min-w-0 flex flex-1 flex-col items-center text-center\"\n              >\n                <button\n                  type=\"button\"\n                  onClick={() => clickable && onGoTo?.(s.id)}\n                  disabled={!clickable}\n                  className={[\n                    \"relative grid place-items-center rounded-full outline-none\",\n                    \"transition-all duration-250 ease-[cubic-bezier(0.2,0.8,0.2,1)] transform\",\n                    clickable ? \"cursor-pointer focus-visible:ring-2 focus-visible:ring-[var(--orya-cyan)]/60 focus-visible:ring-offset-2 focus-visible:ring-offset-transparent\" : \"cursor-not-allowed\",\n                    status === \"done\" &&\n                      \"bg-emerald-400/10 border border-emerald-300/25 backdrop-blur-md shadow-[0_0_0_1px_rgba(16,185,129,.12),0_0_18px_rgba(16,185,129,.14)]\",\n                    status === \"current\" &&\n                      \"bg-white/8 border border-white/25 backdrop-blur-md shadow-[0_0_0_1px_rgba(255,255,255,.10),0_0_26px_rgba(255,255,255,.16)] scale-100\",\n                    status === \"todo\" &&\n                      (isLockedFuture\n                        ? \"bg-white/4 border border-white/10 opacity-35\"\n                        : \"bg-white/5 border border-white/14 opacity-70 hover:opacity-90\"),\n                    clickable && \"hover:border-white/20 hover:shadow-[0_0_18px_rgba(255,255,255,0.1)]\",\n                    status !== \"current\" && \"scale-[0.98]\",\n                  ].join(\" \")}\n                  aria-current={status === \"current\" ? \"step\" : undefined}\n                  title={clickable ? \"Editar este passo\" : undefined}\n                  style={{ width: dotSize, height: dotSize }}\n                >\n                  <span\n                    className={[\n                      \"text-xs font-semibold\",\n                      status === \"done\" ? \"text-emerald-200\" : status === \"current\" ? \"text-white/90\" : \"text-white/80\",\n                    ].join(\" \")}\n                  >\n                    {i + 1}\n                  </span>\n                </button>\n\n                <span\n                  className={[\n                    \"mt-2 text-[11px] font-semibold tracking-[0.18em] uppercase leading-tight transition-colors\",\n                    status === \"done\"\n                      ? \"text-emerald-200/80\"\n                      : status === \"current\"\n                        ? \"text-white\"\n                        : isUnlockedFuture\n                          ? \"text-white/65 group-hover:text-white/85\"\n                          : \"text-white/40\",\n                  ].join(\" \")}\n                >\n                  {s.title}\n                </span>\n              </li>\n            );\n          })}\n        </ol>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;;AAQA,SAAS,UAAU,KAAoC;IACrD,qBACE,8OAAC;QAAI,SAAQ;QAAY,MAAK;QAAQ,GAAG,KAAK;kBAC5C,cAAA,8OAAC;YACC,GAAE;YACF,QAAO;YACP,aAAY;YACZ,eAAc;YACd,gBAAe;;;;;;;;;;;AAIvB;AAEO,SAAS,YAAY,EAC1B,KAAK,EACL,OAAO,EACP,gBAAgB,EAChB,MAAM,EAMP;IACC,MAAM,eAAe,KAAK,GAAG,CAC3B,GACA,MAAM,SAAS,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;IAElC,MAAM,WACJ,MAAM,MAAM,GAAG,IAAI,KAAK,GAAG,CAAC,KAAK,KAAK,GAAG,CAAC,GAAG,AAAC,eAAe,CAAC,MAAM,MAAM,GAAG,CAAC,IAAK,QAAQ;IAC7F,MAAM,UAAU,IAAI,KAAK;IACzB,MAAM,UAAU,UAAU,GAAG,oBAAoB;IAEjD,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBACC,WAAU;oBACV,OAAO;wBAAE,KAAK;oBAAQ;oBACtB,aAAW;;;;;;8BAEb,8OAAC;oBACC,WAAU;oBACV,OAAO;wBAAE,OAAO,GAAG,SAAS,CAAC,CAAC;wBAAE,KAAK;oBAAQ;oBAC7C,aAAW;;;;;;8BAGb,8OAAC;oBAAG,WAAU;8BACX,MAAM,GAAG,CAAC,CAAC,GAAG;wBACb,MAAM,YAAY,KAAK;wBACvB,MAAM,SAAS,IAAI,eAAe,SAAS,MAAM,eAAe,YAAY;wBAC5E,MAAM,iBAAiB,IAAI;wBAC3B,MAAM,mBAAmB,IAAI,gBAAgB,CAAC;wBAC9C,qBACE,8OAAC;4BAEC,WAAU;;8CAEV,8OAAC;oCACC,MAAK;oCACL,SAAS,IAAM,aAAa,SAAS,EAAE,EAAE;oCACzC,UAAU,CAAC;oCACX,WAAW;wCACT;wCACA;wCACA,YAAY,mJAAmJ;wCAC/J,WAAW,UACT;wCACF,WAAW,aACT;wCACF,WAAW,UACT,CAAC,iBACG,iDACA,+DAA+D;wCACrE,aAAa;wCACb,WAAW,aAAa;qCACzB,CAAC,IAAI,CAAC;oCACP,gBAAc,WAAW,YAAY,SAAS;oCAC9C,OAAO,YAAY,sBAAsB;oCACzC,OAAO;wCAAE,OAAO;wCAAS,QAAQ;oCAAQ;8CAEzC,cAAA,8OAAC;wCACC,WAAW;4CACT;4CACA,WAAW,SAAS,qBAAqB,WAAW,YAAY,kBAAkB;yCACnF,CAAC,IAAI,CAAC;kDAEN,IAAI;;;;;;;;;;;8CAIT,8OAAC;oCACC,WAAW;wCACT;wCACA,WAAW,SACP,wBACA,WAAW,YACT,eACA,mBACE,4CACA;qCACT,CAAC,IAAI,CAAC;8CAEN,EAAE,KAAK;;;;;;;2BAhDL,EAAE,EAAE;;;;;oBAoDf;;;;;;;;;;;;;;;;;AAKV"}},
    {"offset": {"line": 627, "column": 0}, "map": {"version":3,"sources":["file:///Users/nuno/orya/ORYA-WebApp/lib/constants/ptCities.ts"],"sourcesContent":["export const PT_CITIES = [\n  \"Porto\",\n  \"Lisboa\",\n  \"Braga\",\n  \"Coimbra\",\n  \"Aveiro\",\n  \"Faro\",\n  \"Set√∫bal\",\n  \"Leiria\",\n  \"Viseu\",\n  \"Guimar√£es\",\n  \"Matosinhos\",\n  \"Vila Nova de Gaia\",\n  \"Maia\",\n  \"P√≥voa de Varzim\",\n  \"Funchal\",\n  \"√âvora\",\n  \"Cascais\",\n  \"Sintra\",\n  \"Amadora\",\n  \"Almada\",\n] as const;\n\nexport type PTCity = (typeof PT_CITIES)[number];\n"],"names":[],"mappings":";;;;AAAO,MAAM,YAAY;IACvB;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD"}},
    {"offset": {"line": 657, "column": 0}, "map": {"version":3,"sources":["file:///Users/nuno/orya/ORYA-WebApp/lib/fees.ts"],"sourcesContent":["import { FeeMode } from \"@prisma/client\";\n\ntype FeeModeInput = FeeMode;\n\ntype ComputeCombinedFeesParams = {\n  amountCents: number;\n  discountCents: number;\n  feeMode: FeeModeInput;\n  platformFeeBps: number;\n  platformFeeFixedCents: number;\n  stripeFeeBps: number;\n  stripeFeeFixedCents: number;\n};\n\nexport type CombinedFeesResult = {\n  subtotalCents: number;\n  feeMode: FeeMode;\n  oryaFeeCents: number;\n  stripeFeeCentsEstimate: number;\n  combinedFeeCents: number;\n  totalCents: number;\n};\n\n/**\n * Calcula taxa ORYA + estimativa Stripe para apresentar como \"taxa da plataforma\".\n * - Quando feeMode = ADDED, ajusta o total para que o organizador receba aprox. o subtotal depois de ORYA + Stripe.\n * - Quando feeMode = INCLUDED, as taxas s√£o deduzidas do pre√ßo base.\n */\nexport function computeCombinedFees(params: ComputeCombinedFeesParams): CombinedFeesResult {\n  const {\n    amountCents,\n    discountCents,\n    feeMode: rawFeeMode,\n    platformFeeBps,\n    platformFeeFixedCents,\n    stripeFeeBps,\n    stripeFeeFixedCents,\n  } = params;\n\n  const netSubtotal = Math.max(0, Math.round(amountCents) - Math.max(0, Math.round(discountCents)));\n  const feeMode = rawFeeMode === FeeMode.ON_TOP ? FeeMode.ADDED : (rawFeeMode as FeeMode);\n\n  const oryaFeeCents =\n    netSubtotal === 0\n      ? 0\n      : Math.max(0, Math.round((netSubtotal * Math.max(0, platformFeeBps)) / 10_000) + Math.max(0, platformFeeFixedCents));\n\n  const stripeRate = Math.max(0, stripeFeeBps) / 10_000;\n  const stripeFixed = Math.max(0, stripeFeeFixedCents);\n\n  if (netSubtotal === 0) {\n    return {\n      subtotalCents: netSubtotal,\n      feeMode,\n      oryaFeeCents,\n      stripeFeeCentsEstimate: 0,\n      combinedFeeCents: 0,\n      totalCents: 0,\n    };\n  }\n\n  if (feeMode === FeeMode.INCLUDED) {\n    const totalCents = netSubtotal;\n    const stripeFeeCentsEstimate = Math.max(0, Math.round(totalCents * stripeRate) + stripeFixed);\n    const combinedFeeCents = Math.max(0, oryaFeeCents + stripeFeeCentsEstimate);\n    return {\n      subtotalCents: netSubtotal,\n      feeMode,\n      oryaFeeCents,\n      stripeFeeCentsEstimate,\n      combinedFeeCents,\n      totalCents,\n    };\n  }\n\n  // ADDED: resolver total para que (total - orya - stripe(total)) ~= subtotal.\n  const denom = 1 - stripeRate;\n  const totalRaw = denom > 0 ? (netSubtotal + oryaFeeCents + stripeFixed) / denom : netSubtotal + oryaFeeCents + stripeFixed;\n  const totalCents = Math.max(0, Math.round(totalRaw));\n  const stripeFeeCentsEstimate = Math.max(0, Math.round(totalCents * stripeRate) + stripeFixed);\n  const combinedFeeCents = Math.max(0, oryaFeeCents + stripeFeeCentsEstimate);\n\n  return {\n    subtotalCents: netSubtotal,\n    feeMode,\n    oryaFeeCents,\n    stripeFeeCentsEstimate,\n    combinedFeeCents,\n    totalCents,\n  };\n}\n"],"names":[],"mappings":";;;;;;;;;;AA4BO,SAAS,oBAAoB,MAAiC;IACnE,MAAM,EACJ,WAAW,EACX,aAAa,EACb,SAAS,UAAU,EACnB,cAAc,EACd,qBAAqB,EACrB,YAAY,EACZ,mBAAmB,EACpB,GAAG;IAEJ,MAAM,cAAc,KAAK,GAAG,CAAC,GAAG,KAAK,KAAK,CAAC,eAAe,KAAK,GAAG,CAAC,GAAG,KAAK,KAAK,CAAC;IACjF,MAAM,UAAU,eAAe,QAAQ,MAAM,GAAG,QAAQ,KAAK,GAAI;IAEjE,MAAM,eACJ,gBAAgB,IACZ,IACA,KAAK,GAAG,CAAC,GAAG,KAAK,KAAK,CAAC,AAAC,cAAc,KAAK,GAAG,CAAC,GAAG,kBAAmB,UAAU,KAAK,GAAG,CAAC,GAAG;IAEjG,MAAM,aAAa,KAAK,GAAG,CAAC,GAAG,gBAAgB;IAC/C,MAAM,cAAc,KAAK,GAAG,CAAC,GAAG;IAEhC,IAAI,gBAAgB,GAAG;QACrB,OAAO;YACL,eAAe;YACf;YACA;YACA,wBAAwB;YACxB,kBAAkB;YAClB,YAAY;QACd;IACF;IAEA,IAAI,YAAY,QAAQ,QAAQ,EAAE;QAChC,MAAM,aAAa;QACnB,MAAM,yBAAyB,KAAK,GAAG,CAAC,GAAG,KAAK,KAAK,CAAC,aAAa,cAAc;QACjF,MAAM,mBAAmB,KAAK,GAAG,CAAC,GAAG,eAAe;QACpD,OAAO;YACL,eAAe;YACf;YACA;YACA;YACA;YACA;QACF;IACF;IAEA,6EAA6E;IAC7E,MAAM,QAAQ,IAAI;IAClB,MAAM,WAAW,QAAQ,IAAI,CAAC,cAAc,eAAe,WAAW,IAAI,QAAQ,cAAc,eAAe;IAC/G,MAAM,aAAa,KAAK,GAAG,CAAC,GAAG,KAAK,KAAK,CAAC;IAC1C,MAAM,yBAAyB,KAAK,GAAG,CAAC,GAAG,KAAK,KAAK,CAAC,aAAa,cAAc;IACjF,MAAM,mBAAmB,KAAK,GAAG,CAAC,GAAG,eAAe;IAEpD,OAAO;QACL,eAAe;QACf;QACA;QACA;QACA;QACA;IACF;AACF"}},
    {"offset": {"line": 716, "column": 0}, "map": {"version":3,"sources":["file:///Users/nuno/orya/ORYA-WebApp/app/organizador/eventos/novo/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\nimport { useRouter, useSearchParams } from \"next/navigation\";\nimport Link from \"next/link\";\nimport useSWR from \"swr\";\nimport { InlineDateTimePicker } from \"@/app/components/forms/InlineDateTimePicker\";\nimport { FlowStickyFooter } from \"@/app/components/flows/FlowStickyFooter\";\nimport { useUser } from \"@/app/hooks/useUser\";\nimport { useAuthModal } from \"@/app/components/autentica√ß√£o/AuthModalContext\";\nimport { CTA_PRIMARY, CTA_SECONDARY } from \"@/app/organizador/dashboardUi\";\nimport { StepperDots, type WizardStep } from \"@/components/organizador/eventos/wizard/StepperDots\";\nimport { PT_CITIES, type PTCity } from \"@/lib/constants/ptCities\";\nimport { computeCombinedFees } from \"@/lib/fees\";\n\ntype TicketTypeRow = {\n  name: string;\n  price: string;\n  totalQuantity: string;\n  publicAccess?: boolean;\n  participantAccess?: boolean;\n};\n\ntype ToastTone = \"success\" | \"error\";\ntype Toast = { id: number; message: string; tone: ToastTone };\n\ntype PublicAccessMode = \"OPEN\" | \"TICKET\" | \"INVITE\";\ntype ParticipantAccessMode = \"NONE\" | \"TICKET\" | \"INSCRIPTION\" | \"INVITE\";\ntype TicketScope = \"ALL\" | \"SPECIFIC\";\ntype LiveHubVisibility = \"PUBLIC\" | \"PRIVATE\" | \"DISABLED\";\ntype OrgCategory = \"EVENTOS\" | \"PADEL\" | \"VOLUNTARIADO\";\n\nconst DRAFT_KEY = \"orya-organizer-new-event-draft\";\n\nconst normalizeOrganizationCategory = (category?: string | null): OrgCategory => {\n  const normalized = category?.toUpperCase() ?? \"\";\n  if (normalized === \"PADEL\") return \"PADEL\";\n  if (normalized === \"VOLUNTARIADO\") return \"VOLUNTARIADO\";\n  return \"EVENTOS\";\n};\n\nconst CATEGORY_OPTIONS = [\n  {\n    key: \"padel\",\n    value: \"PADEL\",\n    label: \"Padel / Torneio\",\n    accent: \"from-[#6BFFFF] to-[#22c55e]\",\n    copy: \"Setup r√°pido com courts, rankings e l√≥gica de torneio.\",\n    categories: [\"PADEL\"],\n  },\n  {\n    key: \"voluntariado\",\n    value: \"VOLUNTEERING\",\n    label: \"Voluntariado\",\n    accent: \"from-[#FCD34D] to-[#34D399]\",\n    copy: \"A√ß√µes, impacto e participa√ß√£o com um fluxo simples.\",\n    categories: [\"VOLUNTARIADO\"],\n  },\n  {\n    key: \"default\",\n    value: \"DEFAULT\",\n    label: \"Evento\",\n    accent: \"from-[#FF00C8] via-[#6BFFFF] to-[#1646F5]\",\n    copy: \"Fluxo base com tudo o que precisas para publicar.\",\n    categories: [\"OUTRO\"],\n  },\n] as const;\n\nconst DEFAULT_PLATFORM_FEE_BPS = 800; // 8%\nconst DEFAULT_PLATFORM_FEE_FIXED_CENTS = 30; // ‚Ç¨0.30\nconst DEFAULT_STRIPE_FEE_BPS = 140; // 1.4%\nconst DEFAULT_STRIPE_FEE_FIXED_CENTS = 25; // ‚Ç¨0.25\n\ntype PlatformFeeResponse =\n  | {\n      ok: true;\n      orya: { feeBps: number; feeFixedCents: number };\n      stripe: { feeBps: number; feeFixedCents: number; region: string };\n    }\n  | { ok: false; error?: string };\n\nconst fetcher = (url: string) => fetch(url).then((res) => res.json());\n\ntype StepKey = \"preset\" | \"details\" | \"schedule\" | \"tickets\" | \"review\";\ntype FieldKey =\n  | \"preset\"\n  | \"title\"\n  | \"description\"\n  | \"startsAt\"\n  | \"endsAt\"\n  | \"locationName\"\n  | \"locationCity\"\n  | \"address\"\n  | \"tickets\";\n\ntype RecentVenuesResponse = {\n  ok: boolean;\n  items?: Array<{ name: string; city?: string | null }>;\n};\n\ntype PadelClubSummary = {\n  id: number;\n  name: string;\n  city?: string | null;\n  address?: string | null;\n  isActive: boolean;\n  courtsCount?: number | null;\n};\ntype PadelCourtSummary = { id: number; name: string; isActive: boolean; displayOrder: number };\ntype PadelStaffSummary = { id: number; fullName?: string | null; email?: string | null; inheritToEvents?: boolean | null };\n\nfunction computeFeePreview(\n  priceEuro: number,\n  mode: \"ADDED\" | \"INCLUDED\" | \"ON_TOP\",\n  platformFees: { feeBps: number; feeFixedCents: number },\n  stripeFees: { feeBps: number; feeFixedCents: number },\n) {\n  const baseCents = Math.round(Math.max(0, priceEuro) * 100);\n  const combined = computeCombinedFees({\n    amountCents: baseCents,\n    discountCents: 0,\n    feeMode: mode,\n    platformFeeBps: platformFees.feeBps,\n    platformFeeFixedCents: platformFees.feeFixedCents,\n    stripeFeeBps: stripeFees.feeBps,\n    stripeFeeFixedCents: stripeFees.feeFixedCents,\n  });\n  const recebeOrganizador = Math.max(0, combined.totalCents - combined.oryaFeeCents - combined.stripeFeeCentsEstimate);\n  return {\n    baseCents,\n    feeCents: combined.oryaFeeCents,\n    totalCliente: combined.totalCents,\n    recebeOrganizador,\n    stripeFeeCents: combined.stripeFeeCentsEstimate,\n    combinedFeeCents: combined.combinedFeeCents,\n  };\n}\n\nexport default function NewOrganizerEventPage() {\n  const router = useRouter();\n  const searchParams = useSearchParams();\n  const { user, profile, isLoading: isUserLoading } = useUser();\n  const { openModal } = useAuthModal();\n  const { data: platformFeeData } = useSWR<PlatformFeeResponse>(\"/api/platform/fees\", fetcher, {\n    revalidateOnFocus: false,\n  });\n  const { data: organizerStatus } = useSWR<{\n    ok?: boolean;\n    organizer?: {\n      id?: number | null;\n      status?: string | null;\n      officialEmail?: string | null;\n      officialEmailVerifiedAt?: string | null;\n      organizationCategory?: string | null;\n    } | null;\n    membershipRole?: string | null;\n    paymentsStatus?: string;\n    profileStatus?: string;\n  }>(\n    user ? \"/api/organizador/me\" : null,\n    fetcher,\n    { revalidateOnFocus: false }\n  );\n  const [title, setTitle] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [startsAt, setStartsAt] = useState(\"\");\n  const [endsAt, setEndsAt] = useState(\"\");\n  const [locationName, setLocationName] = useState(\"\");\n  const [locationCity, setLocationCity] = useState<PTCity>(PT_CITIES[0]);\n  const [locationManuallySet, setLocationManuallySet] = useState(false);\n  const [address, setAddress] = useState(\"\");\n  const [ticketTypes, setTicketTypes] = useState<TicketTypeRow[]>([{ name: \"Geral\", price: \"\", totalQuantity: \"\" }]);\n  const [feeMode, setFeeMode] = useState<\"ADDED\" | \"INCLUDED\">(\"ADDED\");\n  const [coverUrl, setCoverUrl] = useState<string | null>(null);\n  const [uploadingCover, setUploadingCover] = useState(false);\n  const [isTest, setIsTest] = useState(false);\n  const [selectedPreset, setSelectedPreset] = useState<string | null>(null);\n  const orgCategoryValue = organizerStatus?.organizer?.organizationCategory ?? null;\n  const orgCategory = normalizeOrganizationCategory(orgCategoryValue);\n  const isPadelOrg = orgCategory === \"PADEL\";\n  const isPadelPreset = selectedPreset === \"padel\";\n  const isPadelContext = isPadelOrg || isPadelPreset;\n  const resolvedPreset = selectedPreset ?? (isPadelOrg ? \"padel\" : null);\n  const eventLabel = isPadelContext ? \"torneio de padel\" : \"evento\";\n  const eventLabelPlural = isPadelContext ? \"torneios de padel\" : \"eventos\";\n  const ticketLabel = isPadelContext ? \"inscri√ß√£o\" : \"bilhete\";\n  const ticketLabelPlural = isPadelContext ? \"inscri√ß√µes\" : \"bilhetes\";\n  const ticketLabelTitle = isPadelContext ? \"Inscri√ß√£o\" : \"Bilhete\";\n  const ticketLabelPluralTitle = isPadelContext ? \"Inscri√ß√µes\" : \"Bilhetes\";\n  const ticketLabelIndefinite = isPadelContext ? \"uma inscri√ß√£o\" : \"um bilhete\";\n  const ticketLabelPluralAll = isPadelContext ? \"Todas as inscri√ß√µes\" : \"Todos os bilhetes\";\n  const [isFreeEvent, setIsFreeEvent] = useState(false);\n  const [advancedAccessEnabled, setAdvancedAccessEnabled] = useState(false);\n  const [publicAccessMode, setPublicAccessMode] = useState<PublicAccessMode>(\"OPEN\");\n  const [participantAccessMode, setParticipantAccessMode] = useState<ParticipantAccessMode>(\"NONE\");\n  const [publicTicketScope, setPublicTicketScope] = useState<TicketScope>(\"ALL\");\n  const [participantTicketScope, setParticipantTicketScope] = useState<TicketScope>(\"ALL\");\n  const [liveHubVisibility, setLiveHubVisibility] = useState<LiveHubVisibility>(\"PUBLIC\");\n  const [freeTicketName, setFreeTicketName] = useState(\"Inscri√ß√£o\");\n  const [freeCapacity, setFreeCapacity] = useState(\"\");\n  const [currentStep, setCurrentStep] = useState(0);\n  const [maxStepReached, setMaxStepReached] = useState(0);\n  const [selectedPadelClubId, setSelectedPadelClubId] = useState<number | null>(null);\n  const [selectedPadelCourtIds, setSelectedPadelCourtIds] = useState<number[]>([]);\n  const [selectedPadelStaffIds, setSelectedPadelStaffIds] = useState<number[]>([]);\n\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [showLoadingHint, setShowLoadingHint] = useState(false);\n  const [errorMessage, setErrorMessage] = useState<string | null>(null);\n  const [stripeAlert, setStripeAlert] = useState<string | null>(null);\n  const [validationAlert, setValidationAlert] = useState<string | null>(null);\n  const [backendAlert, setBackendAlert] = useState<string | null>(null);\n  const [draftLoaded, setDraftLoaded] = useState(false);\n  const [draftSavedAt, setDraftSavedAt] = useState<number | null>(null);\n  const [toasts, setToasts] = useState<Toast[]>([]);\n  const [fieldErrors, setFieldErrors] = useState<Partial<Record<FieldKey, string>>>({});\n  const [errorSummary, setErrorSummary] = useState<{ field: FieldKey; message: string }[]>([]);\n  const [showLocationSuggestions, setShowLocationSuggestions] = useState(false);\n  const [pendingFocusField, setPendingFocusField] = useState<FieldKey | null>(null);\n  const [creationSuccess, setCreationSuccess] = useState<{ eventId?: number; slug?: string } | null>(null);\n  const prevStepIndexRef = useRef(0);\n\n  const ctaAlertRef = useRef<HTMLDivElement | null>(null);\n  const errorSummaryRef = useRef<HTMLDivElement | null>(null);\n  const titleRef = useRef<HTMLInputElement | null>(null);\n  const startsRef = useRef<HTMLDivElement | null>(null);\n  const endsRef = useRef<HTMLDivElement | null>(null);\n  const locationNameRef = useRef<HTMLInputElement | null>(null);\n  const cityRef = useRef<HTMLInputElement | null>(null);\n  const ticketsRef = useRef<HTMLDivElement | null>(null);\n  const suggestionBlurTimeout = useRef<NodeJS.Timeout | null>(null);\n\n  const roles = Array.isArray(profile?.roles) ? (profile?.roles as string[]) : [];\n  const isOrganizer =\n    roles.includes(\"organizer\") ||\n    Boolean(organizerStatus?.organizer?.id) ||\n    Boolean(organizerStatus?.membershipRole);\n  const isAdmin = roles.some((r) => r?.toLowerCase() === \"admin\");\n  const paymentsStatus = isAdmin ? \"READY\" : organizerStatus?.paymentsStatus ?? \"NO_STRIPE\";\n  const platformFees =\n    platformFeeData && platformFeeData.ok\n      ? platformFeeData.orya\n      : { feeBps: DEFAULT_PLATFORM_FEE_BPS, feeFixedCents: DEFAULT_PLATFORM_FEE_FIXED_CENTS };\n  const stripeFees =\n    platformFeeData && platformFeeData.ok\n      ? platformFeeData.stripe\n      : { feeBps: DEFAULT_STRIPE_FEE_BPS, feeFixedCents: DEFAULT_STRIPE_FEE_FIXED_CENTS, region: \"UE\" };\n  const hasPaidTicket = useMemo(\n    () => !isFreeEvent && ticketTypes.some((t) => Number(t.price.replace(\",\", \".\")) > 0),\n    [isFreeEvent, ticketTypes],\n  );\n  const publicAccessLabel =\n    publicAccessMode === \"OPEN\" ? \"Aberto\" : publicAccessMode === \"TICKET\" ? `Por ${ticketLabel}` : \"Por convite\";\n  const participantAccessLabel =\n    participantAccessMode === \"NONE\"\n      ? \"Sem participantes\"\n      : participantAccessMode === \"TICKET\"\n        ? `Por ${ticketLabel}`\n        : participantAccessMode === \"INSCRIPTION\"\n        ? \"Por inscri√ß√£o\"\n        : \"Por convite\";\n  const publicAccessDescription =\n    publicAccessMode === \"OPEN\"\n      ? isPadelContext\n        ? `Qualquer pessoa pode ver o ${eventLabel} e inscrever-se.`\n        : `Qualquer pessoa pode ver o ${eventLabel} e comprar ${ticketLabel}.`\n      : publicAccessMode === \"TICKET\"\n        ? isPadelContext\n          ? \"Qualquer inscri√ß√£o criada d√° acesso ao p√∫blico (podes refinar depois).\"\n          : \"Qualquer bilhete criado d√° acesso ao p√∫blico (podes refinar depois).\"\n        : \"Apenas convidados conseguem aceder ao checkout e ao LiveHub.\";\n  const participantAccessDescription =\n    participantAccessMode === \"NONE\"\n      ? \"N√£o existe distin√ß√£o de participantes.\"\n      : participantAccessMode === \"INSCRIPTION\"\n        ? `Participantes s√£o definidos por inscri√ß√£o do ${eventLabel}.`\n        : participantAccessMode === \"TICKET\"\n          ? isPadelContext\n            ? \"Qualquer inscri√ß√£o criada marca o utilizador como participante.\"\n            : \"Qualquer bilhete criado marca o utilizador como participante.\"\n          : \"Participantes s√£o escolhidos por convite.\";\n  const organizerOfficialEmail =\n    (organizerStatus?.organizer as { officialEmail?: string | null } | null)?.officialEmail ?? null;\n  const organizerOfficialEmailVerified = Boolean(\n    (organizerStatus?.organizer as { officialEmailVerifiedAt?: string | null } | null)?.officialEmailVerifiedAt,\n  );\n  const needsOfficialEmailVerification = !isAdmin && (!organizerOfficialEmail || !organizerOfficialEmailVerified);\n  const stripeNotReady = !isAdmin && paymentsStatus !== \"READY\";\n  const paidTicketsBlocked = stripeNotReady || needsOfficialEmailVerification;\n  const paidTicketsBlockedMessage = useMemo(() => {\n    if (!paidTicketsBlocked) return null;\n    const reasons: string[] = [];\n    if (stripeNotReady) reasons.push(\"ligares o Stripe em Finan√ßas & Payouts\");\n    if (needsOfficialEmailVerification) {\n      reasons.push(\n        organizerOfficialEmail\n          ? \"verificares o email oficial da organiza√ß√£o em Defini√ß√µes\"\n          : \"definires o email oficial da organiza√ß√£o e o verificares em Defini√ß√µes\",\n      );\n    }\n    const reasonsText = reasons.join(\" e \");\n    return isPadelContext\n      ? `Torneios pagos s√≥ ficam ativos depois de ${reasonsText}. At√© l√° podes criar torneios gratuitos (pre√ßo = 0 ‚Ç¨).`\n      : `Eventos pagos s√≥ ficam ativos depois de ${reasonsText}. At√© l√° podes criar eventos gratuitos (pre√ßo = 0 ‚Ç¨).`;\n  }, [paidTicketsBlocked, stripeNotReady, needsOfficialEmailVerification, organizerOfficialEmail, isPadelContext]);\n\n  useEffect(() => {\n    if (advancedAccessEnabled) return;\n    setPublicAccessMode(\"OPEN\");\n    setParticipantAccessMode(\"NONE\");\n    setPublicTicketScope(\"ALL\");\n    setParticipantTicketScope(\"ALL\");\n    setTicketTypes((prev) =>\n      prev.map((row) => ({ ...row, publicAccess: undefined, participantAccess: undefined })),\n    );\n  }, [advancedAccessEnabled]);\n\n  useEffect(() => {\n    if (!advancedAccessEnabled) return;\n    if (publicAccessMode !== \"TICKET\" || publicTicketScope !== \"SPECIFIC\") {\n      setTicketTypes((prev) => prev.map((row) => ({ ...row, publicAccess: undefined })));\n      return;\n    }\n    setTicketTypes((prev) =>\n      prev.map((row) => ({ ...row, publicAccess: row.publicAccess ?? true })),\n    );\n  }, [advancedAccessEnabled, publicAccessMode, publicTicketScope]);\n\n  useEffect(() => {\n    if (!advancedAccessEnabled) return;\n    if (participantAccessMode !== \"TICKET\" || participantTicketScope !== \"SPECIFIC\") {\n      setTicketTypes((prev) => prev.map((row) => ({ ...row, participantAccess: undefined })));\n      return;\n    }\n    setTicketTypes((prev) =>\n      prev.map((row) => ({ ...row, participantAccess: row.participantAccess ?? true })),\n    );\n  }, [advancedAccessEnabled, participantAccessMode, participantTicketScope]);\n\n  const presetOptions = useMemo(\n    () => (isPadelOrg ? CATEGORY_OPTIONS.filter((opt) => opt.key === \"padel\") : CATEGORY_OPTIONS),\n    [isPadelOrg],\n  );\n\n  const presetMap = useMemo(() => {\n    const map = new Map<string, (typeof CATEGORY_OPTIONS)[number]>();\n    presetOptions.forEach((opt) => map.set(opt.key, opt));\n    return map;\n  }, [presetOptions]);\n\n  const { data: recentVenues } = useSWR<RecentVenuesResponse>(\n    user ? `/api/organizador/venues/recent?q=${encodeURIComponent(locationName.trim())}` : null,\n    fetcher,\n    { revalidateOnFocus: false },\n  );\n  const { data: padelClubs } = useSWR<{ ok: boolean; items?: PadelClubSummary[] }>(\n    selectedPreset === \"padel\" ? \"/api/padel/clubs\" : null,\n    fetcher,\n    { revalidateOnFocus: false },\n  );\n  const { data: padelCourts } = useSWR<{ ok: boolean; items?: PadelCourtSummary[] }>(\n    selectedPreset === \"padel\" && selectedPadelClubId ? `/api/padel/clubs/${selectedPadelClubId}/courts` : null,\n    fetcher,\n    { revalidateOnFocus: false },\n  );\n  const { data: padelStaff } = useSWR<{ ok: boolean; items?: PadelStaffSummary[] }>(\n    selectedPreset === \"padel\" && selectedPadelClubId ? `/api/padel/clubs/${selectedPadelClubId}/staff` : null,\n    fetcher,\n    { revalidateOnFocus: false },\n  );\n\n  useEffect(() => {\n    if (draftLoaded) return;\n    if (typeof window === \"undefined\") return;\n    const raw = window.localStorage.getItem(DRAFT_KEY);\n    if (!raw) {\n      setDraftLoaded(true);\n      return;\n    }\n    try {\n      const draft = JSON.parse(raw) as Partial<{\n        title: string;\n        description: string;\n        startsAt: string;\n        endsAt: string;\n        locationName: string;\n        locationCity: string;\n        address: string;\n        ticketTypes: TicketTypeRow[];\n        feeMode: \"ADDED\" | \"INCLUDED\";\n        coverUrl: string | null;\n        selectedPreset: string | null;\n        isFreeEvent: boolean;\n        advancedAccessEnabled: boolean;\n        publicAccessMode: PublicAccessMode;\n        participantAccessMode: ParticipantAccessMode;\n        publicTicketScope: TicketScope;\n        participantTicketScope: TicketScope;\n        liveHubVisibility: LiveHubVisibility;\n        freeTicketName: string;\n        freeCapacity: string;\n        currentStep: number;\n        maxStepReached: number;\n        savedAt: number;\n      }>;\n      setTitle(draft.title ?? \"\");\n      setDescription(draft.description ?? \"\");\n      setStartsAt(draft.startsAt ?? \"\");\n      setEndsAt(draft.endsAt ?? \"\");\n      setLocationName(draft.locationName ?? \"\");\n      setLocationCity(\n        draft.locationCity && PT_CITIES.includes(draft.locationCity as PTCity)\n          ? (draft.locationCity as PTCity)\n          : PT_CITIES[0],\n      );\n      setAddress(draft.address ?? \"\");\n      setTicketTypes(\n        Array.isArray(draft.ticketTypes) && draft.ticketTypes.length > 0\n          ? draft.ticketTypes\n          : [{ name: \"Geral\", price: \"\", totalQuantity: \"\" }],\n      );\n      setFeeMode(draft.feeMode ?? \"ADDED\");\n      setCoverUrl(draft.coverUrl ?? null);\n      setSelectedPreset(draft.selectedPreset ?? null);\n      setIsFreeEvent(Boolean(draft.isFreeEvent));\n      setAdvancedAccessEnabled(Boolean(draft.advancedAccessEnabled));\n      const legacyInviteOnly = typeof (draft as { inviteOnly?: boolean }).inviteOnly === \"boolean\"\n        ? Boolean((draft as { inviteOnly?: boolean }).inviteOnly)\n        : null;\n      setPublicAccessMode(draft.publicAccessMode ?? (legacyInviteOnly ? \"INVITE\" : \"OPEN\"));\n      setParticipantAccessMode(draft.participantAccessMode ?? \"NONE\");\n      setPublicTicketScope(draft.publicTicketScope ?? \"ALL\");\n      setParticipantTicketScope(draft.participantTicketScope ?? \"ALL\");\n      setLiveHubVisibility(draft.liveHubVisibility ?? \"PUBLIC\");\n      const fallbackFreeName = draft.selectedPreset === \"padel\" ? \"Inscri√ß√£o\" : \"Bilhete\";\n      setFreeTicketName(draft.freeTicketName || fallbackFreeName);\n      setFreeCapacity(draft.freeCapacity || \"\");\n      const draftCurrentStep =\n        typeof draft.currentStep === \"number\" && Number.isFinite(draft.currentStep) ? draft.currentStep : 0;\n      const draftMaxStep =\n        typeof draft.maxStepReached === \"number\" && Number.isFinite(draft.maxStepReached)\n          ? draft.maxStepReached\n          : draftCurrentStep;\n      setCurrentStep(Math.min(draftCurrentStep, 4));\n      setMaxStepReached(Math.min(draftMaxStep, 4));\n      setDraftSavedAt(draft.savedAt ?? null);\n    } catch (err) {\n      console.warn(\"Falha ao carregar rascunho local\", err);\n    } finally {\n      setDraftLoaded(true);\n    }\n  }, [draftLoaded]);\n\n  useEffect(() => {\n    if (!draftLoaded) return;\n    const typeParam = searchParams?.get(\"type\");\n    const keyParam = searchParams?.get(\"category\") ?? searchParams?.get(\"preset\");\n    if (selectedPreset || (!typeParam && !keyParam)) return;\n    const match = presetOptions.find((opt) => opt.value === typeParam || opt.key === keyParam);\n    if (match) {\n      setSelectedPreset(match.key);\n    }\n  }, [draftLoaded, searchParams, selectedPreset, presetOptions]);\n\n  useEffect(() => {\n    if (!isPadelOrg) return;\n    if (selectedPreset !== \"padel\") {\n      setSelectedPreset(\"padel\");\n    }\n  }, [isPadelOrg, selectedPreset]);\n\n  useEffect(() => {\n    if (!isPadelOrg) return;\n    const presetParam = searchParams?.get(\"preset\") ?? searchParams?.get(\"category\") ?? searchParams?.get(\"type\");\n    if (presetParam && presetParam.toLowerCase() === \"padel\") return;\n    const params = new URLSearchParams(searchParams?.toString());\n    params.set(\"preset\", \"padel\");\n    router.replace(`/organizador/eventos/novo?${params.toString()}`);\n  }, [isPadelOrg, router, searchParams]);\n\n  useEffect(() => {\n    if (!isPadelOrg) return;\n    setFreeTicketName((prev) => {\n      const trimmed = prev.trim().toLowerCase();\n      if (!trimmed || trimmed === \"bilhete\" || trimmed === \"bilhetes\") return \"Inscri√ß√£o\";\n      return prev;\n    });\n  }, [isPadelOrg]);\n\n  useEffect(() => {\n    if (!isFreeEvent) return;\n    setTicketTypes([\n      {\n        name: freeTicketName.trim() || ticketLabelTitle,\n        price: \"0\",\n        totalQuantity: freeCapacity,\n      },\n    ]);\n  }, [isFreeEvent, freeTicketName, freeCapacity, ticketLabelTitle]);\n\n  useEffect(() => {\n    clearErrorsForFields([\"tickets\"]);\n    setStripeAlert(null);\n  }, [isFreeEvent]);\n\n  useEffect(() => {\n    if (selectedPreset !== \"padel\") {\n      setSelectedPadelClubId(null);\n      setSelectedPadelCourtIds([]);\n      setSelectedPadelStaffIds([]);\n      setLocationManuallySet(false);\n      return;\n    }\n    if (padelClubs?.items && padelClubs.items.length > 0 && !selectedPadelClubId) {\n      const firstActive = padelClubs.items.find((c) => c.isActive) ?? padelClubs.items[0];\n      setSelectedPadelClubId(firstActive.id);\n    }\n  }, [selectedPreset, padelClubs, selectedPadelClubId]);\n\n  useEffect(() => {\n    if (!padelCourts?.items) return;\n    const activeCourts = padelCourts.items.filter((c) => c.isActive).map((c) => c.id);\n    if (activeCourts.length > 0) setSelectedPadelCourtIds(activeCourts);\n  }, [padelCourts]);\n\n  useEffect(() => {\n    if (!padelStaff?.items) return;\n    const inherited = padelStaff.items.filter((s) => s.inheritToEvents).map((s) => s.id);\n    if (inherited.length > 0) setSelectedPadelStaffIds(inherited);\n  }, [padelStaff]);\n\n  useEffect(() => {\n    if (selectedPreset !== \"padel\") return;\n    if (!selectedPadelClubId) return;\n    const club = padelClubs?.items?.find((c) => c.id === selectedPadelClubId);\n    if (!club) return;\n    const composed = [club.address?.trim(), club.city?.trim()].filter(Boolean).join(\", \");\n    if (!locationManuallySet) {\n      if (composed) setLocationName(composed);\n      else if (!locationName) setLocationName(club.name ?? \"\");\n    }\n    if (club.city && PT_CITIES.includes(club.city as PTCity)) {\n      // Preenche cidade a partir do clube, mas n√£o sobrep√µe escolha manual j√° feita.\n      if (!locationManuallySet || !locationCity) {\n        setLocationCity(club.city as PTCity);\n      }\n    }\n  }, [selectedPreset, selectedPadelClubId, padelClubs?.items, locationManuallySet, locationName]);\n\n  const stepOrder = useMemo<{ key: StepKey; title: string; subtitle: string }[]>(\n    () => [\n      {\n        key: \"preset\",\n        title: \"Formato\",\n        subtitle: isPadelContext ? \"Escolhe o tipo de torneio\" : \"Escolhe o tipo de evento\",\n      },\n      { key: \"details\", title: \"Essenciais\", subtitle: \"Imagem, t√≠tulo e descri√ß√£o\" },\n      { key: \"schedule\", title: \"Datas\", subtitle: \"In√≠cio, fim e local\" },\n      {\n        key: \"tickets\",\n        title: ticketLabelPluralTitle,\n        subtitle: isFreeEvent ? \"Capacidade e vagas\" : \"Pre√ßos e stock\",\n      },\n      { key: \"review\", title: \"Rever\", subtitle: \"Confirma & cria\" },\n    ],\n    [isFreeEvent, isPadelContext, ticketLabelPluralTitle],\n  );\n\n  const stepIndexMap = useMemo(() => {\n    const map = new Map<StepKey, number>();\n    stepOrder.forEach((step, idx) => map.set(step.key, idx));\n    return map;\n  }, [stepOrder]);\n  const wizardSteps: WizardStep[] = useMemo(\n    () => [\n      { id: \"formato\", title: \"Formato\" },\n      { id: \"essenciais\", title: \"Essenciais\" },\n      { id: \"datas_local\", title: \"Datas\" },\n      { id: \"bilhetes\", title: ticketLabelPluralTitle },\n      { id: \"revisao\", title: \"Rever\" },\n    ],\n    [ticketLabelPluralTitle],\n  );\n  const stepIdByKey: Record<StepKey, WizardStep[\"id\"]> = {\n    preset: \"formato\",\n    details: \"essenciais\",\n    schedule: \"datas_local\",\n    tickets: \"bilhetes\",\n    review: \"revisao\",\n  };\n  const baseInputClasses =\n    \"w-full rounded-xl border border-white/12 bg-black/25 px-4 py-3 text-sm text-white/90 placeholder:text-white/45 outline-none transition backdrop-blur-sm shadow-[inset_0_1px_0_rgba(255,255,255,0.08),0_12px_30px_rgba(0,0,0,0.35)] focus:border-[var(--orya-cyan)] focus:ring-2 focus:ring-[rgba(107,255,255,0.35)] focus:ring-offset-0 focus:ring-offset-transparent\";\n  const errorInputClasses =\n    \"border-[rgba(255,0,200,0.45)] focus:border-[rgba(255,0,200,0.6)] focus:ring-[rgba(255,0,200,0.4)]\";\n  const inputClass = (errored?: boolean) => `${baseInputClasses} ${errored ? errorInputClasses : \"\"}`;\n  const labelClass =\n    \"text-[11px] font-semibold uppercase tracking-[0.18em] text-white/70 flex items-center gap-1\";\n  const helperClass = \"text-[12px] text-white/60 min-h-[18px]\";\n  const errorTextClass = \"flex items-center gap-2 text-[12px] font-semibold text-pink-200 min-h-[18px]\";\n  const breadcrumbs = wizardSteps.map((s) => s.title).join(\" ¬∑ \");\n  const dateOrderWarning = startsAt && endsAt && new Date(endsAt).getTime() <= new Date(startsAt).getTime();\n  const currentStepLabel = wizardSteps[currentStep]?.title ?? \"\";\n\n  const pushToast = (message: string, tone: ToastTone = \"success\") => {\n    const id = Date.now() + Math.random();\n    setToasts((prev) => [...prev, { id, message, tone }]);\n    setTimeout(() => setToasts((prev) => prev.filter((t) => t.id !== id)), 3800);\n  };\n\n  const saveDraft = () => {\n    if (typeof window === \"undefined\") return;\n    const payload = {\n      title,\n      description,\n      startsAt,\n      endsAt,\n      locationName,\n      locationCity,\n      address,\n      ticketTypes,\n      feeMode,\n      coverUrl,\n      selectedPreset,\n      isFreeEvent,\n      advancedAccessEnabled,\n      publicAccessMode,\n      participantAccessMode,\n      publicTicketScope,\n      participantTicketScope,\n      liveHubVisibility,\n      freeTicketName,\n      freeCapacity,\n      currentStep,\n      maxStepReached,\n      savedAt: Date.now(),\n    };\n    window.localStorage.setItem(DRAFT_KEY, JSON.stringify(payload));\n    setDraftSavedAt(Date.now());\n    pushToast(\"Rascunho guardado.\", \"success\");\n  };\n\n  const handleRequireLogin = () => {\n    openModal({\n      mode: \"login\",\n      redirectTo: \"/organizador/eventos/novo\",\n    });\n  };\n\n  const handleSelectPreset = (key: string) => {\n    const preset = presetMap.get(key);\n    if (!preset) return;\n    setSelectedPreset(preset.key);\n    setValidationAlert(null);\n    setErrorMessage(null);\n    clearErrorsForFields([\"preset\"]);\n  };\n\n  const handleSelectLocationSuggestion = (suggestion: { name: string; city?: string | null }) => {\n    setLocationName(suggestion.name);\n    if (suggestion.city && PT_CITIES.includes(suggestion.city as PTCity)) {\n      setLocationCity(suggestion.city as PTCity);\n    }\n    setLocationManuallySet(true);\n    clearErrorsForFields([\"locationName\", \"locationCity\"]);\n    setShowLocationSuggestions(false);\n  };\n\n  const handleAddTicketType = () => {\n    clearErrorsForFields([\"tickets\"]);\n    setStripeAlert(null);\n    setTicketTypes((prev) => [\n      ...prev,\n      {\n        name: \"\",\n        price: \"\",\n        totalQuantity: \"\",\n        publicAccess:\n          advancedAccessEnabled && publicAccessMode === \"TICKET\" && publicTicketScope === \"SPECIFIC\"\n            ? true\n            : undefined,\n        participantAccess:\n          advancedAccessEnabled && participantAccessMode === \"TICKET\" && participantTicketScope === \"SPECIFIC\"\n            ? true\n            : undefined,\n      },\n    ]);\n  };\n\n  const handleRemoveTicketType = (index: number) => {\n    clearErrorsForFields([\"tickets\"]);\n    setStripeAlert(null);\n    setTicketTypes((prev) => prev.filter((_, i) => i !== index));\n  };\n\n  const handleTicketChange = (index: number, field: keyof TicketTypeRow, value: string) => {\n    setTicketTypes((prev) => prev.map((row, i) => (i === index ? { ...row, [field]: value } : row)));\n    clearErrorsForFields([\"tickets\"]);\n    setStripeAlert(null);\n  };\n\n  const toggleTicketFlag = (index: number, field: \"publicAccess\" | \"participantAccess\") => {\n    setTicketTypes((prev) =>\n      prev.map((row, i) => (i === index ? { ...row, [field]: !row[field] } : row)),\n    );\n  };\n\n  const handleCoverUpload = async (file: File | null) => {\n    if (!file) return;\n    const formData = new FormData();\n    formData.append(\"file\", file);\n    setUploadingCover(true);\n    setErrorMessage(null);\n    try {\n      const res = await fetch(\"/api/upload\", {\n        method: \"POST\",\n        body: formData,\n      });\n      const json = await res.json();\n      if (!res.ok || !json?.url) {\n        throw new Error(json?.error || \"Falha no upload da imagem.\");\n      }\n      setCoverUrl(json.url as string);\n    } catch (err) {\n      console.error(\"Erro no upload de capa\", err);\n      setErrorMessage(\"N√£o foi poss√≠vel carregar a imagem de capa.\");\n    } finally {\n      setUploadingCover(false);\n    }\n  };\n\n  const buildTicketsPayload = () => {\n    if (isFreeEvent) {\n      const totalQuantityRaw = freeCapacity ? Number(freeCapacity) : null;\n      const parsedQuantity =\n        typeof totalQuantityRaw === \"number\" && Number.isFinite(totalQuantityRaw) && totalQuantityRaw > 0\n          ? totalQuantityRaw\n          : null;\n      return [\n        {\n          name: freeTicketName.trim() || ticketLabelTitle,\n          price: 0,\n          totalQuantity: parsedQuantity,\n          publicAccess:\n            advancedAccessEnabled &&\n            publicAccessMode === \"TICKET\" &&\n            publicTicketScope === \"SPECIFIC\"\n              ? true\n              : undefined,\n          participantAccess:\n            advancedAccessEnabled &&\n            participantAccessMode === \"TICKET\" &&\n            participantTicketScope === \"SPECIFIC\"\n              ? true\n              : undefined,\n        },\n      ];\n    }\n\n    return ticketTypes\n      .map((row) => {\n        const parsedPrice = Number(row.price.replace(\",\", \".\"));\n        const price = Number.isFinite(parsedPrice) ? parsedPrice : 0;\n        return {\n          name: row.name.trim(),\n          price,\n          totalQuantity: row.totalQuantity ? Number(row.totalQuantity) : null,\n          publicAccess:\n            advancedAccessEnabled &&\n            publicAccessMode === \"TICKET\" &&\n            publicTicketScope === \"SPECIFIC\"\n              ? Boolean(row.publicAccess)\n              : undefined,\n          participantAccess:\n            advancedAccessEnabled &&\n            participantAccessMode === \"TICKET\" &&\n            participantTicketScope === \"SPECIFIC\"\n              ? Boolean(row.participantAccess)\n              : undefined,\n        };\n      })\n      .filter((t) => t.name);\n  };\n\n  const preparedTickets = useMemo(\n    () => buildTicketsPayload(),\n    [\n      isFreeEvent,\n      freeTicketName,\n      freeCapacity,\n      ticketTypes,\n      advancedAccessEnabled,\n      publicAccessMode,\n      participantAccessMode,\n      publicTicketScope,\n      participantTicketScope,\n    ],\n  );\n\n  const accessNotes = useMemo(() => {\n    const notes: string[] = [];\n    if (!advancedAccessEnabled) {\n      return notes;\n    }\n    if (publicAccessMode === \"TICKET\" && preparedTickets.length === 0) {\n      notes.push(`Define pelo menos ${ticketLabelIndefinite} para controlar o acesso do p√∫blico.`);\n    }\n    if (participantAccessMode === \"TICKET\" && preparedTickets.length === 0) {\n      notes.push(`Define ${ticketLabelPlural} para marcar participantes.`);\n    }\n    if (publicAccessMode === \"INVITE\" || participantAccessMode === \"INVITE\") {\n      notes.push(`Convites s√£o adicionados depois de criares o ${eventLabel}.`);\n    }\n    return notes;\n  }, [advancedAccessEnabled, publicAccessMode, participantAccessMode, preparedTickets.length, eventLabel, ticketLabelIndefinite, ticketLabelPlural]);\n\n  const fieldsByStep: Record<StepKey, FieldKey[]> = {\n    preset: [\"preset\"],\n    details: [\"title\", \"description\"],\n    schedule: [\"startsAt\", \"endsAt\", \"locationName\", \"locationCity\", \"address\"],\n    tickets: [\"tickets\"],\n    review: [],\n  };\n\n  function collectStepErrors(stepKey: StepKey | \"all\") {\n    const keys = stepKey === \"all\" ? ([\"preset\", \"details\", \"schedule\", \"tickets\"] as StepKey[]) : [stepKey];\n    const issues: { field: FieldKey; message: string }[] = [];\n    keys.forEach((key) => {\n      if (key === \"preset\" && !resolvedPreset) {\n        issues.push({ field: \"preset\", message: \"Escolhe um formato.\" });\n      }\n      if (key === \"details\") {\n        if (!title.trim()) {\n          issues.push({ field: \"title\", message: \"T√≠tulo obrigat√≥rio.\" });\n        }\n      }\n      if (key === \"schedule\") {\n        if (!startsAt) issues.push({ field: \"startsAt\", message: \"Data/hora de in√≠cio obrigat√≥ria.\" });\n        if (!endsAt) issues.push({ field: \"endsAt\", message: \"Data/hora de fim obrigat√≥ria.\" });\n        if (!locationName.trim()) issues.push({ field: \"locationName\", message: \"Local obrigat√≥rio.\" });\n        if (!locationCity.trim()) issues.push({ field: \"locationCity\", message: \"Cidade obrigat√≥ria.\" });\n        if (endsAt && startsAt && new Date(endsAt).getTime() <= new Date(startsAt).getTime()) {\n          issues.push({ field: \"endsAt\", message: \"A data/hora de fim tem de ser depois do in√≠cio.\" });\n        }\n      }\n      if (key === \"tickets\") {\n        const preparedTickets = buildTicketsPayload();\n        if (preparedTickets.length === 0) {\n          issues.push({ field: \"tickets\", message: `Adiciona pelo menos ${ticketLabelIndefinite}.` });\n        }\n        if (\n          advancedAccessEnabled &&\n          publicAccessMode === \"TICKET\" &&\n          publicTicketScope === \"SPECIFIC\" &&\n          !preparedTickets.some((t) => t.publicAccess)\n        ) {\n          issues.push({ field: \"tickets\", message: `Seleciona pelo menos um ${ticketLabel} para o p√∫blico.` });\n        }\n        if (\n          advancedAccessEnabled &&\n          participantAccessMode === \"TICKET\" &&\n          participantTicketScope === \"SPECIFIC\" &&\n          !preparedTickets.some((t) => t.participantAccess)\n        ) {\n          issues.push({ field: \"tickets\", message: `Seleciona pelo menos um ${ticketLabel} para participantes.` });\n        }\n        if (!isFreeEvent) {\n          const hasNegativePrice = preparedTickets.some((t) => t.price < 0);\n          const hasBelowMinimum = preparedTickets.some((t) => t.price >= 0 && t.price < 1);\n          if (hasNegativePrice) {\n            issues.push({ field: \"tickets\", message: \"Pre√ßo tem de ser positivo.\" });\n          }\n          if (hasBelowMinimum) {\n            issues.push({\n              field: \"tickets\",\n              message: isPadelContext\n                ? \"Para torneios de padel pagos, cada inscri√ß√£o tem de custar pelo menos 1 ‚Ç¨.\"\n                : \"Para eventos pagos, cada bilhete tem de custar pelo menos 1 ‚Ç¨.\",\n            });\n          }\n        }\n        if (!isFreeEvent && hasPaidTicket && paidTicketsBlocked) {\n          issues.push({\n            field: \"tickets\",\n            message:\n              paidTicketsBlockedMessage ??\n              (isPadelContext\n                ? \"Liga o Stripe e verifica o email oficial da organiza√ß√£o para aceitar inscri√ß√µes pagas.\"\n                : \"Liga o Stripe e verifica o email oficial da organiza√ß√£o para vender bilhetes pagos.\"),\n          });\n        }\n      }\n    });\n    return issues;\n  }\n\n  const fieldStepMap = useMemo<Record<FieldKey, StepKey>>(\n    () => ({\n      preset: \"preset\",\n      title: \"details\",\n      description: \"details\",\n      startsAt: \"schedule\",\n      endsAt: \"schedule\",\n      locationName: \"schedule\",\n      locationCity: \"schedule\",\n      address: \"schedule\",\n      tickets: \"tickets\",\n    }),\n    [],\n  );\n\n  function clearErrorsForFields(fields: FieldKey[]) {\n    setFieldErrors((prev) => {\n      const next = { ...prev };\n      fields.forEach((field) => {\n        delete next[field];\n      });\n      return next;\n    });\n    setErrorSummary((prev) => prev.filter((err) => !fields.includes(err.field)));\n  }\n\n  function applyErrors(errors: { field: FieldKey; message: string }[], focusSummary = true) {\n    if (errors.length === 0) {\n      setErrorSummary([]);\n    } else {\n      setErrorSummary(errors);\n    }\n    setFieldErrors((prev) => {\n      const next = { ...prev };\n      errors.forEach((err) => {\n        next[err.field] = err.message;\n      });\n      return next;\n    });\n    if (errors.length > 0 && focusSummary) {\n      setTimeout(() => {\n        errorSummaryRef.current?.focus({ preventScroll: false });\n      }, 40);\n    }\n  }\n\n  const focusField = useCallback(\n    (field: FieldKey) => {\n      const targetStep = fieldStepMap[field];\n      const targetStepIndex = stepIndexMap.get(targetStep);\n      if (typeof targetStepIndex === \"number\" && targetStepIndex !== currentStep) {\n        setCurrentStep(targetStepIndex);\n        setMaxStepReached((prev) => Math.max(prev, targetStepIndex));\n        setPendingFocusField(field);\n        return;\n      }\n\n      const focusable =\n        field === \"title\"\n          ? titleRef.current\n          : field === \"startsAt\"\n          ? (startsRef.current?.querySelector(\"button\") as HTMLElement | null)\n          : field === \"endsAt\"\n            ? (endsRef.current?.querySelector(\"button\") as HTMLElement | null)\n            : field === \"locationName\"\n              ? locationNameRef.current\n              : field === \"locationCity\"\n                ? cityRef.current\n                : field === \"tickets\"\n                  ? (ticketsRef.current?.querySelector(\"input,button,select,textarea\") as HTMLElement | null)\n                  : null;\n\n      if (focusable) {\n        focusable.scrollIntoView({ behavior: \"smooth\", block: \"center\" });\n        focusable.focus({ preventScroll: true });\n      }\n    },\n    [currentStep, fieldStepMap, stepIndexMap],\n  );\n\n  useEffect(() => {\n    if (!pendingFocusField) return;\n    const expectedStep = fieldStepMap[pendingFocusField];\n    const targetStepIndex = stepIndexMap.get(expectedStep);\n    if (typeof targetStepIndex === \"number\" && targetStepIndex !== currentStep) return;\n    focusField(pendingFocusField);\n    setPendingFocusField(null);\n  }, [pendingFocusField, currentStep, stepIndexMap, fieldStepMap, focusField]);\n\n  useEffect(() => {\n    let timer: NodeJS.Timeout | null = null;\n    if (isSubmitting) {\n      timer = setTimeout(() => setShowLoadingHint(true), 750);\n    } else {\n      setShowLoadingHint(false);\n    }\n    return () => {\n      if (timer) clearTimeout(timer);\n    };\n  }, [isSubmitting]);\n\n  const activeStepKey = stepOrder[currentStep]?.key ?? \"preset\";\n  const nextDisabledReason = (() => {\n    const issues =\n      activeStepKey === \"review\" ? collectStepErrors(\"all\") : collectStepErrors(activeStepKey as StepKey);\n    if (isSubmitting) return isPadelContext ? \"A criar torneio de padel‚Ä¶\" : \"A criar evento‚Ä¶\";\n    return issues[0]?.message ?? null;\n  })();\n\n  const currentWizardStepId = stepIdByKey[activeStepKey];\n  const direction = currentStep >= prevStepIndexRef.current ? \"right\" : \"left\";\n  useEffect(() => {\n    prevStepIndexRef.current = currentStep;\n  }, [currentStep]);\n\n  const filteredLocationSuggestions = useMemo(() => {\n    const items = recentVenues?.ok && Array.isArray(recentVenues.items) ? recentVenues.items : [];\n    if (items.length === 0) return [];\n    const term = `${locationName} ${locationCity}`.toLowerCase().trim();\n    const filtered = items.filter((s) => `${s.name} ${s.city ?? \"\"}`.toLowerCase().includes(term));\n    return (term ? filtered : items).slice(0, 8);\n  }, [recentVenues, locationName, locationCity]);\n\n  useEffect(() => {\n    if (title.trim()) clearErrorsForFields([\"title\"]);\n  }, [title]);\n\n  useEffect(() => {\n    if (startsAt) clearErrorsForFields([\"startsAt\"]);\n  }, [startsAt]);\n\n  useEffect(() => {\n    if (locationName.trim()) clearErrorsForFields([\"locationName\"]);\n  }, [locationName]);\n\n  useEffect(() => {\n    if (locationCity.trim()) clearErrorsForFields([\"locationCity\"]);\n  }, [locationCity]);\n\n  useEffect(() => {\n    if (endsAt && startsAt && new Date(endsAt).getTime() > new Date(startsAt).getTime()) {\n      clearErrorsForFields([\"endsAt\"]);\n    }\n  }, [endsAt, startsAt]);\n\n  const FormAlert = ({\n    variant,\n    title: alertTitle,\n    message,\n    actionLabel,\n    onAction,\n  }: {\n    variant: \"error\" | \"warning\" | \"success\";\n    title?: string;\n    message: string;\n    actionLabel?: string;\n    onAction?: () => void;\n  }) => {\n    const tones =\n      variant === \"error\"\n        ? \"border-red-500/40 bg-red-500/10 text-red-100\"\n        : variant === \"warning\"\n          ? \"border-amber-400/40 bg-amber-400/10 text-amber-100\"\n          : \"border-emerald-400/40 bg-emerald-500/10 text-emerald-50\";\n    return (\n      <div className={`rounded-md border px-4 py-3 text-sm ${tones}`}>\n        <div className=\"flex flex-wrap items-center justify-between gap-2\">\n          <div className=\"space-y-1\">\n            {alertTitle && <p className=\"font-semibold\">{alertTitle}</p>}\n            <p>{message}</p>\n          </div>\n          {actionLabel && onAction && (\n            <button\n              type=\"button\"\n              onClick={onAction}\n              className=\"rounded-full border border-white/30 px-3 py-1 text-[11px] font-semibold hover:bg-white/10\"\n            >\n              {actionLabel}\n            </button>\n          )}\n        </div>\n      </div>\n    );\n  };\n\n  const goNext = () => {\n    const activeKey = stepOrder[currentStep]?.key;\n    if (!activeKey) return;\n    const issues = activeKey === \"review\" ? collectStepErrors(\"all\") : collectStepErrors(activeKey as StepKey);\n    const paidAlert = !isFreeEvent && hasPaidTicket && paidTicketsBlocked ? paidTicketsBlockedMessage : null;\n    if (issues.length > 0) {\n      applyErrors(issues);\n      setValidationAlert(\"Rev√™ os campos em falta antes de continuar.\");\n      setErrorMessage(issues[0]?.message ?? null);\n      setStripeAlert(paidAlert);\n      return;\n    }\n    clearErrorsForFields(fieldsByStep[activeKey as StepKey]);\n    setValidationAlert(null);\n    setErrorMessage(null);\n    setStripeAlert(null);\n    setErrorSummary([]);\n    if (currentStep >= stepOrder.length - 1) {\n      handleSubmit();\n      return;\n    }\n    setValidationAlert(null);\n    setErrorMessage(null);\n    setCurrentStep((s) => s + 1);\n    setMaxStepReached((prev) => Math.max(prev, currentStep + 1));\n  };\n\n  const goPrev = () => {\n    setValidationAlert(null);\n    setErrorMessage(null);\n    setErrorSummary([]);\n    setStripeAlert(null);\n    setCurrentStep((s) => Math.max(0, s - 1));\n  };\n\n  const handleSubmit = async () => {\n    setStripeAlert(null);\n    setValidationAlert(null);\n    setBackendAlert(null);\n    setErrorMessage(null);\n\n    const issues = collectStepErrors(\"all\");\n    const paidAlert = !isFreeEvent && hasPaidTicket && paidTicketsBlocked ? paidTicketsBlockedMessage : null;\n    if (issues.length > 0) {\n      applyErrors(issues);\n      setValidationAlert(`Rev√™ os campos em falta antes de criar o ${eventLabel}.`);\n      setErrorMessage(issues[0]?.message ?? null);\n      setStripeAlert(paidAlert);\n      return;\n    }\n\n    const preparedTickets = buildTicketsPayload();\n    const scrollTo = (el?: HTMLElement | null) => el?.scrollIntoView({ behavior: \"smooth\", block: \"center\" });\n\n    if (!user) {\n      handleRequireLogin();\n      return;\n    }\n\n    if (!isOrganizer) {\n      setErrorMessage(\"Ainda n√£o √©s organizador. Vai √† √°rea de organizador para ativares essa fun√ß√£o.\");\n      return;\n    }\n\n    setIsSubmitting(true);\n\n    try {\n      const preset = resolvedPreset ? presetMap.get(resolvedPreset) : null;\n      const categoriesToSend = preset?.categories ?? [\"OUTRO\"];\n      const templateToSend =\n        resolvedPreset === \"padel\"\n          ? \"PADEL\"\n          : resolvedPreset === \"voluntariado\"\n            ? \"VOLUNTEERING\"\n            : \"OTHER\";\n      const payload = {\n        title: title.trim(),\n        description: description.trim() || null,\n        startsAt,\n        endsAt,\n        locationName: locationName.trim() || null,\n        locationCity: locationCity.trim() || null,\n        templateType: templateToSend,\n        address: address.trim() || null,\n        categories: categoriesToSend,\n        ticketTypes: preparedTickets,\n        coverImageUrl: coverUrl,\n        inviteOnly: publicAccessMode === \"INVITE\",\n        publicAccessMode,\n        participantAccessMode,\n        publicTicketScope,\n        participantTicketScope,\n        liveHubVisibility,\n        feeMode,\n        isTest: isAdmin ? isTest : undefined,\n        padel:\n          resolvedPreset === \"padel\"\n            ? {\n                padelClubId: selectedPadelClubId,\n                courtIds: selectedPadelCourtIds,\n                staffIds: selectedPadelStaffIds,\n                numberOfCourts: selectedPadelCourtIds.length || 1,\n                padelV2Enabled: true,\n              }\n            : undefined,\n    };\n\n      const res = await fetch(\"/api/organizador/events/create\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(payload),\n      });\n\n      const data = await res.json();\n\n      if (!res.ok || !data?.ok) {\n        throw new Error(data?.error || `Erro ao criar ${eventLabel}.`);\n      }\n\n      const event = data.event;\n      if (event?.id || event?.slug) {\n        if (typeof window !== \"undefined\") {\n          window.localStorage.removeItem(DRAFT_KEY);\n        }\n        setCreationSuccess({ eventId: event.id, slug: event.slug });\n        setCurrentStep(stepOrder.length - 1);\n        setMaxStepReached(stepOrder.length - 1);\n        setErrorSummary([]);\n        setFieldErrors({});\n      }\n    } catch (err) {\n      console.error(\"Erro ao criar evento de organizador:\", err);\n      const message = err instanceof Error ? err.message : null;\n      setBackendAlert(message || `Algo correu mal ao guardar o ${eventLabel}. Tenta novamente em segundos.`);\n      scrollTo(ctaAlertRef.current);\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const resetForm = () => {\n    setSelectedPreset(isPadelOrg ? \"padel\" : null);\n    setTitle(\"\");\n    setDescription(\"\");\n    setStartsAt(\"\");\n    setEndsAt(\"\");\n    setLocationName(\"\");\n    setLocationCity(PT_CITIES[0]);\n    setAddress(\"\");\n    setTicketTypes([{ name: \"Geral\", price: \"\", totalQuantity: \"\" }]);\n    setIsFreeEvent(false);\n    setFreeTicketName(isPadelOrg ? \"Inscri√ß√£o\" : \"Bilhete\");\n    setFreeCapacity(\"\");\n    setCoverUrl(null);\n    setCreationSuccess(null);\n    setCurrentStep(0);\n    setMaxStepReached(0);\n    setValidationAlert(null);\n    setErrorMessage(null);\n    setErrorSummary([]);\n    setFieldErrors({});\n    setStripeAlert(null);\n    setBackendAlert(null);\n    if (typeof window !== \"undefined\") {\n      window.localStorage.removeItem(DRAFT_KEY);\n    }\n  };\n\n  if (isUserLoading) {\n    return (\n      <div className=\"w-full px-4 py-8 md:px-6 lg:px-8\">\n        <div className=\"rounded-3xl border border-white/12 bg-gradient-to-br from-white/8 via-[#0b1124]/70 to-[#050810]/90 p-5 text-white/70 shadow-[0_24px_80px_rgba(0,0,0,0.55)] backdrop-blur-2xl\">\n          A carregar a tua conta‚Ä¶\n        </div>\n      </div>\n    );\n  }\n\n  if (!user) {\n    return (\n      <div className=\"w-full px-4 py-8 md:px-6 lg:px-8\">\n        <div className=\"rounded-3xl border border-white/12 bg-gradient-to-br from-white/8 via-[#0b1124]/70 to-[#050810]/90 p-6 text-white shadow-[0_24px_80px_rgba(0,0,0,0.55)] backdrop-blur-2xl space-y-3\">\n          <h1 className=\"text-2xl font-semibold\">\n            {isPadelContext ? \"Criar novo torneio de padel\" : \"Criar novo evento\"}\n          </h1>\n          <p className=\"text-white/70\">\n            Precisas de iniciar sess√£o para criar {eventLabelPlural} como organizador.\n          </p>\n          <button\n            type=\"button\"\n            onClick={handleRequireLogin}\n            className={CTA_PRIMARY}\n          >\n            Entrar\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  if (!isOrganizer) {\n    return (\n      <div className=\"w-full px-4 py-8 md:px-6 lg:px-8\">\n        <div className=\"rounded-3xl border border-white/12 bg-gradient-to-br from-white/8 via-[#0b1124]/70 to-[#050810]/90 p-6 text-white shadow-[0_24px_80px_rgba(0,0,0,0.55)] backdrop-blur-2xl space-y-3\">\n          <h1 className=\"text-2xl font-semibold\">\n            {isPadelContext ? \"Criar novo torneio de padel\" : \"Criar novo evento\"}\n          </h1>\n          <p className=\"text-white/70\">Ainda n√£o √©s organizador. Vai √† √°rea de organizador para ativar essa fun√ß√£o.</p>\n          <Link\n            href=\"/organizador\"\n            className={CTA_PRIMARY}\n          >\n            Ir para √°rea de organizador\n          </Link>\n        </div>\n      </div>\n    );\n  }\n\n  const renderPresetStep = () => (\n    <div className=\"space-y-4 animate-fade-slide\">\n      <div className=\"flex flex-col gap-2\">\n        <p className=\"text-sm text-white/75\">\n          {isPadelOrg\n            ? \"A tua organiza√ß√£o est√° configurada para padel. Este torneio j√° usa o wizard dedicado.\"\n            : \"Escolhe o formato. Padel ativa o wizard dedicado; o formato padr√£o √© neutro.\"}\n        </p>\n        <p className=\"text-[12px] text-white/55\">\n          {isPadelOrg ? \"Podes avan√ßar sem mudar o formato.\" : \"Tudo segue a mesma linguagem visual.\"}\n        </p>\n        {fieldErrors.preset && (\n          <p className={errorTextClass}>\n            <span aria-hidden>‚ö†Ô∏è</span>\n            {fieldErrors.preset}\n          </p>\n        )}\n      </div>\n      <div className=\"grid gap-3 sm:grid-cols-2\">\n        {presetOptions.map((opt) => {\n          const isActive = resolvedPreset === opt.key;\n          return (\n            <button\n              key={opt.key}\n              type=\"button\"\n              onClick={() => handleSelectPreset(opt.key)}\n              className={`group flex flex-col items-start gap-2 rounded-2xl border border-white/12 bg-black/40 p-4 text-left transition hover:border-white/30 hover:shadow-[0_10px_30px_rgba(0,0,0,0.4)] ${\n                isActive ? \"ring-2 ring-[#6BFFFF]/40 border-white/30\" : \"\"\n              }`}\n            >\n              <span\n                className={`inline-flex items-center rounded-full bg-gradient-to-r ${opt.accent} px-3 py-1 text-[11px] font-semibold text-black shadow`}\n              >\n                {opt.label}\n              </span>\n              <p className=\"text-sm text-white/80\">{opt.copy}</p>\n              <div className=\"flex flex-wrap gap-2 text-[11px] text-white/60\">\n                {opt.categories.length === 0 ? (\n                  <span className=\"rounded-full border border-white/10 px-2 py-0.5\">Personalizado</span>\n                ) : (\n                  opt.categories.map((cat) => (\n                    <span key={cat} className=\"rounded-full border border-white/15 px-2 py-0.5\">\n                      {cat}\n                    </span>\n                  ))\n                )}\n              </div>\n            </button>\n          );\n        })}\n      </div>\n    </div>\n  );\n\n  const renderDetailsStep = () => (\n    <div className=\"space-y-4 animate-fade-slide\">\n      {isAdmin && (\n        <label className=\"flex items-center gap-3 rounded-2xl border border-white/12 bg-black/30 px-3 py-2 text-sm\">\n          <input\n            type=\"checkbox\"\n            checked={isTest}\n            onChange={(e) => setIsTest(e.target.checked)}\n            className=\"h-4 w-4 rounded border-white/40 bg-transparent\"\n          />\n          <span className=\"text-white/80\">\n            {isPadelContext ? \"Torneio de teste\" : \"Evento de teste\"} (vis√≠vel s√≥ para admin, n√£o aparece em explorar)\n          </span>\n        </label>\n      )}\n\n      <div className=\"rounded-2xl border border-white/12 bg-[rgba(14,14,20,0.7)] p-4 space-y-3 shadow-[0_14px_36px_rgba(0,0,0,0.45)]\">\n        <div className=\"flex flex-col gap-1 sm:flex-row sm:items-start sm:justify-between\">\n          <div>\n            <p className={labelClass}>Imagem de capa</p>\n            <p className=\"text-[12px] text-white/65\">Hero do {eventLabel} ‚Äî leg√≠vel em mobile.</p>\n          </div>\n          <div className=\"flex items-center gap-2 text-[11px] text-white/60\">\n            {uploadingCover && <span className=\"animate-pulse text-white/70\">A carregar‚Ä¶</span>}\n            {coverUrl && (\n              <button\n                type=\"button\"\n                onClick={() => setCoverUrl(null)}\n                className=\"rounded-full border border-white/20 px-3 py-1 text-white/75 hover:bg-white/10\"\n              >\n                Remover\n              </button>\n            )}\n          </div>\n        </div>\n        <div className=\"flex flex-col gap-3 sm:flex-row sm:items-center\">\n          <div className=\"h-36 w-56 rounded-xl border border-white/15 bg-gradient-to-br from-[#12121f] via-[#0b0b18] to-[#1f1630] overflow-hidden flex items-center justify-center text-[11px] text-white/60\">\n            {coverUrl ? (\n              // eslint-disable-next-line @next/next/no-img-element\n              <img src={coverUrl} alt=\"Capa\" className=\"h-full w-full object-cover\" />\n            ) : (\n              <span className=\"text-white/55\">Sem imagem</span>\n            )}\n          </div>\n          <div className=\"flex flex-wrap gap-2 text-[12px] text-white/60\">\n            <label className=\"inline-flex cursor-pointer items-center gap-2 rounded-full border border-white/25 px-3 py-1 hover:bg-white/10\">\n              <span>{coverUrl ? \"Trocar imagem\" : \"Adicionar imagem\"}</span>\n              <input\n                type=\"file\"\n                accept=\"image/*\"\n                onChange={(e) => handleCoverUpload(e.target.files?.[0] ?? null)}\n                className=\"hidden\"\n              />\n            </label>\n            <span className=\"inline-flex items-center rounded-full border border-white/10 px-3 py-1 text-white/50\">\n              1200x630 recomendado\n            </span>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 gap-4 md:grid-cols-2\">\n        <div className=\"space-y-2 md:col-span-2\">\n          <label className={labelClass}>\n            T√≠tulo <span aria-hidden>*</span>\n          </label>\n          <input\n            type=\"text\"\n            value={title}\n            onChange={(e) => setTitle(e.target.value)}\n            ref={titleRef}\n            aria-invalid={Boolean(fieldErrors.title)}\n            className={inputClass(Boolean(fieldErrors.title))}\n            placeholder={isPadelContext ? \"Torneio Sunset Padel\" : \"Evento Sunset\"}\n          />\n          {fieldErrors.title && (\n            <p className={errorTextClass}>\n              <span aria-hidden>‚ö†Ô∏è</span>\n              {fieldErrors.title}\n            </p>\n          )}\n        </div>\n\n        <div className=\"space-y-2 md:col-span-2\">\n          <label className={labelClass}>Descri√ß√£o</label>\n          <textarea\n            value={description}\n            onChange={(e) => setDescription(e.target.value)}\n            rows={4}\n            className={inputClass(false)}\n            placeholder={`Explica rapidamente o que torna o ${eventLabel} √∫nico.`}\n          />\n        </div>\n      </div>\n    </div>\n  );\n\n  const renderScheduleStep = () => (\n    <div className=\"space-y-4 animate-fade-slide\">\n      <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2\">\n        <div ref={startsRef} className=\"space-y-1\">\n          <InlineDateTimePicker\n            label=\"üóìÔ∏è Data/hora in√≠cio *\"\n            value={startsAt}\n            onChange={(v) => setStartsAt(v)}\n            minDateTime={new Date()}\n            required\n          />\n          {fieldErrors.startsAt && (\n            <p className={errorTextClass}>\n              <span aria-hidden>‚ö†Ô∏è</span>\n              {fieldErrors.startsAt}\n            </p>\n          )}\n        </div>\n        <div ref={endsRef} className=\"space-y-1\">\n          <InlineDateTimePicker\n            label=\"‚è±Ô∏è Data/hora fim *\"\n            value={endsAt}\n            onChange={(v) => setEndsAt(v)}\n            minDateTime={startsAt ? new Date(startsAt) : new Date()}\n          />\n          {fieldErrors.endsAt ? (\n            <p className={errorTextClass}>\n              <span aria-hidden>‚ö†Ô∏è</span>\n              {fieldErrors.endsAt}\n            </p>\n          ) : dateOrderWarning ? (\n            <p className={errorTextClass}>\n              <span aria-hidden>‚ö†Ô∏è</span>Fim antes do in√≠cio\n            </p>\n          ) : (\n            <p className={helperClass}>Dura√ß√£o ajuda no planeamento de staff.</p>\n          )}\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2\">\n        <div className=\"space-y-1\">\n          <label className={labelClass} title=\"Nome do local ou clube.\">\n            üìç Local <span aria-hidden>*</span>\n          </label>\n          <div className=\"relative overflow-visible\">\n            <input\n              type=\"text\"\n              value={locationName}\n              onChange={(e) => {\n                setLocationManuallySet(true);\n                setLocationName(e.target.value);\n                setShowLocationSuggestions(true);\n              }}\n              onFocus={() => setShowLocationSuggestions(true)}\n              onBlur={() => {\n                if (suggestionBlurTimeout.current) clearTimeout(suggestionBlurTimeout.current);\n                suggestionBlurTimeout.current = setTimeout(() => setShowLocationSuggestions(false), 120);\n              }}\n              ref={locationNameRef}\n              aria-invalid={Boolean(fieldErrors.locationName)}\n              className={inputClass(Boolean(fieldErrors.locationName))}\n              placeholder=\"Clube, sala ou venue\"\n            />\n            {showLocationSuggestions && (\n              <div className=\"absolute left-0 right-0 z-[70] mt-2 max-h-56 overflow-y-auto rounded-xl border border-white/12 bg-black/90 shadow-xl backdrop-blur-2xl animate-popover\">\n                {recentVenues === undefined ? (\n                  <div className=\"px-3 py-2 text-sm text-white/70 animate-pulse\">A procurar‚Ä¶</div>\n                ) : filteredLocationSuggestions.length === 0 ? (\n                  <div className=\"px-3 py-2 text-sm text-white/60\">Sem locais recentes.</div>\n                ) : (\n                  filteredLocationSuggestions.map((suggestion) => (\n                    <button\n                      key={`${suggestion.name}-${suggestion.city ?? \"?\"}`}\n                      type=\"button\"\n                      onMouseDown={(e) => e.preventDefault()}\n                      onClick={() => handleSelectLocationSuggestion(suggestion)}\n                      className=\"flex w-full flex-col items-start gap-1 border-b border-white/5 px-3 py-2 text-left text-sm hover:bg-white/8 last:border-0 transition\"\n                    >\n                      <div className=\"flex w-full items-center justify-between gap-3\">\n                        <span className=\"font-semibold text-white\">{suggestion.name}</span>\n                        <span className=\"text-[12px] text-white/65\">{suggestion.city || \"Cidade por definir\"}</span>\n                      </div>\n                      <span className=\"text-[11px] text-white/50\">Usado em {eventLabelPlural} deste organizador</span>\n                    </button>\n                  ))\n                )}\n              </div>\n            )}\n          </div>\n          {fieldErrors.locationName && (\n            <p className={errorTextClass}>\n              <span aria-hidden>‚ö†Ô∏è</span>\n              {fieldErrors.locationName}\n            </p>\n          )}\n        </div>\n\n        <div className=\"space-y-1\">\n          <label className={labelClass} title=\"Escolhe a cidade para facilitar a procura.\">\n            üèôÔ∏è Cidade <span aria-hidden>*</span>\n          </label>\n          <select\n            value={locationCity}\n            onChange={(e) => {\n              setLocationManuallySet(true);\n              setLocationCity(e.target.value);\n              setShowLocationSuggestions(true);\n            }}\n            ref={cityRef}\n            aria-invalid={Boolean(fieldErrors.locationCity)}\n            onFocus={() => setShowLocationSuggestions(true)}\n            onBlur={() => {\n              if (suggestionBlurTimeout.current) clearTimeout(suggestionBlurTimeout.current);\n              suggestionBlurTimeout.current = setTimeout(() => setShowLocationSuggestions(false), 120);\n            }}\n            className={inputClass(Boolean(fieldErrors.locationCity))}\n          >\n            {PT_CITIES.map((city) => (\n              <option key={city} value={city}>\n                {city}\n              </option>\n            ))}\n          </select>\n        {fieldErrors.locationCity && (\n          <p className={errorTextClass}>\n            <span aria-hidden>‚ö†Ô∏è</span>\n            {fieldErrors.locationCity}\n          </p>\n        )}\n        {!fieldErrors.locationCity && <p className=\"text-[12px] text-white/60\">Usa a capital do concelho para pesquisa f√°cil.</p>}\n      </div>\n    </div>\n\n    {selectedPreset === \"padel\" && (\n      <div className=\"rounded-3xl border border-white/12 bg-gradient-to-br from-[#0c1224]/88 via-[#0a0f1d]/90 to-[#0b1224]/88 p-6 shadow-[0_28px_90px_rgba(0,0,0,0.55)] backdrop-blur-2xl space-y-5 transition-all\">\n        <div className=\"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between\">\n          <div className=\"space-y-1\">\n            <p className=\"text-[11px] uppercase tracking-[0.2em] text-white/60\">Wizard Padel avan√ßado</p>\n            <p className=\"text-[12px] text-white/70\">\n              Liga clube, courts e staff herdado sem sair do fluxo. Ajusta detalhes no hub sempre que precisares.\n            </p>\n          </div>\n          <Link\n            href=\"/organizador?tab=manage&section=padel-hub\"\n            className=\"rounded-full border border-white/15 bg-white/10 px-3 py-1.5 text-[12px] font-semibold text-white hover:border-white/30 hover:bg-white/15 shadow-[0_12px_30px_rgba(0,0,0,0.35)]\"\n          >\n            Abrir hub de Padel\n          </Link>\n        </div>\n\n        <div className=\"grid gap-4 md:grid-cols-[1.2fr_1fr]\">\n          <div className=\"space-y-3 rounded-2xl border border-white/12 bg-white/5 p-4 shadow-inner\">\n            <div className=\"flex items-center justify-between\">\n              <label className={`${labelClass} m-0`}>Clube</label>\n              <span className=\"rounded-full border border-white/15 bg-white/5 px-2 py-1 text-[11px] text-white/65\">\n                Courts ativos: {padelCourts?.items?.filter((c) => c.isActive).length ?? \"‚Äî\"} ¬∑ Selecionados: {selectedPadelCourtIds.length || \"‚Äî\"}\n              </span>\n            </div>\n            <select\n              className=\"w-full rounded-xl border border-white/15 bg-black/40 px-3 py-2 text-sm text-white/90 outline-none transition focus:border-[var(--orya-cyan)] focus:ring-2 focus:ring-[rgba(107,255,255,0.35)]\"\n              value={selectedPadelClubId ?? \"\"}\n              onChange={(e) => {\n                setLocationManuallySet(false);\n                setSelectedPadelClubId(Number(e.target.value) || null);\n              }}\n            >\n              <option value=\"\">Escolhe um clube</option>\n              {(padelClubs?.items || [])\n                .filter((c) => c.isActive)\n                .map((club) => (\n                  <option key={club.id} value={club.id}>\n                    {club.name} {club.city ? `‚Äî ${club.city}` : \"\"}\n                  </option>\n                ))}\n            </select>\n            {!padelClubs?.items?.length && (\n              <p className=\"text-[12px] text-white/60\">Adiciona um clube em Padel ‚Üí Clubes para continuar.</p>\n            )}\n          </div>\n\n          <div className=\"space-y-2\">\n            <label className={labelClass}>Courts (ativos)</label>\n            <div className=\"rounded-2xl border border-white/12 bg-white/[0.04] p-3 max-h-56 overflow-auto space-y-2 shadow-inner\">\n              {(padelCourts?.items || [])\n                .filter((c) => c.isActive)\n                .map((ct) => {\n                  const checked = selectedPadelCourtIds.includes(ct.id);\n                  return (\n                    <label\n                      key={ct.id}\n                      className={`flex items-center gap-2 rounded-lg border px-3 py-2 text-[12px] ${\n                        checked\n                          ? \"border-emerald-400/50 bg-emerald-500/10 text-emerald-50\"\n                          : \"border-white/15 bg-black/30 text-white/80\"\n                      } transition hover:border-[var(--orya-cyan)]/50`}\n                    >\n                      <input\n                        type=\"checkbox\"\n                        checked={checked}\n                        onChange={(e) =>\n                          setSelectedPadelCourtIds((prev) =>\n                            e.target.checked ? [...prev, ct.id] : prev.filter((id) => id !== ct.id),\n                          )\n                        }\n                        className=\"accent-white\"\n                      />\n                      <span>{ct.name}</span>\n                      <span className=\"text-[10px] text-white/50\">#{ct.displayOrder}</span>\n                    </label>\n                  );\n                })}\n              {!padelCourts?.items?.length && (\n                <p className=\"text-[12px] text-white/60\">Sem courts ativos neste clube.</p>\n              )}\n              {selectedPadelCourtIds.length === 0 && (padelCourts?.items?.length || 0) > 0 && (\n                <p className=\"text-[11px] text-red-200\">Seleciona pelo menos um court.</p>\n              )}\n            </div>\n          </div>\n        </div>\n\n        <div className=\"space-y-2\">\n          <label className={labelClass}>Staff herdado</label>\n          <div className=\"rounded-2xl border border-white/12 bg-white/[0.04] p-3 max-h-48 overflow-auto space-y-2 shadow-inner\">\n            {(padelStaff?.items || []).map((member) => {\n              const checked = selectedPadelStaffIds.includes(member.id);\n              return (\n                <label\n                  key={member.id}\n                  className={`flex items-center gap-2 rounded-lg border px-3 py-2 text-[12px] ${\n                    checked ? \"border-emerald-400/50 bg-emerald-500/10 text-emerald-50\" : \"border-white/15 bg-black/30 text-white/80\"\n                  } transition hover:border-[var(--orya-cyan)]/50`}\n                >\n                  <input\n                    type=\"checkbox\"\n                    checked={checked}\n                    onChange={(e) =>\n                      setSelectedPadelStaffIds((prev) =>\n                        e.target.checked ? [...prev, member.id] : prev.filter((id) => id !== member.id),\n                      )\n                    }\n                    className=\"accent-white\"\n                  />\n                  <span>{member.fullName || member.email || \"Staff\"}</span>\n                  {member.inheritToEvents && <span className=\"text-[10px] text-emerald-300\">herdado</span>}\n                </label>\n              );\n            })}\n            {!padelStaff?.items?.length && (\n              <p className=\"text-[12px] text-white/60\">Sem staff para herdar. Adiciona em Padel ‚Üí Clubes.</p>\n            )}\n          </div>\n        </div>\n      </div>\n    )}\n\n      <div className=\"space-y-1\">\n        <label className={labelClass}>Rua / morada (opcional)</label>\n        <input\n          type=\"text\"\n          value={address}\n          onChange={(e) => setAddress(e.target.value)}\n          className={inputClass(false)}\n          placeholder=\"Rua, n√∫mero ou complemento\"\n        />\n      </div>\n    </div>\n  );\n\n  const renderTicketsStep = () => (\n    <div ref={ticketsRef} className=\"space-y-5 animate-fade-slide\">\n      <div className=\"flex flex-col gap-3 rounded-2xl border border-white/12 bg-[rgba(14,14,20,0.7)] p-4 shadow-[0_14px_36px_rgba(0,0,0,0.45)]\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <p className={labelClass}>Modelo</p>\n            <p className=\"text-[12px] text-white/65\">Escolhe se √© pago ou gratuito. Copy adapta-se.</p>\n          </div>\n          <div className=\"inline-flex rounded-full border border-white/15 bg-black/40 p-1 text-[13px]\">\n            <button\n              type=\"button\"\n              onClick={() => setIsFreeEvent(false)}\n              className={`rounded-full px-3 py-1 font-semibold transition ${\n                !isFreeEvent ? \"bg-white text-black shadow\" : \"text-white/70\"\n              }`}\n            >\n              {isPadelContext ? \"Torneio pago\" : \"Evento pago\"}\n            </button>\n            <button\n              type=\"button\"\n              onClick={() => setIsFreeEvent(true)}\n              className={`rounded-full px-3 py-1 font-semibold transition ${\n                isFreeEvent ? \"bg-white text-black shadow\" : \"text-white/70\"\n              }`}\n            >\n              {isPadelContext ? \"Torneio gr√°tis\" : \"Evento gr√°tis\"}\n            </button>\n          </div>\n        </div>\n        <p className=\"text-[12px] text-white/55\">\n          {isPadelContext\n            ? \"Torneios pagos precisam de Stripe ligado e email oficial definido e verificado. Torneios gr√°tis focam-se em inscri√ß√µes e vagas.\"\n            : \"Eventos pagos precisam de Stripe ligado e email oficial definido e verificado. Eventos gr√°tis focam-se em inscri√ß√µes e vagas.\"}\n        </p>\n        {fieldErrors.tickets && (\n          <p className={errorTextClass}>\n            <span aria-hidden>‚ö†Ô∏è</span>\n            {fieldErrors.tickets}\n          </p>\n        )}\n        {paidTicketsBlocked && (\n          <div className=\"rounded-xl border border-amber-400/40 bg-amber-400/10 p-3 text-[12px] text-amber-50 space-y-2\">\n            <div className=\"flex items-center gap-2 text-sm font-semibold\">\n              <span aria-hidden>‚ö†Ô∏è</span>\n              <span>{isPadelContext ? \"S√≥ podes criar torneios gratuitos para j√°\" : \"S√≥ podes criar eventos gratuitos para j√°\"}</span>\n            </div>\n            <p className=\"text-amber-50/90\">\n              {paidTicketsBlockedMessage ??\n                (isPadelContext\n                  ? \"Liga o Stripe e verifica o email oficial da organiza√ß√£o para aceitar inscri√ß√µes pagas. At√© l√°, cria torneios gratuitos (pre√ßo = 0 ‚Ç¨).\"\n                  : \"Liga o Stripe e verifica o email oficial da organiza√ß√£o para vender bilhetes pagos. At√© l√°, cria eventos gratuitos (pre√ßo = 0 ‚Ç¨).\")}\n            </p>\n            <div className=\"flex flex-wrap gap-2\">\n              {stripeNotReady && (\n                <button\n                  type=\"button\"\n                  onClick={() => router.push(\"/organizador?tab=analyze&section=financas\")}\n                  className=\"rounded-full border border-white/30 px-3 py-1 text-[11px] font-semibold text-amber-50 hover:bg-white/10\"\n                >\n                  Abrir Finan√ßas & Payouts\n                </button>\n              )}\n              {needsOfficialEmailVerification && (\n                <button\n                  type=\"button\"\n                  onClick={() => router.push(\"/organizador/settings\")}\n                  className=\"rounded-full border border-white/30 px-3 py-1 text-[11px] font-semibold text-amber-50 hover:bg-white/10\"\n                >\n                  Definir / verificar email oficial\n                </button>\n              )}\n            </div>\n          </div>\n        )}\n      </div>\n\n      <div className=\"space-y-3 rounded-2xl border border-white/12 bg-[rgba(14,14,20,0.7)] p-4 shadow-[0_14px_36px_rgba(0,0,0,0.45)]\">\n        <div className=\"flex flex-wrap items-center justify-between gap-3\">\n          <div>\n            <p className={labelClass}>Acesso & participantes</p>\n            <p className=\"text-[12px] text-white/65\">\n              Por defeito, o {eventLabel} √© simples: {ticketLabel} pago ou entrada gratuita, sem separa√ß√£o de p√∫blico.\n            </p>\n          </div>\n          <button\n            type=\"button\"\n            onClick={() => setAdvancedAccessEnabled((prev) => !prev)}\n            className={`rounded-full border px-3 py-1 text-[12px] font-semibold transition ${\n              advancedAccessEnabled\n                ? \"border-emerald-400/60 bg-emerald-500/15 text-emerald-100\"\n                : \"border-white/20 bg-black/40 text-white/70\"\n            }`}\n          >\n            {advancedAccessEnabled ? \"Modo avan√ßado ativo\" : \"Ativar modo avan√ßado\"}\n          </button>\n        </div>\n\n        {!advancedAccessEnabled ? (\n          <div className=\"rounded-xl border border-white/10 bg-black/30 px-3 py-3 text-[12px] text-white/70\">\n            P√∫blico fica aberto e n√£o h√° distin√ß√£o de participantes. Se precisares de{\" \"}\n            {isPadelContext ? \"inscri√ß√µes pagas\" : \"bilhetes pagos\"} ou convites, ativa o modo avan√ßado.\n          </div>\n        ) : (\n          <>\n            <div className=\"flex flex-wrap items-center justify-between gap-3\">\n              <span className=\"rounded-full border border-white/20 bg-black/30 px-3 py-1 text-[12px] text-white/70\">\n                {publicAccessLabel} ¬∑ {participantAccessLabel}\n              </span>\n              <span className=\"rounded-full border border-white/20 bg-black/30 px-3 py-1 text-[12px] text-white/70\">\n                LiveHub {liveHubVisibility === \"PUBLIC\" ? \"P√∫blico\" : liveHubVisibility === \"PRIVATE\" ? \"Privado\" : \"Desativado\"}\n              </span>\n            </div>\n\n            <div className=\"grid gap-4 md:grid-cols-2\">\n              <div className=\"space-y-2\">\n                <p className={labelClass}>P√∫blico</p>\n                <div className=\"flex flex-wrap gap-2\">\n                  {([\n                    { value: \"OPEN\", label: \"Aberto\" },\n                    { value: \"TICKET\", label: `Por ${ticketLabel}` },\n                    { value: \"INVITE\", label: \"Por convite\" },\n                  ] as const).map((opt) => (\n                    <button\n                      key={opt.value}\n                      type=\"button\"\n                      onClick={() => setPublicAccessMode(opt.value)}\n                      className={`rounded-full border px-3 py-1 text-[12px] font-semibold transition ${\n                        publicAccessMode === opt.value\n                          ? \"border-emerald-400/60 bg-emerald-500/15 text-emerald-100\"\n                          : \"border-white/20 bg-black/40 text-white/70\"\n                      }`}\n                    >\n                      {opt.label}\n                    </button>\n                  ))}\n                </div>\n                {publicAccessMode === \"TICKET\" && (\n                  <div className=\"flex flex-wrap gap-2\">\n                    {([\n                      { value: \"ALL\", label: ticketLabelPluralAll },\n                      { value: \"SPECIFIC\", label: \"Tipos espec√≠ficos\" },\n                    ] as const).map((opt) => (\n                      <button\n                        key={`pub-scope-${opt.value}`}\n                        type=\"button\"\n                        onClick={() => setPublicTicketScope(opt.value)}\n                        className={`rounded-full border px-3 py-1 text-[11px] font-semibold transition ${\n                          publicTicketScope === opt.value\n                            ? \"border-emerald-400/60 bg-emerald-500/15 text-emerald-100\"\n                            : \"border-white/20 bg-black/40 text-white/70\"\n                        }`}\n                      >\n                        {opt.label}\n                      </button>\n                    ))}\n                  </div>\n                )}\n                {publicAccessMode === \"INVITE\" && (\n                  <p className=\"text-[12px] text-white/60\">\n                    A lista de convites do p√∫blico √© adicionada depois de criares o {eventLabel}.\n                  </p>\n                )}\n              </div>\n\n              <div className=\"space-y-2\">\n                <p className={labelClass}>Participantes</p>\n                <div className=\"flex flex-wrap gap-2\">\n                  {([\n                    { value: \"NONE\", label: \"Sem participantes\" },\n                    { value: \"INSCRIPTION\", label: \"Por inscri√ß√£o\" },\n                    { value: \"TICKET\", label: `Por ${ticketLabel}` },\n                    { value: \"INVITE\", label: \"Por convite\" },\n                  ] as const).map((opt) => (\n                    <button\n                      key={opt.value}\n                      type=\"button\"\n                      onClick={() => setParticipantAccessMode(opt.value)}\n                      className={`rounded-full border px-3 py-1 text-[12px] font-semibold transition ${\n                        participantAccessMode === opt.value\n                          ? \"border-sky-400/60 bg-sky-500/15 text-sky-100\"\n                          : \"border-white/20 bg-black/40 text-white/70\"\n                      }`}\n                    >\n                      {opt.label}\n                    </button>\n                  ))}\n                </div>\n                {participantAccessMode === \"TICKET\" && (\n                  <div className=\"flex flex-wrap gap-2\">\n                    {([\n                      { value: \"ALL\", label: ticketLabelPluralAll },\n                      { value: \"SPECIFIC\", label: \"Tipos espec√≠ficos\" },\n                    ] as const).map((opt) => (\n                      <button\n                        key={`part-scope-${opt.value}`}\n                        type=\"button\"\n                        onClick={() => setParticipantTicketScope(opt.value)}\n                        className={`rounded-full border px-3 py-1 text-[11px] font-semibold transition ${\n                          participantTicketScope === opt.value\n                            ? \"border-sky-400/60 bg-sky-500/15 text-sky-100\"\n                            : \"border-white/20 bg-black/40 text-white/70\"\n                        }`}\n                      >\n                        {opt.label}\n                      </button>\n                    ))}\n                  </div>\n                )}\n                {participantAccessMode === \"INVITE\" && (\n                  <p className=\"text-[12px] text-white/60\">\n                    A lista de convites de participantes √© adicionada depois de criares o {eventLabel}.\n                  </p>\n                )}\n              </div>\n            </div>\n\n            <div className=\"space-y-2\">\n              <p className={labelClass}>LiveHub</p>\n              <div className=\"flex flex-wrap gap-2\">\n                {([\n                  { value: \"PUBLIC\", label: \"P√∫blico\" },\n                  { value: \"PRIVATE\", label: \"Privado\" },\n                  { value: \"DISABLED\", label: \"Desativado\" },\n                ] as const).map((opt) => (\n                  <button\n                    key={`livehub-${opt.value}`}\n                    type=\"button\"\n                    onClick={() => setLiveHubVisibility(opt.value)}\n                    className={`rounded-full border px-3 py-1 text-[12px] font-semibold transition ${\n                      liveHubVisibility === opt.value\n                        ? \"border-fuchsia-400/60 bg-fuchsia-500/15 text-fuchsia-100\"\n                        : \"border-white/20 bg-black/40 text-white/70\"\n                    }`}\n                  >\n                    {opt.label}\n                  </button>\n                ))}\n              </div>\n              <p className=\"text-[12px] text-white/60\">\n                P√∫blico fica sempre acess√≠vel; privado mostra s√≥ a participantes; desativado oculta o LiveHub.\n              </p>\n            </div>\n\n            <div className=\"rounded-xl border border-white/12 bg-black/40 px-3 py-3 space-y-3\">\n              <p className=\"text-[11px] uppercase tracking-[0.22em] text-white/55\">Resumo r√°pido</p>\n              <div className=\"grid gap-3 md:grid-cols-2\">\n                <div className=\"rounded-lg border border-white/10 bg-black/20 px-3 py-2\">\n                  <p className=\"text-[11px] uppercase tracking-[0.2em] text-white/60\">P√∫blico</p>\n                  <p className=\"mt-1 text-sm font-semibold text-white\">{publicAccessLabel}</p>\n                  <p className=\"text-[12px] text-white/60\">{publicAccessDescription}</p>\n                </div>\n                <div className=\"rounded-lg border border-white/10 bg-black/20 px-3 py-2\">\n                  <p className=\"text-[11px] uppercase tracking-[0.2em] text-white/60\">Participantes</p>\n                  <p className=\"mt-1 text-sm font-semibold text-white\">{participantAccessLabel}</p>\n                  <p className=\"text-[12px] text-white/60\">{participantAccessDescription}</p>\n                </div>\n              </div>\n              {accessNotes.length > 0 && (\n                <div className=\"rounded-lg border border-amber-400/40 bg-amber-400/10 px-3 py-2 text-[12px] text-amber-50\">\n                  <p className=\"font-semibold\">Notas</p>\n                  <div className=\"mt-1 space-y-1 text-amber-50/90\">\n                    {accessNotes.map((note) => (\n                      <p key={note}>‚Ä¢ {note}</p>\n                    ))}\n                  </div>\n                </div>\n              )}\n            </div>\n          </>\n        )}\n      </div>\n\n      {isFreeEvent ? (\n        <div className=\"space-y-3 rounded-2xl border border-white/12 bg-gradient-to-br from-white/6 via-[#0c1426]/65 to-[#050a14]/88 p-4 shadow-[0_16px_60px_rgba(0,0,0,0.45)]\">\n          <div className=\"flex items-center justify-between\">\n            <p className={labelClass}>{isPadelContext ? \"Inscri√ß√µes gratuitas\" : \"Bilhetes gratuitos\"}</p>\n            <span className=\"rounded-full border border-emerald-300/40 bg-emerald-400/10 px-3 py-1 text-[12px] text-emerald-50\">\n              Sem taxas\n            </span>\n          </div>\n          <div className=\"grid gap-3 md:grid-cols-2\">\n            <div className=\"space-y-1\">\n              <label className={labelClass}>\n                {isPadelContext ? \"Nome da inscri√ß√£o\" : \"Nome do bilhete\"}\n              </label>\n              <input\n                type=\"text\"\n                value={freeTicketName}\n                onChange={(e) => setFreeTicketName(e.target.value)}\n                className={inputClass(false)}\n                placeholder={isPadelContext ? \"Inscri√ß√£o geral, equipa‚Ä¶\" : \"Bilhete geral, VIP‚Ä¶\"}\n              />\n            </div>\n            <div className=\"space-y-1\">\n              <label className={labelClass}>Capacidade (opcional)</label>\n              <input\n                type=\"number\"\n                min={0}\n                value={freeCapacity}\n                onChange={(e) => setFreeCapacity(e.target.value)}\n                className={inputClass(false)}\n                placeholder=\"Ex.: 64\"\n              />\n            </div>\n          </div>\n          <p className=\"text-[12px] text-white/60\">\n            S√≥ precisas disto para registar vagas. Podes abrir inscri√ß√µes avan√ßadas (equipas, rankings) no passo Padel.\n          </p>\n        </div>\n      ) : (\n        <div className=\"space-y-4 rounded-2xl border border-white/12 bg-gradient-to-br from-white/6 via-[#0c1426]/65 to-[#050a14]/88 p-4 shadow-[0_16px_60px_rgba(0,0,0,0.45)]\">\n          <div className=\"flex flex-wrap items-center justify-between gap-2\">\n            <h2 className={labelClass}>{ticketLabelPluralTitle}</h2>\n            <button\n              type=\"button\"\n              onClick={handleAddTicketType}\n              className=\"inline-flex items-center rounded-full border border-white/20 bg-black/25 px-3 py-1 text-[13px] font-semibold hover:border-white/35 hover:bg-white/5 transition\"\n            >\n              + Adicionar {ticketLabel}\n            </button>\n          </div>\n\n          <div className=\"grid gap-3\">\n            {ticketTypes.map((row, idx) => {\n              const parsed = Number((row.price ?? \"0\").toString().replace(\",\", \".\"));\n              const priceEuro = Number.isFinite(parsed) ? parsed : 0;\n              const preview = computeFeePreview(priceEuro, feeMode, platformFees, stripeFees);\n              const combinedFeeCents = preview.combinedFeeCents ?? preview.feeCents + preview.stripeFeeCents;\n              return (\n                <div\n                  key={idx}\n                  className=\"space-y-3 rounded-xl border border-white/12 bg-gradient-to-br from-white/6 via-[#0c1728]/60 to-[#050912]/85 p-3 shadow-[0_14px_40px_rgba(0,0,0,0.45)] animate-step-pop\"\n                >\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"inline-flex items-center gap-2 rounded-full border border-white/20 bg-white/10 px-3 py-1 text-[11px] uppercase tracking-[0.12em] text-white/75\">\n                      <span aria-hidden className=\"text-[#6BFFFF]\">üéüÔ∏è</span>\n                      {ticketLabelTitle} {idx + 1}\n                    </span>\n                    {ticketTypes.length > 1 && (\n                      <button\n                        type=\"button\"\n                        onClick={() => handleRemoveTicketType(idx)}\n                        className=\"text-[11px] text-white/60 hover:text-white/90\"\n                      >\n                        Remover\n                      </button>\n                    )}\n                  </div>\n                  <div className=\"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between\">\n                    <div className=\"space-y-1 flex-1\">\n                      <label className={labelClass}>\n                        {isPadelContext ? \"Nome da inscri√ß√£o\" : \"Nome do bilhete\"} <span aria-hidden>*</span>\n                      </label>\n                      <input\n                        type=\"text\"\n                        value={row.name}\n                        onChange={(e) => handleTicketChange(idx, \"name\", e.target.value)}\n                        className={inputClass(false)}\n                        placeholder=\"Early bird, Geral, VIP\"\n                      />\n                    </div>\n                  </div>\n\n                  <div className=\"grid grid-cols-1 gap-3 sm:grid-cols-3\">\n                    <div className=\"space-y-1\">\n                      <label className={labelClass}>\n                        Pre√ßo (‚Ç¨) <span aria-hidden>*</span>\n                      </label>\n                      <input\n                        type=\"number\"\n                        min={isFreeEvent ? 0 : 1}\n                        step=\"0.01\"\n                        value={row.price}\n                        onChange={(e) => handleTicketChange(idx, \"price\", e.target.value)}\n                        className={inputClass(false)}\n                        placeholder=\"Ex.: 12.50\"\n                      />\n                      <p className=\"text-[12px] text-white/55\">Em {eventLabelPlural} pagos, o pre√ßo m√≠nimo √© 1,00 ‚Ç¨.</p>\n                    </div>\n                    <div className=\"space-y-1\">\n                      <label className={labelClass}>Capacidade (opcional)</label>\n                      <input\n                        type=\"number\"\n                        min={0}\n                        value={row.totalQuantity}\n                        onChange={(e) => handleTicketChange(idx, \"totalQuantity\", e.target.value)}\n                        className={inputClass(false)}\n                        placeholder=\"Ex.: 100\"\n                      />\n                    </div>\n                    <div className=\"space-y-1\">\n                      <p className=\"text-[12px] font-semibold text-white/75\">Pr√©-visualiza√ß√£o</p>\n                      <div className=\"text-[12px] rounded-lg border border-white/10 bg-black/25 px-3 py-2 text-white/85\">\n                        <p>Cliente: {(preview.totalCliente / 100).toFixed(2)} ‚Ç¨</p>\n                        <p>Recebes (estimado): {(preview.recebeOrganizador / 100).toFixed(2)} ‚Ç¨</p>\n                        <p className=\"text-white/50\">Taxa da plataforma: {(combinedFeeCents / 100).toFixed(2)} ‚Ç¨</p>\n                      </div>\n                    </div>\n                  </div>\n\n                  {advancedAccessEnabled &&\n                    ((publicAccessMode === \"TICKET\" && publicTicketScope === \"SPECIFIC\") ||\n                      (participantAccessMode === \"TICKET\" && participantTicketScope === \"SPECIFIC\")) && (\n                      <div className=\"flex flex-wrap items-center gap-3 rounded-lg border border-white/10 bg-black/30 px-3 py-2 text-[12px] text-white/75\">\n                        <span className=\"text-[11px] uppercase tracking-[0.18em] text-white/60\">\n                          {isPadelContext ? \"Esta inscri√ß√£o d√° acesso a\" : \"Este bilhete d√° acesso a\"}\n                        </span>\n                        {publicAccessMode === \"TICKET\" && publicTicketScope === \"SPECIFIC\" && (\n                          <label className=\"flex items-center gap-2\">\n                            <input\n                              type=\"checkbox\"\n                              checked={Boolean(row.publicAccess)}\n                              onChange={() => toggleTicketFlag(idx, \"publicAccess\")}\n                            />\n                            <span>P√∫blico</span>\n                          </label>\n                        )}\n                        {participantAccessMode === \"TICKET\" && participantTicketScope === \"SPECIFIC\" && (\n                          <label className=\"flex items-center gap-2\">\n                            <input\n                              type=\"checkbox\"\n                              checked={Boolean(row.participantAccess)}\n                              onChange={() => toggleTicketFlag(idx, \"participantAccess\")}\n                            />\n                            <span>Participante</span>\n                          </label>\n                        )}\n                      </div>\n                    )}\n                </div>\n              );\n            })}\n          </div>\n\n          <div className=\"space-y-2\">\n            <p className={labelClass}>Modo de taxas</p>\n            <div className=\"inline-flex rounded-full border border-white/15 bg-black/40 p-1 text-[13px]\">\n              <button\n                type=\"button\"\n                onClick={() => setFeeMode(\"ADDED\")}\n                className={`rounded-full px-3 py-1 font-semibold transition ${\n                  feeMode === \"ADDED\" ? \"bg-white text-black shadow\" : \"text-white/70\"\n                }`}\n              >\n                Cliente paga taxa\n              </button>\n              <button\n                type=\"button\"\n                onClick={() => setFeeMode(\"INCLUDED\")}\n                className={`rounded-full px-3 py-1 font-semibold transition ${\n                  feeMode === \"INCLUDED\" ? \"bg-white text-black shadow\" : \"text-white/70\"\n                }`}\n              >\n                Pre√ßo inclui taxas\n              </button>\n            </div>\n            <p className=\"text-[12px] text-white/55\">\n              Podes ajustar depois no resumo. Para {eventLabelPlural} de plataforma, a taxa ORYA √© zero.\n            </p>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n\n  const renderReviewStep = () => {\n    const previewTickets = buildTicketsPayload();\n    const presetLabel =\n      selectedPreset === \"padel\"\n        ? \"Padel / Torneio\"\n        : selectedPreset === \"voluntariado\"\n          ? \"Voluntariado\"\n          : \"Evento\";\n    const presetDesc =\n      selectedPreset === \"padel\"\n        ? \"Wizard Padel ativo\"\n        : selectedPreset === \"voluntariado\"\n          ? \"Fluxo focado em participacao e impacto\"\n          : \"Fluxo base com tudo o que precisas\";\n    const pendingIssues = collectStepErrors(\"all\");\n    const pendingLabel = pendingIssues.length === 0 ? \"Campos ok\" : `Falta corrigir ${pendingIssues.length}`;\n    return (\n      <div className=\"space-y-4 animate-fade-slide\">\n        <div className=\"rounded-2xl border border-white/12 bg-gradient-to-br from-white/6 via-[#0c1426]/65 to-[#050912]/88 p-4 space-y-4 shadow-[0_18px_60px_rgba(0,0,0,0.5)]\">\n          <div className=\"flex items-start justify-between gap-3\">\n            <div className=\"space-y-1\">\n              <p className={labelClass}>Revis√£o final</p>\n              <p className=\"text-white/70 text-sm\">Tudo pronto. Rev√™ os detalhes antes de publicar.</p>\n            </div>\n            <div className=\"flex flex-col items-end gap-1 text-right\">\n              <span className=\"text-[11px] uppercase tracking-[0.18em] text-white/55\">Passo 5/5</span>\n              <span className=\"btn-chip bg-white/10 text-white/90\">{pendingLabel}</span>\n            </div>\n          </div>\n          <div className=\"grid grid-cols-1 gap-3 md:grid-cols-2\">\n            <div className=\"rounded-xl border border-white/12 bg-gradient-to-br from-white/6 via-[#0b1020]/65 to-[#060912]/85 p-3 shadow-[0_12px_38px_rgba(0,0,0,0.45)] transition hover:border-white/25 hover:shadow-[0_16px_48px_rgba(0,0,0,0.55)]\">\n              <div className=\"flex items-start justify-between gap-3\">\n                <div>\n                  <p className={`${labelClass} gap-2`}>\n                    <span aria-hidden className=\"text-[#6BFFFF]\">‚ú®</span>\n                    Essenciais\n                  </p>\n                  <p className=\"font-semibold text-white\">{title || \"Sem t√≠tulo\"}</p>\n                </div>\n                <button\n                  type=\"button\"\n                  onClick={() => focusField(\"title\")}\n                  className=\"btn-chip\"\n                >\n                  Editar\n                </button>\n              </div>\n              <div className=\"mt-2 flex items-center gap-3\">\n                <div className=\"h-16 w-24 overflow-hidden rounded-lg border border-white/10 bg-gradient-to-br from-[#161623] via-[#0c0c18] to-[#241836] text-[11px] text-white/60\">\n                  {coverUrl ? (\n                    // eslint-disable-next-line @next/next/no-img-element\n                    <img src={coverUrl} alt=\"Capa\" className=\"h-full w-full object-cover\" />\n                  ) : (\n                    <div className=\"flex h-full w-full items-center justify-center text-[11px] text-white/60\">\n                      Sem imagem\n                    </div>\n                  )}\n                </div>\n                <p className=\"text-sm text-white/70 line-clamp-3\">{description || \"Sem descri√ß√£o\"}</p>\n              </div>\n            </div>\n\n            <div className=\"rounded-xl border border-white/12 bg-gradient-to-br from-white/6 via-[#0b1020]/65 to-[#060912]/85 p-3 shadow-[0_12px_38px_rgba(0,0,0,0.45)] transition hover:border-white/25 hover:shadow-[0_16px_48px_rgba(0,0,0,0.55)]\">\n              <div className=\"flex items-start justify-between gap-3\">\n                <div>\n                  <p className={`${labelClass} gap-2`}>\n                    <span aria-hidden className=\"text-[#AEE4FF]\">üìÖ</span>\n                    Datas\n                  </p>\n                  <p className=\"font-semibold text-white\">\n                    {locationName || \"Local a definir\"} ¬∑ {locationCity || \"Cidade a definir\"}\n                  </p>\n                </div>\n                <button\n                  type=\"button\"\n                  onClick={() => focusField(\"startsAt\")}\n                  className=\"btn-chip\"\n                >\n                  Editar\n                </button>\n              </div>\n              <p className=\"text-sm text-white/70\">\n                {startsAt ? new Date(startsAt).toLocaleString() : \"In√≠cio por definir\"}{\" \"}\n                {endsAt ? `‚Üí ${new Date(endsAt).toLocaleString()}` : \"\"}\n              </p>\n              {address && (\n                <p className=\"text-[12px] text-white/60 flex items-center gap-2\">\n                  <span aria-hidden className=\"text-white/60\">üìç</span>\n                  {address}\n                </p>\n              )}\n            </div>\n\n            <div className=\"rounded-xl border border-white/12 bg-gradient-to-br from-white/6 via-[#0b1020]/65 to-[#060912]/85 p-3 shadow-[0_12px_38px_rgba(0,0,0,0.45)] transition hover:border-white/25 hover:shadow-[0_16px_48px_rgba(0,0,0,0.55)]\">\n              <div className=\"flex items-start justify-between gap-3\">\n                <div>\n                  <p className={`${labelClass} gap-2`}>\n                    <span aria-hidden className=\"text-[#6BFFFF]\">üéüÔ∏è</span>\n                    {ticketLabelPluralTitle}\n                  </p>\n                  <p className=\"font-semibold text-white\">\n                    {isFreeEvent\n                      ? `Vagas: ${freeCapacity ? freeCapacity : \"sem limite\"}`\n                      : `${previewTickets.length} tipo${previewTickets.length === 1 ? \"\" : \"s\"} de ${ticketLabel}`}\n                  </p>\n                </div>\n                <button\n                  type=\"button\"\n                  onClick={() => focusField(\"tickets\")}\n                  className=\"btn-chip\"\n                >\n                  Editar\n                </button>\n              </div>\n              {!isFreeEvent && (\n                <ul className=\"mt-2 space-y-1 text-sm text-white/70\">\n                  {previewTickets.map((t) => (\n                    <li key={`${t.name}-${t.price}`} className=\"flex items-center justify-between gap-2\">\n                      <span>{t.name}</span>\n                      <span className=\"text-white/60\">{t.price.toFixed(2)} ‚Ç¨</span>\n                    </li>\n                  ))}\n                </ul>\n              )}\n              {isFreeEvent && <p className=\"text-sm text-white/70\">Entrada gratuita com {ticketLabelPlural} simples.</p>}\n            </div>\n\n            <div className=\"rounded-xl border border-white/12 bg-gradient-to-br from-white/6 via-[#0b1020]/65 to-[#060912]/85 p-3 shadow-[0_12px_38px_rgba(0,0,0,0.45)] transition hover:border-white/25 hover:shadow-[0_16px_48px_rgba(0,0,0,0.55)]\">\n              <div className=\"flex items-start justify-between gap-3\">\n                <div>\n                  <p className={`${labelClass} gap-2`}>\n                    <span aria-hidden className=\"text-[#AEE4FF]\">üõ°Ô∏è</span>\n                    Modelo\n                  </p>\n                  <p className=\"font-semibold text-white\">\n                    {isFreeEvent ? (isPadelContext ? \"Torneio gr√°tis\" : \"Evento gr√°tis\") : isPadelContext ? \"Torneio pago\" : \"Evento pago\"}\n                  </p>\n                </div>\n                <button\n                  type=\"button\"\n                  onClick={() => focusField(\"preset\")}\n                  className=\"btn-chip\"\n                >\n                  Editar\n                </button>\n              </div>\n              <p className=\"text-sm text-white/70\">Formato: {presetLabel}</p>\n              <p className=\"text-[12px] text-white/60\">{presetDesc}</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  return (\n    <form\n      noValidate\n      onSubmit={(e) => {\n        e.preventDefault();\n        goNext();\n      }}\n      className=\"relative w-full space-y-6 px-4 py-8 text-white md:px-6 lg:px-8\"\n    >\n      <div className=\"relative overflow-hidden rounded-[28px] border border-white/12 bg-gradient-to-br from-white/8 via-[#0b1124]/70 to-[#050810]/92 p-5 shadow-[0_32px_110px_rgba(0,0,0,0.6)] backdrop-blur-3xl\">\n        <div className=\"pointer-events-none absolute inset-0 bg-[linear-gradient(135deg,rgba(255,255,255,0.12),transparent_35%),linear-gradient(225deg,rgba(255,255,255,0.08),transparent_40%)]\" />\n        <div className=\"relative flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between\">\n          <div className=\"space-y-1\">\n            <div className=\"inline-flex items-center gap-2 rounded-full border border-white/20 bg-white/10 px-3 py-1 text-[11px] uppercase tracking-[0.26em] text-white/80 shadow-[0_10px_30px_rgba(0,0,0,0.4)]\">\n              <span aria-hidden className=\"text-[#6BFFFF]\">‚ú®</span>\n              {isPadelContext ? \"Novo torneio de padel\" : \"Novo evento\"}\n            </div>\n            <h1 className=\"text-3xl font-semibold tracking-tight drop-shadow-[0_10px_40px_rgba(0,0,0,0.55)]\">\n              {isPadelContext ? \"Cria o teu torneio de padel\" : \"Cria o teu evento\"}\n            </h1>\n            <p className=\"text-sm text-white/70\">Fluxo premium com autosave, feedback imediato e vidro colorido.</p>\n          </div>\n          <div className=\"flex flex-wrap items-center gap-2 text-[11px]\">\n            <Link\n              href=\"/organizador?tab=manage\"\n              className={CTA_SECONDARY}\n            >\n              Voltar\n            </Link>\n            <button\n              type=\"button\"\n              onClick={saveDraft}\n              className={CTA_SECONDARY}\n            >\n              Guardar rascunho\n            </button>\n            {draftSavedAt && (\n              <span className=\"rounded-full border border-white/15 bg-white/10 px-3 py-1 text-white/75\">\n                Guardado h√° pouco\n              </span>\n            )}\n          </div>\n        </div>\n      </div>\n\n        <div className=\"relative overflow-hidden rounded-3xl border border-white/12 bg-gradient-to-br from-white/6 via-[#0b0f1f]/82 to-[#05070f]/94 p-5 md:p-6 space-y-6 shadow-[0_32px_110px_rgba(0,0,0,0.6)]\">\n        <div className=\"pointer-events-none absolute inset-0 bg-[linear-gradient(120deg,rgba(255,255,255,0.08),transparent_32%),linear-gradient(240deg,rgba(255,255,255,0.06),transparent_36%)]\" />\n        <div className=\"relative pb-2\">\n          <StepperDots\n            steps={wizardSteps}\n            current={currentWizardStepId}\n            maxUnlockedIndex={Math.max(maxStepReached, currentStep)}\n            onGoTo={(id) => {\n              const idx = wizardSteps.findIndex((s) => s.id === id);\n              const maxClickable = Math.max(maxStepReached, currentStep);\n              if (idx >= 0 && idx <= maxClickable) setCurrentStep(idx);\n            }}\n          />\n        </div>\n\n        {errorSummary.length > 0 && (\n          <div\n            ref={errorSummaryRef}\n            tabIndex={-1}\n            className=\"rounded-xl border border-amber-400/40 bg-amber-500/10 p-3 text-sm text-amber-50 focus:outline-none focus:ring-2 focus:ring-amber-200/70\"\n            aria-live=\"assertive\"\n          >\n            <div className=\"flex items-center gap-2 font-semibold\">\n              <span aria-hidden>‚ö†Ô∏è</span>\n              <span>Rev√™ estes campos antes de continuar</span>\n            </div>\n            <ul className=\"mt-2 space-y-1 text-[13px]\">\n              {errorSummary.map((err) => (\n                <li key={`${err.field}-${err.message}`}>\n                  <button\n                    type=\"button\"\n                    onClick={() => focusField(err.field)}\n                    className=\"inline-flex items-center gap-2 text-left font-semibold text-white underline decoration-pink-200 underline-offset-4 hover:text-pink-50\"\n                  >\n                    <span aria-hidden>‚Üò</span>\n                    <span>{err.message}</span>\n                  </button>\n                </li>\n              ))}\n            </ul>\n          </div>\n        )}\n\n        <div className=\"relative overflow-hidden rounded-2xl border border-white/12 bg-gradient-to-br from-white/6 via-[#0b1224]/70 to-[#04060f]/90 p-4 md:p-5 min-h-[420px] md:min-h-[460px] shadow-[0_18px_70px_rgba(0,0,0,0.5)]\">\n          <section\n            key={activeStepKey}\n            className={direction === \"right\" ? \"wizard-step-in-right\" : \"wizard-step-in-left\"}\n          >\n            {activeStepKey === \"preset\" && renderPresetStep()}\n            {activeStepKey === \"details\" && renderDetailsStep()}\n            {activeStepKey === \"schedule\" && renderScheduleStep()}\n            {activeStepKey === \"tickets\" && renderTicketsStep()}\n            {activeStepKey === \"review\" && renderReviewStep()}\n          </section>\n        </div>\n\n        <div ref={ctaAlertRef} className=\"space-y-3\">\n          {stripeAlert && (\n            <FormAlert\n              variant={hasPaidTicket ? \"error\" : \"warning\"}\n              title=\"Conclui os passos para vender\"\n              message={stripeAlert}\n              actionLabel=\"Abrir Finan√ßas & Payouts\"\n              onAction={() => router.push(\"/organizador?tab=analyze&section=financas\")}\n            />\n          )}\n          {validationAlert && <FormAlert variant=\"warning\" message={validationAlert} />}\n          {errorMessage && <FormAlert variant=\"error\" message={errorMessage} />}\n          {backendAlert && (\n            <FormAlert\n              variant=\"error\"\n              title={`Algo correu mal ao guardar o ${eventLabel}`}\n              message={backendAlert}\n            />\n          )}\n        </div>\n\n        <FlowStickyFooter\n          backLabel=\"Anterior\"\n          nextLabel={\n            currentStep === stepOrder.length - 1\n              ? isPadelContext\n                ? \"Criar torneio de padel\"\n                : \"Criar evento\"\n              : \"Continuar\"\n          }\n          helper={\n            activeStepKey === \"tickets\"\n              ? isFreeEvent\n                ? isPadelContext\n                  ? \"Inscri√ß√µes sem taxas; capacidade √© opcional.\"\n                  : \"Bilhetes sem taxas; capacidade √© opcional.\"\n                : paidTicketsBlocked\n                  ? paidTicketsBlockedMessage ??\n                    (isPadelContext\n                      ? \"Torneios pagos precisam de Stripe ligado e email oficial verificado.\"\n                      : \"Eventos pagos precisam de Stripe ligado e email oficial verificado.\")\n                  : isPadelContext\n                    ? \"Define pre√ßos, taxas e capacidade das inscri√ß√µes.\"\n                    : \"Define pre√ßos, taxas e capacidade dos bilhetes.\"\n              : activeStepKey === \"review\"\n                ? \"Confirma blocos, edita no passo certo e cria com confian√ßa.\"\n                : \"Navega sem perder contexto; feedback sempre vis√≠vel.\"\n          }\n          disabledReason={nextDisabledReason}\n          loading={isSubmitting}\n          loadingLabel={currentStep === stepOrder.length - 1 ? \"A criar...\" : \"A processar...\"}\n          showLoadingHint={showLoadingHint}\n          disableBack={currentStep === 0}\n          onBack={goPrev}\n          onNext={goNext}\n        />\n      </div>\n\n      {creationSuccess && (\n        <div className=\"fixed bottom-6 right-6 z-[var(--z-popover)] w-[320px] max-w-full rounded-2xl border border-emerald-400/50 bg-emerald-500/15 p-4 shadow-[0_18px_45px_rgba(0,0,0,0.55)] text-emerald-50\">\n          <div className=\"flex items-start justify-between gap-2\">\n            <div>\n              <p className=\"text-sm font-semibold\">\n                {isPadelContext ? \"Torneio de padel criado\" : \"Evento criado\"}\n              </p>\n              <p className=\"text-[13px] text-emerald-50/85\">Escolhe o pr√≥ximo passo ou cria outro.</p>\n            </div>\n            <button\n              type=\"button\"\n              onClick={() => setCreationSuccess(null)}\n              className=\"text-[12px] text-emerald-50/80 hover:text-white\"\n              aria-label=\"Fechar alerta de cria√ß√£o\"\n            >\n              ‚úï\n            </button>\n          </div>\n          <div className=\"mt-3 flex flex-wrap gap-2 text-[12px]\">\n            {creationSuccess.slug && (\n              <Link\n                href={`/eventos/${creationSuccess.slug}`}\n                className=\"rounded-full border border-emerald-200/60 bg-emerald-500/15 px-3 py-1 font-semibold text-white hover:bg-emerald-500/25\"\n              >\n                Ver p√°gina p√∫blica\n              </Link>\n            )}\n            {creationSuccess.eventId && (\n              <Link\n                href={`/organizador/eventos/${creationSuccess.eventId}`}\n                className=\"rounded-full border border-emerald-200/60 bg-emerald-500/15 px-3 py-1 font-semibold text-white hover:bg-emerald-500/25\"\n              >\n                {isPadelContext ? \"Editar torneio\" : \"Editar evento\"}\n              </Link>\n            )}\n            <button\n              type=\"button\"\n              onClick={resetForm}\n              className=\"rounded-full border border-white/25 px-3 py-1 font-semibold text-white hover:bg-white/10\"\n            >\n              {isPadelContext ? \"Criar outro torneio\" : \"Criar outro evento\"}\n            </button>\n          </div>\n        </div>\n      )}\n\n      {toasts.length > 0 && (\n        <div className=\"pointer-events-none fixed bottom-6 right-6 z-[var(--z-popover)] flex flex-col gap-2\">\n          {toasts.map((toast) => (\n            <div\n              key={toast.id}\n              className={`pointer-events-auto min-w-[240px] rounded-lg border px-4 py-3 text-sm shadow-lg ${\n                toast.tone === \"success\"\n                  ? \"border-emerald-400/50 bg-emerald-500/15 text-emerald-50\"\n                  : \"border-red-400/50 bg-red-500/15 text-red-50\"\n              }`}\n            >\n              {toast.message}\n            </div>\n          ))}\n        </div>\n      )}\n    </form>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAbA;;;;;;;;;;;;;;AAgCA,MAAM,YAAY;AAElB,MAAM,gCAAgC,CAAC;IACrC,MAAM,aAAa,UAAU,iBAAiB;IAC9C,IAAI,eAAe,SAAS,OAAO;IACnC,IAAI,eAAe,gBAAgB,OAAO;IAC1C,OAAO;AACT;AAEA,MAAM,mBAAmB;IACvB;QACE,KAAK;QACL,OAAO;QACP,OAAO;QACP,QAAQ;QACR,MAAM;QACN,YAAY;YAAC;SAAQ;IACvB;IACA;QACE,KAAK;QACL,OAAO;QACP,OAAO;QACP,QAAQ;QACR,MAAM;QACN,YAAY;YAAC;SAAe;IAC9B;IACA;QACE,KAAK;QACL,OAAO;QACP,OAAO;QACP,QAAQ;QACR,MAAM;QACN,YAAY;YAAC;SAAQ;IACvB;CACD;AAED,MAAM,2BAA2B,KAAK,KAAK;AAC3C,MAAM,mCAAmC,IAAI,QAAQ;AACrD,MAAM,yBAAyB,KAAK,OAAO;AAC3C,MAAM,iCAAiC,IAAI,QAAQ;AAUnD,MAAM,UAAU,CAAC,MAAgB,MAAM,KAAK,IAAI,CAAC,CAAC,MAAQ,IAAI,IAAI;AA8BlE,SAAS,kBACP,SAAiB,EACjB,IAAqC,EACrC,YAAuD,EACvD,UAAqD;IAErD,MAAM,YAAY,KAAK,KAAK,CAAC,KAAK,GAAG,CAAC,GAAG,aAAa;IACtD,MAAM,WAAW,IAAA,kIAAmB,EAAC;QACnC,aAAa;QACb,eAAe;QACf,SAAS;QACT,gBAAgB,aAAa,MAAM;QACnC,uBAAuB,aAAa,aAAa;QACjD,cAAc,WAAW,MAAM;QAC/B,qBAAqB,WAAW,aAAa;IAC/C;IACA,MAAM,oBAAoB,KAAK,GAAG,CAAC,GAAG,SAAS,UAAU,GAAG,SAAS,YAAY,GAAG,SAAS,sBAAsB;IACnH,OAAO;QACL;QACA,UAAU,SAAS,YAAY;QAC/B,cAAc,SAAS,UAAU;QACjC;QACA,gBAAgB,SAAS,sBAAsB;QAC/C,kBAAkB,SAAS,gBAAgB;IAC7C;AACF;AAEe,SAAS;IACtB,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,eAAe,IAAA,qJAAe;IACpC,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,WAAW,aAAa,EAAE,GAAG,IAAA,kIAAO;IAC3D,MAAM,EAAE,SAAS,EAAE,GAAG,IAAA,0KAAY;IAClC,MAAM,EAAE,MAAM,eAAe,EAAE,GAAG,IAAA,yKAAM,EAAsB,sBAAsB,SAAS;QAC3F,mBAAmB;IACrB;IACA,MAAM,EAAE,MAAM,eAAe,EAAE,GAAG,IAAA,yKAAM,EAatC,OAAO,wBAAwB,MAC/B,SACA;QAAE,mBAAmB;IAAM;IAE7B,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IACnC,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IACzC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC;IACrC,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC;IACjD,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAS,yIAAS,CAAC,EAAE;IACrE,MAAM,CAAC,qBAAqB,uBAAuB,GAAG,IAAA,iNAAQ,EAAC;IAC/D,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAkB;QAAC;YAAE,MAAM;YAAS,OAAO;YAAI,eAAe;QAAG;KAAE;IACjH,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAuB;IAC7D,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAgB;IACxD,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAC;IACrD,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC;IACrC,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAgB;IACpE,MAAM,mBAAmB,iBAAiB,WAAW,wBAAwB;IAC7E,MAAM,cAAc,8BAA8B;IAClD,MAAM,aAAa,gBAAgB;IACnC,MAAM,gBAAgB,mBAAmB;IACzC,MAAM,iBAAiB,cAAc;IACrC,MAAM,iBAAiB,kBAAkB,CAAC,aAAa,UAAU,IAAI;IACrE,MAAM,aAAa,iBAAiB,qBAAqB;IACzD,MAAM,mBAAmB,iBAAiB,sBAAsB;IAChE,MAAM,cAAc,iBAAiB,cAAc;IACnD,MAAM,oBAAoB,iBAAiB,eAAe;IAC1D,MAAM,mBAAmB,iBAAiB,cAAc;IACxD,MAAM,yBAAyB,iBAAiB,eAAe;IAC/D,MAAM,wBAAwB,iBAAiB,kBAAkB;IACjE,MAAM,uBAAuB,iBAAiB,wBAAwB;IACtE,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,CAAC,uBAAuB,yBAAyB,GAAG,IAAA,iNAAQ,EAAC;IACnE,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,iNAAQ,EAAmB;IAC3E,MAAM,CAAC,uBAAuB,yBAAyB,GAAG,IAAA,iNAAQ,EAAwB;IAC1F,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,iNAAQ,EAAc;IACxE,MAAM,CAAC,wBAAwB,0BAA0B,GAAG,IAAA,iNAAQ,EAAc;IAClF,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,iNAAQ,EAAoB;IAC9E,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAC;IACrD,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC;IACjD,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAC;IACrD,MAAM,CAAC,qBAAqB,uBAAuB,GAAG,IAAA,iNAAQ,EAAgB;IAC9E,MAAM,CAAC,uBAAuB,yBAAyB,GAAG,IAAA,iNAAQ,EAAW,EAAE;IAC/E,MAAM,CAAC,uBAAuB,yBAAyB,GAAG,IAAA,iNAAQ,EAAW,EAAE;IAE/E,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC;IACjD,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,iNAAQ,EAAC;IACvD,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAgB;IAChE,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAgB;IAC9D,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,iNAAQ,EAAgB;IACtE,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAgB;IAChE,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAgB;IAChE,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAU,EAAE;IAChD,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAoC,CAAC;IACnF,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAyC,EAAE;IAC3F,MAAM,CAAC,yBAAyB,2BAA2B,GAAG,IAAA,iNAAQ,EAAC;IACvE,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,iNAAQ,EAAkB;IAC5E,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,iNAAQ,EAA6C;IACnG,MAAM,mBAAmB,IAAA,+MAAM,EAAC;IAEhC,MAAM,cAAc,IAAA,+MAAM,EAAwB;IAClD,MAAM,kBAAkB,IAAA,+MAAM,EAAwB;IACtD,MAAM,WAAW,IAAA,+MAAM,EAA0B;IACjD,MAAM,YAAY,IAAA,+MAAM,EAAwB;IAChD,MAAM,UAAU,IAAA,+MAAM,EAAwB;IAC9C,MAAM,kBAAkB,IAAA,+MAAM,EAA0B;IACxD,MAAM,UAAU,IAAA,+MAAM,EAA0B;IAChD,MAAM,aAAa,IAAA,+MAAM,EAAwB;IACjD,MAAM,wBAAwB,IAAA,+MAAM,EAAwB;IAE5D,MAAM,QAAQ,MAAM,OAAO,CAAC,SAAS,SAAU,SAAS,QAAqB,EAAE;IAC/E,MAAM,cACJ,MAAM,QAAQ,CAAC,gBACf,QAAQ,iBAAiB,WAAW,OACpC,QAAQ,iBAAiB;IAC3B,MAAM,UAAU,MAAM,IAAI,CAAC,CAAC,IAAM,GAAG,kBAAkB;IACvD,MAAM,iBAAiB,UAAU,UAAU,iBAAiB,kBAAkB;IAC9E,MAAM,eACJ,mBAAmB,gBAAgB,EAAE,GACjC,gBAAgB,IAAI,GACpB;QAAE,QAAQ;QAA0B,eAAe;IAAiC;IAC1F,MAAM,aACJ,mBAAmB,gBAAgB,EAAE,GACjC,gBAAgB,MAAM,GACtB;QAAE,QAAQ;QAAwB,eAAe;QAAgC,QAAQ;IAAK;IACpG,MAAM,gBAAgB,IAAA,gNAAO,EAC3B,IAAM,CAAC,eAAe,YAAY,IAAI,CAAC,CAAC,IAAM,OAAO,EAAE,KAAK,CAAC,OAAO,CAAC,KAAK,QAAQ,IAClF;QAAC;QAAa;KAAY;IAE5B,MAAM,oBACJ,qBAAqB,SAAS,WAAW,qBAAqB,WAAW,CAAC,IAAI,EAAE,aAAa,GAAG;IAClG,MAAM,yBACJ,0BAA0B,SACtB,sBACA,0BAA0B,WACxB,CAAC,IAAI,EAAE,aAAa,GACpB,0BAA0B,gBAC1B,kBACA;IACR,MAAM,0BACJ,qBAAqB,SACjB,iBACE,CAAC,2BAA2B,EAAE,WAAW,gBAAgB,CAAC,GAC1D,CAAC,2BAA2B,EAAE,WAAW,WAAW,EAAE,YAAY,CAAC,CAAC,GACtE,qBAAqB,WACnB,iBACE,2EACA,yEACF;IACR,MAAM,+BACJ,0BAA0B,SACtB,2CACA,0BAA0B,gBACxB,CAAC,6CAA6C,EAAE,WAAW,CAAC,CAAC,GAC7D,0BAA0B,WACxB,iBACE,oEACA,kEACF;IACV,MAAM,yBACJ,AAAC,iBAAiB,WAAwD,iBAAiB;IAC7F,MAAM,iCAAiC,QACpC,iBAAiB,WAAkE;IAEtF,MAAM,iCAAiC,CAAC,WAAW,CAAC,CAAC,0BAA0B,CAAC,8BAA8B;IAC9G,MAAM,iBAAiB,CAAC,WAAW,mBAAmB;IACtD,MAAM,qBAAqB,kBAAkB;IAC7C,MAAM,4BAA4B,IAAA,gNAAO,EAAC;QACxC,IAAI,CAAC,oBAAoB,OAAO;QAChC,MAAM,UAAoB,EAAE;QAC5B,IAAI,gBAAgB,QAAQ,IAAI,CAAC;QACjC,IAAI,gCAAgC;YAClC,QAAQ,IAAI,CACV,yBACI,6DACA;QAER;QACA,MAAM,cAAc,QAAQ,IAAI,CAAC;QACjC,OAAO,iBACH,CAAC,yCAAyC,EAAE,YAAY,sDAAsD,CAAC,GAC/G,CAAC,wCAAwC,EAAE,YAAY,qDAAqD,CAAC;IACnH,GAAG;QAAC;QAAoB;QAAgB;QAAgC;QAAwB;KAAe;IAE/G,IAAA,kNAAS,EAAC;QACR,IAAI,uBAAuB;QAC3B,oBAAoB;QACpB,yBAAyB;QACzB,qBAAqB;QACrB,0BAA0B;QAC1B,eAAe,CAAC,OACd,KAAK,GAAG,CAAC,CAAC,MAAQ,CAAC;oBAAE,GAAG,GAAG;oBAAE,cAAc;oBAAW,mBAAmB;gBAAU,CAAC;IAExF,GAAG;QAAC;KAAsB;IAE1B,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,uBAAuB;QAC5B,IAAI,qBAAqB,YAAY,sBAAsB,YAAY;YACrE,eAAe,CAAC,OAAS,KAAK,GAAG,CAAC,CAAC,MAAQ,CAAC;wBAAE,GAAG,GAAG;wBAAE,cAAc;oBAAU,CAAC;YAC/E;QACF;QACA,eAAe,CAAC,OACd,KAAK,GAAG,CAAC,CAAC,MAAQ,CAAC;oBAAE,GAAG,GAAG;oBAAE,cAAc,IAAI,YAAY,IAAI;gBAAK,CAAC;IAEzE,GAAG;QAAC;QAAuB;QAAkB;KAAkB;IAE/D,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,uBAAuB;QAC5B,IAAI,0BAA0B,YAAY,2BAA2B,YAAY;YAC/E,eAAe,CAAC,OAAS,KAAK,GAAG,CAAC,CAAC,MAAQ,CAAC;wBAAE,GAAG,GAAG;wBAAE,mBAAmB;oBAAU,CAAC;YACpF;QACF;QACA,eAAe,CAAC,OACd,KAAK,GAAG,CAAC,CAAC,MAAQ,CAAC;oBAAE,GAAG,GAAG;oBAAE,mBAAmB,IAAI,iBAAiB,IAAI;gBAAK,CAAC;IAEnF,GAAG;QAAC;QAAuB;QAAuB;KAAuB;IAEzE,MAAM,gBAAgB,IAAA,gNAAO,EAC3B,IAAO,aAAa,iBAAiB,MAAM,CAAC,CAAC,MAAQ,IAAI,GAAG,KAAK,WAAW,kBAC5E;QAAC;KAAW;IAGd,MAAM,YAAY,IAAA,gNAAO,EAAC;QACxB,MAAM,MAAM,IAAI;QAChB,cAAc,OAAO,CAAC,CAAC,MAAQ,IAAI,GAAG,CAAC,IAAI,GAAG,EAAE;QAChD,OAAO;IACT,GAAG;QAAC;KAAc;IAElB,MAAM,EAAE,MAAM,YAAY,EAAE,GAAG,IAAA,yKAAM,EACnC,OAAO,CAAC,iCAAiC,EAAE,mBAAmB,aAAa,IAAI,KAAK,GAAG,MACvF,SACA;QAAE,mBAAmB;IAAM;IAE7B,MAAM,EAAE,MAAM,UAAU,EAAE,GAAG,IAAA,yKAAM,EACjC,mBAAmB,UAAU,qBAAqB,MAClD,SACA;QAAE,mBAAmB;IAAM;IAE7B,MAAM,EAAE,MAAM,WAAW,EAAE,GAAG,IAAA,yKAAM,EAClC,mBAAmB,WAAW,sBAAsB,CAAC,iBAAiB,EAAE,oBAAoB,OAAO,CAAC,GAAG,MACvG,SACA;QAAE,mBAAmB;IAAM;IAE7B,MAAM,EAAE,MAAM,UAAU,EAAE,GAAG,IAAA,yKAAM,EACjC,mBAAmB,WAAW,sBAAsB,CAAC,iBAAiB,EAAE,oBAAoB,MAAM,CAAC,GAAG,MACtG,SACA;QAAE,mBAAmB;IAAM;IAG7B,IAAA,kNAAS,EAAC;QACR,IAAI,aAAa;QACjB,wCAAmC;;;QACnC,MAAM;IA6ER,GAAG;QAAC;KAAY;IAEhB,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,aAAa;QAClB,MAAM,YAAY,cAAc,IAAI;QACpC,MAAM,WAAW,cAAc,IAAI,eAAe,cAAc,IAAI;QACpE,IAAI,kBAAmB,CAAC,aAAa,CAAC,UAAW;QACjD,MAAM,QAAQ,cAAc,IAAI,CAAC,CAAC,MAAQ,IAAI,KAAK,KAAK,aAAa,IAAI,GAAG,KAAK;QACjF,IAAI,OAAO;YACT,kBAAkB,MAAM,GAAG;QAC7B;IACF,GAAG;QAAC;QAAa;QAAc;QAAgB;KAAc;IAE7D,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,YAAY;QACjB,IAAI,mBAAmB,SAAS;YAC9B,kBAAkB;QACpB;IACF,GAAG;QAAC;QAAY;KAAe;IAE/B,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,YAAY;QACjB,MAAM,cAAc,cAAc,IAAI,aAAa,cAAc,IAAI,eAAe,cAAc,IAAI;QACtG,IAAI,eAAe,YAAY,WAAW,OAAO,SAAS;QAC1D,MAAM,SAAS,IAAI,gBAAgB,cAAc;QACjD,OAAO,GAAG,CAAC,UAAU;QACrB,OAAO,OAAO,CAAC,CAAC,0BAA0B,EAAE,OAAO,QAAQ,IAAI;IACjE,GAAG;QAAC;QAAY;QAAQ;KAAa;IAErC,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,YAAY;QACjB,kBAAkB,CAAC;YACjB,MAAM,UAAU,KAAK,IAAI,GAAG,WAAW;YACvC,IAAI,CAAC,WAAW,YAAY,aAAa,YAAY,YAAY,OAAO;YACxE,OAAO;QACT;IACF,GAAG;QAAC;KAAW;IAEf,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,aAAa;QAClB,eAAe;YACb;gBACE,MAAM,eAAe,IAAI,MAAM;gBAC/B,OAAO;gBACP,eAAe;YACjB;SACD;IACH,GAAG;QAAC;QAAa;QAAgB;QAAc;KAAiB;IAEhE,IAAA,kNAAS,EAAC;QACR,qBAAqB;YAAC;SAAU;QAChC,eAAe;IACjB,GAAG;QAAC;KAAY;IAEhB,IAAA,kNAAS,EAAC;QACR,IAAI,mBAAmB,SAAS;YAC9B,uBAAuB;YACvB,yBAAyB,EAAE;YAC3B,yBAAyB,EAAE;YAC3B,uBAAuB;YACvB;QACF;QACA,IAAI,YAAY,SAAS,WAAW,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC,qBAAqB;YAC5E,MAAM,cAAc,WAAW,KAAK,CAAC,IAAI,CAAC,CAAC,IAAM,EAAE,QAAQ,KAAK,WAAW,KAAK,CAAC,EAAE;YACnF,uBAAuB,YAAY,EAAE;QACvC;IACF,GAAG;QAAC;QAAgB;QAAY;KAAoB;IAEpD,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,aAAa,OAAO;QACzB,MAAM,eAAe,YAAY,KAAK,CAAC,MAAM,CAAC,CAAC,IAAM,EAAE,QAAQ,EAAE,GAAG,CAAC,CAAC,IAAM,EAAE,EAAE;QAChF,IAAI,aAAa,MAAM,GAAG,GAAG,yBAAyB;IACxD,GAAG;QAAC;KAAY;IAEhB,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,YAAY,OAAO;QACxB,MAAM,YAAY,WAAW,KAAK,CAAC,MAAM,CAAC,CAAC,IAAM,EAAE,eAAe,EAAE,GAAG,CAAC,CAAC,IAAM,EAAE,EAAE;QACnF,IAAI,UAAU,MAAM,GAAG,GAAG,yBAAyB;IACrD,GAAG;QAAC;KAAW;IAEf,IAAA,kNAAS,EAAC;QACR,IAAI,mBAAmB,SAAS;QAChC,IAAI,CAAC,qBAAqB;QAC1B,MAAM,OAAO,YAAY,OAAO,KAAK,CAAC,IAAM,EAAE,EAAE,KAAK;QACrD,IAAI,CAAC,MAAM;QACX,MAAM,WAAW;YAAC,KAAK,OAAO,EAAE;YAAQ,KAAK,IAAI,EAAE;SAAO,CAAC,MAAM,CAAC,SAAS,IAAI,CAAC;QAChF,IAAI,CAAC,qBAAqB;YACxB,IAAI,UAAU,gBAAgB;iBACzB,IAAI,CAAC,cAAc,gBAAgB,KAAK,IAAI,IAAI;QACvD;QACA,IAAI,KAAK,IAAI,IAAI,yIAAS,CAAC,QAAQ,CAAC,KAAK,IAAI,GAAa;YACxD,+EAA+E;YAC/E,IAAI,CAAC,uBAAuB,CAAC,cAAc;gBACzC,gBAAgB,KAAK,IAAI;YAC3B;QACF;IACF,GAAG;QAAC;QAAgB;QAAqB,YAAY;QAAO;QAAqB;KAAa;IAE9F,MAAM,YAAY,IAAA,gNAAO,EACvB,IAAM;YACJ;gBACE,KAAK;gBACL,OAAO;gBACP,UAAU,iBAAiB,8BAA8B;YAC3D;YACA;gBAAE,KAAK;gBAAW,OAAO;gBAAc,UAAU;YAA6B;YAC9E;gBAAE,KAAK;gBAAY,OAAO;gBAAS,UAAU;YAAsB;YACnE;gBACE,KAAK;gBACL,OAAO;gBACP,UAAU,cAAc,uBAAuB;YACjD;YACA;gBAAE,KAAK;gBAAU,OAAO;gBAAS,UAAU;YAAkB;SAC9D,EACD;QAAC;QAAa;QAAgB;KAAuB;IAGvD,MAAM,eAAe,IAAA,gNAAO,EAAC;QAC3B,MAAM,MAAM,IAAI;QAChB,UAAU,OAAO,CAAC,CAAC,MAAM,MAAQ,IAAI,GAAG,CAAC,KAAK,GAAG,EAAE;QACnD,OAAO;IACT,GAAG;QAAC;KAAU;IACd,MAAM,cAA4B,IAAA,gNAAO,EACvC,IAAM;YACJ;gBAAE,IAAI;gBAAW,OAAO;YAAU;YAClC;gBAAE,IAAI;gBAAc,OAAO;YAAa;YACxC;gBAAE,IAAI;gBAAe,OAAO;YAAQ;YACpC;gBAAE,IAAI;gBAAY,OAAO;YAAuB;YAChD;gBAAE,IAAI;gBAAW,OAAO;YAAQ;SACjC,EACD;QAAC;KAAuB;IAE1B,MAAM,cAAiD;QACrD,QAAQ;QACR,SAAS;QACT,UAAU;QACV,SAAS;QACT,QAAQ;IACV;IACA,MAAM,mBACJ;IACF,MAAM,oBACJ;IACF,MAAM,aAAa,CAAC,UAAsB,GAAG,iBAAiB,CAAC,EAAE,UAAU,oBAAoB,IAAI;IACnG,MAAM,aACJ;IACF,MAAM,cAAc;IACpB,MAAM,iBAAiB;IACvB,MAAM,cAAc,YAAY,GAAG,CAAC,CAAC,IAAM,EAAE,KAAK,EAAE,IAAI,CAAC;IACzD,MAAM,mBAAmB,YAAY,UAAU,IAAI,KAAK,QAAQ,OAAO,MAAM,IAAI,KAAK,UAAU,OAAO;IACvG,MAAM,mBAAmB,WAAW,CAAC,YAAY,EAAE,SAAS;IAE5D,MAAM,YAAY,CAAC,SAAiB,OAAkB,SAAS;QAC7D,MAAM,KAAK,KAAK,GAAG,KAAK,KAAK,MAAM;QACnC,UAAU,CAAC,OAAS;mBAAI;gBAAM;oBAAE;oBAAI;oBAAS;gBAAK;aAAE;QACpD,WAAW,IAAM,UAAU,CAAC,OAAS,KAAK,MAAM,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,MAAM;IACzE;IAEA,MAAM,YAAY;QAChB,wCAAmC;;;QACnC,MAAM;IA4BR;IAEA,MAAM,qBAAqB;QACzB,UAAU;YACR,MAAM;YACN,YAAY;QACd;IACF;IAEA,MAAM,qBAAqB,CAAC;QAC1B,MAAM,SAAS,UAAU,GAAG,CAAC;QAC7B,IAAI,CAAC,QAAQ;QACb,kBAAkB,OAAO,GAAG;QAC5B,mBAAmB;QACnB,gBAAgB;QAChB,qBAAqB;YAAC;SAAS;IACjC;IAEA,MAAM,iCAAiC,CAAC;QACtC,gBAAgB,WAAW,IAAI;QAC/B,IAAI,WAAW,IAAI,IAAI,yIAAS,CAAC,QAAQ,CAAC,WAAW,IAAI,GAAa;YACpE,gBAAgB,WAAW,IAAI;QACjC;QACA,uBAAuB;QACvB,qBAAqB;YAAC;YAAgB;SAAe;QACrD,2BAA2B;IAC7B;IAEA,MAAM,sBAAsB;QAC1B,qBAAqB;YAAC;SAAU;QAChC,eAAe;QACf,eAAe,CAAC,OAAS;mBACpB;gBACH;oBACE,MAAM;oBACN,OAAO;oBACP,eAAe;oBACf,cACE,yBAAyB,qBAAqB,YAAY,sBAAsB,aAC5E,OACA;oBACN,mBACE,yBAAyB,0BAA0B,YAAY,2BAA2B,aACtF,OACA;gBACR;aACD;IACH;IAEA,MAAM,yBAAyB,CAAC;QAC9B,qBAAqB;YAAC;SAAU;QAChC,eAAe;QACf,eAAe,CAAC,OAAS,KAAK,MAAM,CAAC,CAAC,GAAG,IAAM,MAAM;IACvD;IAEA,MAAM,qBAAqB,CAAC,OAAe,OAA4B;QACrE,eAAe,CAAC,OAAS,KAAK,GAAG,CAAC,CAAC,KAAK,IAAO,MAAM,QAAQ;oBAAE,GAAG,GAAG;oBAAE,CAAC,MAAM,EAAE;gBAAM,IAAI;QAC1F,qBAAqB;YAAC;SAAU;QAChC,eAAe;IACjB;IAEA,MAAM,mBAAmB,CAAC,OAAe;QACvC,eAAe,CAAC,OACd,KAAK,GAAG,CAAC,CAAC,KAAK,IAAO,MAAM,QAAQ;oBAAE,GAAG,GAAG;oBAAE,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,MAAM;gBAAC,IAAI;IAE3E;IAEA,MAAM,oBAAoB,OAAO;QAC/B,IAAI,CAAC,MAAM;QACX,MAAM,WAAW,IAAI;QACrB,SAAS,MAAM,CAAC,QAAQ;QACxB,kBAAkB;QAClB,gBAAgB;QAChB,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,eAAe;gBACrC,QAAQ;gBACR,MAAM;YACR;YACA,MAAM,OAAO,MAAM,IAAI,IAAI;YAC3B,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,MAAM,KAAK;gBACzB,MAAM,IAAI,MAAM,MAAM,SAAS;YACjC;YACA,YAAY,KAAK,GAAG;QACtB,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,0BAA0B;YACxC,gBAAgB;QAClB,SAAU;YACR,kBAAkB;QACpB;IACF;IAEA,MAAM,sBAAsB;QAC1B,IAAI,aAAa;YACf,MAAM,mBAAmB,eAAe,OAAO,gBAAgB;YAC/D,MAAM,iBACJ,OAAO,qBAAqB,YAAY,OAAO,QAAQ,CAAC,qBAAqB,mBAAmB,IAC5F,mBACA;YACN,OAAO;gBACL;oBACE,MAAM,eAAe,IAAI,MAAM;oBAC/B,OAAO;oBACP,eAAe;oBACf,cACE,yBACA,qBAAqB,YACrB,sBAAsB,aAClB,OACA;oBACN,mBACE,yBACA,0BAA0B,YAC1B,2BAA2B,aACvB,OACA;gBACR;aACD;QACH;QAEA,OAAO,YACJ,GAAG,CAAC,CAAC;YACJ,MAAM,cAAc,OAAO,IAAI,KAAK,CAAC,OAAO,CAAC,KAAK;YAClD,MAAM,QAAQ,OAAO,QAAQ,CAAC,eAAe,cAAc;YAC3D,OAAO;gBACL,MAAM,IAAI,IAAI,CAAC,IAAI;gBACnB;gBACA,eAAe,IAAI,aAAa,GAAG,OAAO,IAAI,aAAa,IAAI;gBAC/D,cACE,yBACA,qBAAqB,YACrB,sBAAsB,aAClB,QAAQ,IAAI,YAAY,IACxB;gBACN,mBACE,yBACA,0BAA0B,YAC1B,2BAA2B,aACvB,QAAQ,IAAI,iBAAiB,IAC7B;YACR;QACF,GACC,MAAM,CAAC,CAAC,IAAM,EAAE,IAAI;IACzB;IAEA,MAAM,kBAAkB,IAAA,gNAAO,EAC7B,IAAM,uBACN;QACE;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IAGH,MAAM,cAAc,IAAA,gNAAO,EAAC;QAC1B,MAAM,QAAkB,EAAE;QAC1B,IAAI,CAAC,uBAAuB;YAC1B,OAAO;QACT;QACA,IAAI,qBAAqB,YAAY,gBAAgB,MAAM,KAAK,GAAG;YACjE,MAAM,IAAI,CAAC,CAAC,kBAAkB,EAAE,sBAAsB,oCAAoC,CAAC;QAC7F;QACA,IAAI,0BAA0B,YAAY,gBAAgB,MAAM,KAAK,GAAG;YACtE,MAAM,IAAI,CAAC,CAAC,OAAO,EAAE,kBAAkB,2BAA2B,CAAC;QACrE;QACA,IAAI,qBAAqB,YAAY,0BAA0B,UAAU;YACvE,MAAM,IAAI,CAAC,CAAC,6CAA6C,EAAE,WAAW,CAAC,CAAC;QAC1E;QACA,OAAO;IACT,GAAG;QAAC;QAAuB;QAAkB;QAAuB,gBAAgB,MAAM;QAAE;QAAY;QAAuB;KAAkB;IAEjJ,MAAM,eAA4C;QAChD,QAAQ;YAAC;SAAS;QAClB,SAAS;YAAC;YAAS;SAAc;QACjC,UAAU;YAAC;YAAY;YAAU;YAAgB;YAAgB;SAAU;QAC3E,SAAS;YAAC;SAAU;QACpB,QAAQ,EAAE;IACZ;IAEA,SAAS,kBAAkB,OAAwB;QACjD,MAAM,OAAO,YAAY,QAAS;YAAC;YAAU;YAAW;YAAY;SAAU,GAAiB;YAAC;SAAQ;QACxG,MAAM,SAAiD,EAAE;QACzD,KAAK,OAAO,CAAC,CAAC;YACZ,IAAI,QAAQ,YAAY,CAAC,gBAAgB;gBACvC,OAAO,IAAI,CAAC;oBAAE,OAAO;oBAAU,SAAS;gBAAsB;YAChE;YACA,IAAI,QAAQ,WAAW;gBACrB,IAAI,CAAC,MAAM,IAAI,IAAI;oBACjB,OAAO,IAAI,CAAC;wBAAE,OAAO;wBAAS,SAAS;oBAAsB;gBAC/D;YACF;YACA,IAAI,QAAQ,YAAY;gBACtB,IAAI,CAAC,UAAU,OAAO,IAAI,CAAC;oBAAE,OAAO;oBAAY,SAAS;gBAAmC;gBAC5F,IAAI,CAAC,QAAQ,OAAO,IAAI,CAAC;oBAAE,OAAO;oBAAU,SAAS;gBAAgC;gBACrF,IAAI,CAAC,aAAa,IAAI,IAAI,OAAO,IAAI,CAAC;oBAAE,OAAO;oBAAgB,SAAS;gBAAqB;gBAC7F,IAAI,CAAC,aAAa,IAAI,IAAI,OAAO,IAAI,CAAC;oBAAE,OAAO;oBAAgB,SAAS;gBAAsB;gBAC9F,IAAI,UAAU,YAAY,IAAI,KAAK,QAAQ,OAAO,MAAM,IAAI,KAAK,UAAU,OAAO,IAAI;oBACpF,OAAO,IAAI,CAAC;wBAAE,OAAO;wBAAU,SAAS;oBAAkD;gBAC5F;YACF;YACA,IAAI,QAAQ,WAAW;gBACrB,MAAM,kBAAkB;gBACxB,IAAI,gBAAgB,MAAM,KAAK,GAAG;oBAChC,OAAO,IAAI,CAAC;wBAAE,OAAO;wBAAW,SAAS,CAAC,oBAAoB,EAAE,sBAAsB,CAAC,CAAC;oBAAC;gBAC3F;gBACA,IACE,yBACA,qBAAqB,YACrB,sBAAsB,cACtB,CAAC,gBAAgB,IAAI,CAAC,CAAC,IAAM,EAAE,YAAY,GAC3C;oBACA,OAAO,IAAI,CAAC;wBAAE,OAAO;wBAAW,SAAS,CAAC,wBAAwB,EAAE,YAAY,gBAAgB,CAAC;oBAAC;gBACpG;gBACA,IACE,yBACA,0BAA0B,YAC1B,2BAA2B,cAC3B,CAAC,gBAAgB,IAAI,CAAC,CAAC,IAAM,EAAE,iBAAiB,GAChD;oBACA,OAAO,IAAI,CAAC;wBAAE,OAAO;wBAAW,SAAS,CAAC,wBAAwB,EAAE,YAAY,oBAAoB,CAAC;oBAAC;gBACxG;gBACA,IAAI,CAAC,aAAa;oBAChB,MAAM,mBAAmB,gBAAgB,IAAI,CAAC,CAAC,IAAM,EAAE,KAAK,GAAG;oBAC/D,MAAM,kBAAkB,gBAAgB,IAAI,CAAC,CAAC,IAAM,EAAE,KAAK,IAAI,KAAK,EAAE,KAAK,GAAG;oBAC9E,IAAI,kBAAkB;wBACpB,OAAO,IAAI,CAAC;4BAAE,OAAO;4BAAW,SAAS;wBAA6B;oBACxE;oBACA,IAAI,iBAAiB;wBACnB,OAAO,IAAI,CAAC;4BACV,OAAO;4BACP,SAAS,iBACL,+EACA;wBACN;oBACF;gBACF;gBACA,IAAI,CAAC,eAAe,iBAAiB,oBAAoB;oBACvD,OAAO,IAAI,CAAC;wBACV,OAAO;wBACP,SACE,6BACA,CAAC,iBACG,2FACA,qFAAqF;oBAC7F;gBACF;YACF;QACF;QACA,OAAO;IACT;IAEA,MAAM,eAAe,IAAA,gNAAO,EAC1B,IAAM,CAAC;YACL,QAAQ;YACR,OAAO;YACP,aAAa;YACb,UAAU;YACV,QAAQ;YACR,cAAc;YACd,cAAc;YACd,SAAS;YACT,SAAS;QACX,CAAC,GACD,EAAE;IAGJ,SAAS,qBAAqB,MAAkB;QAC9C,eAAe,CAAC;YACd,MAAM,OAAO;gBAAE,GAAG,IAAI;YAAC;YACvB,OAAO,OAAO,CAAC,CAAC;gBACd,OAAO,IAAI,CAAC,MAAM;YACpB;YACA,OAAO;QACT;QACA,gBAAgB,CAAC,OAAS,KAAK,MAAM,CAAC,CAAC,MAAQ,CAAC,OAAO,QAAQ,CAAC,IAAI,KAAK;IAC3E;IAEA,SAAS,YAAY,MAA8C,EAAE,eAAe,IAAI;QACtF,IAAI,OAAO,MAAM,KAAK,GAAG;YACvB,gBAAgB,EAAE;QACpB,OAAO;YACL,gBAAgB;QAClB;QACA,eAAe,CAAC;YACd,MAAM,OAAO;gBAAE,GAAG,IAAI;YAAC;YACvB,OAAO,OAAO,CAAC,CAAC;gBACd,IAAI,CAAC,IAAI,KAAK,CAAC,GAAG,IAAI,OAAO;YAC/B;YACA,OAAO;QACT;QACA,IAAI,OAAO,MAAM,GAAG,KAAK,cAAc;YACrC,WAAW;gBACT,gBAAgB,OAAO,EAAE,MAAM;oBAAE,eAAe;gBAAM;YACxD,GAAG;QACL;IACF;IAEA,MAAM,aAAa,IAAA,oNAAW,EAC5B,CAAC;QACC,MAAM,aAAa,YAAY,CAAC,MAAM;QACtC,MAAM,kBAAkB,aAAa,GAAG,CAAC;QACzC,IAAI,OAAO,oBAAoB,YAAY,oBAAoB,aAAa;YAC1E,eAAe;YACf,kBAAkB,CAAC,OAAS,KAAK,GAAG,CAAC,MAAM;YAC3C,qBAAqB;YACrB;QACF;QAEA,MAAM,YACJ,UAAU,UACN,SAAS,OAAO,GAChB,UAAU,aACT,UAAU,OAAO,EAAE,cAAc,YAClC,UAAU,WACP,QAAQ,OAAO,EAAE,cAAc,YAChC,UAAU,iBACR,gBAAgB,OAAO,GACvB,UAAU,iBACR,QAAQ,OAAO,GACf,UAAU,YACP,WAAW,OAAO,EAAE,cAAc,kCACnC;QAEd,IAAI,WAAW;YACb,UAAU,cAAc,CAAC;gBAAE,UAAU;gBAAU,OAAO;YAAS;YAC/D,UAAU,KAAK,CAAC;gBAAE,eAAe;YAAK;QACxC;IACF,GACA;QAAC;QAAa;QAAc;KAAa;IAG3C,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,mBAAmB;QACxB,MAAM,eAAe,YAAY,CAAC,kBAAkB;QACpD,MAAM,kBAAkB,aAAa,GAAG,CAAC;QACzC,IAAI,OAAO,oBAAoB,YAAY,oBAAoB,aAAa;QAC5E,WAAW;QACX,qBAAqB;IACvB,GAAG;QAAC;QAAmB;QAAa;QAAc;QAAc;KAAW;IAE3E,IAAA,kNAAS,EAAC;QACR,IAAI,QAA+B;QACnC,IAAI,cAAc;YAChB,QAAQ,WAAW,IAAM,mBAAmB,OAAO;QACrD,OAAO;YACL,mBAAmB;QACrB;QACA,OAAO;YACL,IAAI,OAAO,aAAa;QAC1B;IACF,GAAG;QAAC;KAAa;IAEjB,MAAM,gBAAgB,SAAS,CAAC,YAAY,EAAE,OAAO;IACrD,MAAM,qBAAqB,CAAC;QAC1B,MAAM,SACJ,kBAAkB,WAAW,kBAAkB,SAAS,kBAAkB;QAC5E,IAAI,cAAc,OAAO,iBAAiB,8BAA8B;QACxE,OAAO,MAAM,CAAC,EAAE,EAAE,WAAW;IAC/B,CAAC;IAED,MAAM,sBAAsB,WAAW,CAAC,cAAc;IACtD,MAAM,YAAY,eAAe,iBAAiB,OAAO,GAAG,UAAU;IACtE,IAAA,kNAAS,EAAC;QACR,iBAAiB,OAAO,GAAG;IAC7B,GAAG;QAAC;KAAY;IAEhB,MAAM,8BAA8B,IAAA,gNAAO,EAAC;QAC1C,MAAM,QAAQ,cAAc,MAAM,MAAM,OAAO,CAAC,aAAa,KAAK,IAAI,aAAa,KAAK,GAAG,EAAE;QAC7F,IAAI,MAAM,MAAM,KAAK,GAAG,OAAO,EAAE;QACjC,MAAM,OAAO,GAAG,aAAa,CAAC,EAAE,cAAc,CAAC,WAAW,GAAG,IAAI;QACjE,MAAM,WAAW,MAAM,MAAM,CAAC,CAAC,IAAM,GAAG,EAAE,IAAI,CAAC,CAAC,EAAE,EAAE,IAAI,IAAI,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC;QACxF,OAAO,CAAC,OAAO,WAAW,KAAK,EAAE,KAAK,CAAC,GAAG;IAC5C,GAAG;QAAC;QAAc;QAAc;KAAa;IAE7C,IAAA,kNAAS,EAAC;QACR,IAAI,MAAM,IAAI,IAAI,qBAAqB;YAAC;SAAQ;IAClD,GAAG;QAAC;KAAM;IAEV,IAAA,kNAAS,EAAC;QACR,IAAI,UAAU,qBAAqB;YAAC;SAAW;IACjD,GAAG;QAAC;KAAS;IAEb,IAAA,kNAAS,EAAC;QACR,IAAI,aAAa,IAAI,IAAI,qBAAqB;YAAC;SAAe;IAChE,GAAG;QAAC;KAAa;IAEjB,IAAA,kNAAS,EAAC;QACR,IAAI,aAAa,IAAI,IAAI,qBAAqB;YAAC;SAAe;IAChE,GAAG;QAAC;KAAa;IAEjB,IAAA,kNAAS,EAAC;QACR,IAAI,UAAU,YAAY,IAAI,KAAK,QAAQ,OAAO,KAAK,IAAI,KAAK,UAAU,OAAO,IAAI;YACnF,qBAAqB;gBAAC;aAAS;QACjC;IACF,GAAG;QAAC;QAAQ;KAAS;IAErB,MAAM,YAAY,CAAC,EACjB,OAAO,EACP,OAAO,UAAU,EACjB,OAAO,EACP,WAAW,EACX,QAAQ,EAOT;QACC,MAAM,QACJ,YAAY,UACR,iDACA,YAAY,YACV,uDACA;QACR,qBACE,8OAAC;YAAI,WAAW,CAAC,oCAAoC,EAAE,OAAO;sBAC5D,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;4BACZ,4BAAc,8OAAC;gCAAE,WAAU;0CAAiB;;;;;;0CAC7C,8OAAC;0CAAG;;;;;;;;;;;;oBAEL,eAAe,0BACd,8OAAC;wBACC,MAAK;wBACL,SAAS;wBACT,WAAU;kCAET;;;;;;;;;;;;;;;;;IAMb;IAEA,MAAM,SAAS;QACb,MAAM,YAAY,SAAS,CAAC,YAAY,EAAE;QAC1C,IAAI,CAAC,WAAW;QAChB,MAAM,SAAS,cAAc,WAAW,kBAAkB,SAAS,kBAAkB;QACrF,MAAM,YAAY,CAAC,eAAe,iBAAiB,qBAAqB,4BAA4B;QACpG,IAAI,OAAO,MAAM,GAAG,GAAG;YACrB,YAAY;YACZ,mBAAmB;YACnB,gBAAgB,MAAM,CAAC,EAAE,EAAE,WAAW;YACtC,eAAe;YACf;QACF;QACA,qBAAqB,YAAY,CAAC,UAAqB;QACvD,mBAAmB;QACnB,gBAAgB;QAChB,eAAe;QACf,gBAAgB,EAAE;QAClB,IAAI,eAAe,UAAU,MAAM,GAAG,GAAG;YACvC;YACA;QACF;QACA,mBAAmB;QACnB,gBAAgB;QAChB,eAAe,CAAC,IAAM,IAAI;QAC1B,kBAAkB,CAAC,OAAS,KAAK,GAAG,CAAC,MAAM,cAAc;IAC3D;IAEA,MAAM,SAAS;QACb,mBAAmB;QACnB,gBAAgB;QAChB,gBAAgB,EAAE;QAClB,eAAe;QACf,eAAe,CAAC,IAAM,KAAK,GAAG,CAAC,GAAG,IAAI;IACxC;IAEA,MAAM,eAAe;QACnB,eAAe;QACf,mBAAmB;QACnB,gBAAgB;QAChB,gBAAgB;QAEhB,MAAM,SAAS,kBAAkB;QACjC,MAAM,YAAY,CAAC,eAAe,iBAAiB,qBAAqB,4BAA4B;QACpG,IAAI,OAAO,MAAM,GAAG,GAAG;YACrB,YAAY;YACZ,mBAAmB,CAAC,yCAAyC,EAAE,WAAW,CAAC,CAAC;YAC5E,gBAAgB,MAAM,CAAC,EAAE,EAAE,WAAW;YACtC,eAAe;YACf;QACF;QAEA,MAAM,kBAAkB;QACxB,MAAM,WAAW,CAAC,KAA4B,IAAI,eAAe;gBAAE,UAAU;gBAAU,OAAO;YAAS;QAEvG,IAAI,CAAC,MAAM;YACT;YACA;QACF;QAEA,IAAI,CAAC,aAAa;YAChB,gBAAgB;YAChB;QACF;QAEA,gBAAgB;QAEhB,IAAI;YACF,MAAM,SAAS,iBAAiB,UAAU,GAAG,CAAC,kBAAkB;YAChE,MAAM,mBAAmB,QAAQ,cAAc;gBAAC;aAAQ;YACxD,MAAM,iBACJ,mBAAmB,UACf,UACA,mBAAmB,iBACjB,iBACA;YACR,MAAM,UAAU;gBACd,OAAO,MAAM,IAAI;gBACjB,aAAa,YAAY,IAAI,MAAM;gBACnC;gBACA;gBACA,cAAc,aAAa,IAAI,MAAM;gBACrC,cAAc,aAAa,IAAI,MAAM;gBACrC,cAAc;gBACd,SAAS,QAAQ,IAAI,MAAM;gBAC3B,YAAY;gBACZ,aAAa;gBACb,eAAe;gBACf,YAAY,qBAAqB;gBACjC;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA,QAAQ,UAAU,SAAS;gBAC3B,OACE,mBAAmB,UACf;oBACE,aAAa;oBACb,UAAU;oBACV,UAAU;oBACV,gBAAgB,sBAAsB,MAAM,IAAI;oBAChD,gBAAgB;gBAClB,IACA;YACV;YAEE,MAAM,MAAM,MAAM,MAAM,kCAAkC;gBACxD,QAAQ;gBACR,SAAS;oBACP,gBAAgB;gBAClB;gBACA,MAAM,KAAK,SAAS,CAAC;YACvB;YAEA,MAAM,OAAO,MAAM,IAAI,IAAI;YAE3B,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,MAAM,IAAI;gBACxB,MAAM,IAAI,MAAM,MAAM,SAAS,CAAC,cAAc,EAAE,WAAW,CAAC,CAAC;YAC/D;YAEA,MAAM,QAAQ,KAAK,KAAK;YACxB,IAAI,OAAO,MAAM,OAAO,MAAM;gBAC5B;;gBAGA,mBAAmB;oBAAE,SAAS,MAAM,EAAE;oBAAE,MAAM,MAAM,IAAI;gBAAC;gBACzD,eAAe,UAAU,MAAM,GAAG;gBAClC,kBAAkB,UAAU,MAAM,GAAG;gBACrC,gBAAgB,EAAE;gBAClB,eAAe,CAAC;YAClB;QACF,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,wCAAwC;YACtD,MAAM,UAAU,eAAe,QAAQ,IAAI,OAAO,GAAG;YACrD,gBAAgB,WAAW,CAAC,6BAA6B,EAAE,WAAW,8BAA8B,CAAC;YACrG,SAAS,YAAY,OAAO;QAC9B,SAAU;YACR,gBAAgB;QAClB;IACF;IAEA,MAAM,YAAY;QAChB,kBAAkB,aAAa,UAAU;QACzC,SAAS;QACT,eAAe;QACf,YAAY;QACZ,UAAU;QACV,gBAAgB;QAChB,gBAAgB,yIAAS,CAAC,EAAE;QAC5B,WAAW;QACX,eAAe;YAAC;gBAAE,MAAM;gBAAS,OAAO;gBAAI,eAAe;YAAG;SAAE;QAChE,eAAe;QACf,kBAAkB,aAAa,cAAc;QAC7C,gBAAgB;QAChB,YAAY;QACZ,mBAAmB;QACnB,eAAe;QACf,kBAAkB;QAClB,mBAAmB;QACnB,gBAAgB;QAChB,gBAAgB,EAAE;QAClB,eAAe,CAAC;QAChB,eAAe;QACf,gBAAgB;QAChB;;IAGF;IAEA,IAAI,eAAe;QACjB,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;0BAA+K;;;;;;;;;;;IAKpM;IAEA,IAAI,CAAC,MAAM;QACT,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCACX,iBAAiB,gCAAgC;;;;;;kCAEpD,8OAAC;wBAAE,WAAU;;4BAAgB;4BACY;4BAAiB;;;;;;;kCAE1D,8OAAC;wBACC,MAAK;wBACL,SAAS;wBACT,WAAW,gJAAW;kCACvB;;;;;;;;;;;;;;;;;IAMT;IAEA,IAAI,CAAC,aAAa;QAChB,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCACX,iBAAiB,gCAAgC;;;;;;kCAEpD,8OAAC;wBAAE,WAAU;kCAAgB;;;;;;kCAC7B,8OAAC,uKAAI;wBACH,MAAK;wBACL,WAAW,gJAAW;kCACvB;;;;;;;;;;;;;;;;;IAMT;IAEA,MAAM,mBAAmB,kBACvB,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAE,WAAU;sCACV,aACG,0FACA;;;;;;sCAEN,8OAAC;4BAAE,WAAU;sCACV,aAAa,uCAAuC;;;;;;wBAEtD,YAAY,MAAM,kBACjB,8OAAC;4BAAE,WAAW;;8CACZ,8OAAC;oCAAK,aAAW;8CAAC;;;;;;gCACjB,YAAY,MAAM;;;;;;;;;;;;;8BAIzB,8OAAC;oBAAI,WAAU;8BACZ,cAAc,GAAG,CAAC,CAAC;wBAClB,MAAM,WAAW,mBAAmB,IAAI,GAAG;wBAC3C,qBACE,8OAAC;4BAEC,MAAK;4BACL,SAAS,IAAM,mBAAmB,IAAI,GAAG;4BACzC,WAAW,CAAC,+KAA+K,EACzL,WAAW,6CAA6C,IACxD;;8CAEF,8OAAC;oCACC,WAAW,CAAC,uDAAuD,EAAE,IAAI,MAAM,CAAC,sDAAsD,CAAC;8CAEtI,IAAI,KAAK;;;;;;8CAEZ,8OAAC;oCAAE,WAAU;8CAAyB,IAAI,IAAI;;;;;;8CAC9C,8OAAC;oCAAI,WAAU;8CACZ,IAAI,UAAU,CAAC,MAAM,KAAK,kBACzB,8OAAC;wCAAK,WAAU;kDAAkD;;;;;+CAElE,IAAI,UAAU,CAAC,GAAG,CAAC,CAAC,oBAClB,8OAAC;4CAAe,WAAU;sDACvB;2CADQ;;;;;;;;;;;2BAlBZ,IAAI,GAAG;;;;;oBA0BlB;;;;;;;;;;;;IAKN,MAAM,oBAAoB,kBACxB,8OAAC;YAAI,WAAU;;gBACZ,yBACC,8OAAC;oBAAM,WAAU;;sCACf,8OAAC;4BACC,MAAK;4BACL,SAAS;4BACT,UAAU,CAAC,IAAM,UAAU,EAAE,MAAM,CAAC,OAAO;4BAC3C,WAAU;;;;;;sCAEZ,8OAAC;4BAAK,WAAU;;gCACb,iBAAiB,qBAAqB;gCAAkB;;;;;;;;;;;;;8BAK/D,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;;sDACC,8OAAC;4CAAE,WAAW;sDAAY;;;;;;sDAC1B,8OAAC;4CAAE,WAAU;;gDAA4B;gDAAS;gDAAW;;;;;;;;;;;;;8CAE/D,8OAAC;oCAAI,WAAU;;wCACZ,gCAAkB,8OAAC;4CAAK,WAAU;sDAA8B;;;;;;wCAChE,0BACC,8OAAC;4CACC,MAAK;4CACL,SAAS,IAAM,YAAY;4CAC3B,WAAU;sDACX;;;;;;;;;;;;;;;;;;sCAMP,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAI,WAAU;8CACZ,WACC,qDAAqD;kDACrD,8OAAC;wCAAI,KAAK;wCAAU,KAAI;wCAAO,WAAU;;;;;6DAEzC,8OAAC;wCAAK,WAAU;kDAAgB;;;;;;;;;;;8CAGpC,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAM,WAAU;;8DACf,8OAAC;8DAAM,WAAW,kBAAkB;;;;;;8DACpC,8OAAC;oDACC,MAAK;oDACL,QAAO;oDACP,UAAU,CAAC,IAAM,kBAAkB,EAAE,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE,IAAI;oDAC1D,WAAU;;;;;;;;;;;;sDAGd,8OAAC;4CAAK,WAAU;sDAAuF;;;;;;;;;;;;;;;;;;;;;;;;8BAO7G,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAM,WAAW;;wCAAY;sDACrB,8OAAC;4CAAK,aAAW;sDAAC;;;;;;;;;;;;8CAE3B,8OAAC;oCACC,MAAK;oCACL,OAAO;oCACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;oCACxC,KAAK;oCACL,gBAAc,QAAQ,YAAY,KAAK;oCACvC,WAAW,WAAW,QAAQ,YAAY,KAAK;oCAC/C,aAAa,iBAAiB,yBAAyB;;;;;;gCAExD,YAAY,KAAK,kBAChB,8OAAC;oCAAE,WAAW;;sDACZ,8OAAC;4CAAK,aAAW;sDAAC;;;;;;wCACjB,YAAY,KAAK;;;;;;;;;;;;;sCAKxB,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAM,WAAW;8CAAY;;;;;;8CAC9B,8OAAC;oCACC,OAAO;oCACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;oCAC9C,MAAM;oCACN,WAAW,WAAW;oCACtB,aAAa,CAAC,kCAAkC,EAAE,WAAW,OAAO,CAAC;;;;;;;;;;;;;;;;;;;;;;;;IAO/E,MAAM,qBAAqB,kBACzB,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,KAAK;4BAAW,WAAU;;8CAC7B,8OAAC,2KAAoB;oCACnB,OAAM;oCACN,OAAO;oCACP,UAAU,CAAC,IAAM,YAAY;oCAC7B,aAAa,IAAI;oCACjB,QAAQ;;;;;;gCAET,YAAY,QAAQ,kBACnB,8OAAC;oCAAE,WAAW;;sDACZ,8OAAC;4CAAK,aAAW;sDAAC;;;;;;wCACjB,YAAY,QAAQ;;;;;;;;;;;;;sCAI3B,8OAAC;4BAAI,KAAK;4BAAS,WAAU;;8CAC3B,8OAAC,2KAAoB;oCACnB,OAAM;oCACN,OAAO;oCACP,UAAU,CAAC,IAAM,UAAU;oCAC3B,aAAa,WAAW,IAAI,KAAK,YAAY,IAAI;;;;;;gCAElD,YAAY,MAAM,iBACjB,8OAAC;oCAAE,WAAW;;sDACZ,8OAAC;4CAAK,aAAW;sDAAC;;;;;;wCACjB,YAAY,MAAM;;;;;;2CAEnB,iCACF,8OAAC;oCAAE,WAAW;;sDACZ,8OAAC;4CAAK,aAAW;sDAAC;;;;;;wCAAS;;;;;;yDAG7B,8OAAC;oCAAE,WAAW;8CAAa;;;;;;;;;;;;;;;;;;8BAKjC,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAM,WAAW;oCAAY,OAAM;;wCAA0B;sDACnD,8OAAC;4CAAK,aAAW;sDAAC;;;;;;;;;;;;8CAE7B,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CACC,MAAK;4CACL,OAAO;4CACP,UAAU,CAAC;gDACT,uBAAuB;gDACvB,gBAAgB,EAAE,MAAM,CAAC,KAAK;gDAC9B,2BAA2B;4CAC7B;4CACA,SAAS,IAAM,2BAA2B;4CAC1C,QAAQ;gDACN,IAAI,sBAAsB,OAAO,EAAE,aAAa,sBAAsB,OAAO;gDAC7E,sBAAsB,OAAO,GAAG,WAAW,IAAM,2BAA2B,QAAQ;4CACtF;4CACA,KAAK;4CACL,gBAAc,QAAQ,YAAY,YAAY;4CAC9C,WAAW,WAAW,QAAQ,YAAY,YAAY;4CACtD,aAAY;;;;;;wCAEb,yCACC,8OAAC;4CAAI,WAAU;sDACZ,iBAAiB,0BAChB,8OAAC;gDAAI,WAAU;0DAAgD;;;;;uDAC7D,4BAA4B,MAAM,KAAK,kBACzC,8OAAC;gDAAI,WAAU;0DAAkC;;;;;uDAEjD,4BAA4B,GAAG,CAAC,CAAC,2BAC/B,8OAAC;oDAEC,MAAK;oDACL,aAAa,CAAC,IAAM,EAAE,cAAc;oDACpC,SAAS,IAAM,+BAA+B;oDAC9C,WAAU;;sEAEV,8OAAC;4DAAI,WAAU;;8EACb,8OAAC;oEAAK,WAAU;8EAA4B,WAAW,IAAI;;;;;;8EAC3D,8OAAC;oEAAK,WAAU;8EAA6B,WAAW,IAAI,IAAI;;;;;;;;;;;;sEAElE,8OAAC;4DAAK,WAAU;;gEAA4B;gEAAU;gEAAiB;;;;;;;;mDAVlE,GAAG,WAAW,IAAI,CAAC,CAAC,EAAE,WAAW,IAAI,IAAI,KAAK;;;;;;;;;;;;;;;;gCAiB9D,YAAY,YAAY,kBACvB,8OAAC;oCAAE,WAAW;;sDACZ,8OAAC;4CAAK,aAAW;sDAAC;;;;;;wCACjB,YAAY,YAAY;;;;;;;;;;;;;sCAK/B,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAM,WAAW;oCAAY,OAAM;;wCAA6C;sDACpE,8OAAC;4CAAK,aAAW;sDAAC;;;;;;;;;;;;8CAE/B,8OAAC;oCACC,OAAO;oCACP,UAAU,CAAC;wCACT,uBAAuB;wCACvB,gBAAgB,EAAE,MAAM,CAAC,KAAK;wCAC9B,2BAA2B;oCAC7B;oCACA,KAAK;oCACL,gBAAc,QAAQ,YAAY,YAAY;oCAC9C,SAAS,IAAM,2BAA2B;oCAC1C,QAAQ;wCACN,IAAI,sBAAsB,OAAO,EAAE,aAAa,sBAAsB,OAAO;wCAC7E,sBAAsB,OAAO,GAAG,WAAW,IAAM,2BAA2B,QAAQ;oCACtF;oCACA,WAAW,WAAW,QAAQ,YAAY,YAAY;8CAErD,yIAAS,CAAC,GAAG,CAAC,CAAC,qBACd,8OAAC;4CAAkB,OAAO;sDACvB;2CADU;;;;;;;;;;gCAKlB,YAAY,YAAY,kBACvB,8OAAC;oCAAE,WAAW;;sDACZ,8OAAC;4CAAK,aAAW;sDAAC;;;;;;wCACjB,YAAY,YAAY;;;;;;;gCAG5B,CAAC,YAAY,YAAY,kBAAI,8OAAC;oCAAE,WAAU;8CAA4B;;;;;;;;;;;;;;;;;;gBAI1E,mBAAmB,yBAClB,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAE,WAAU;sDAAuD;;;;;;sDACpE,8OAAC;4CAAE,WAAU;sDAA4B;;;;;;;;;;;;8CAI3C,8OAAC,uKAAI;oCACH,MAAK;oCACL,WAAU;8CACX;;;;;;;;;;;;sCAKH,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAM,WAAW,GAAG,WAAW,IAAI,CAAC;8DAAE;;;;;;8DACvC,8OAAC;oDAAK,WAAU;;wDAAqF;wDACnF,aAAa,OAAO,OAAO,CAAC,IAAM,EAAE,QAAQ,EAAE,UAAU;wDAAI;wDAAkB,sBAAsB,MAAM,IAAI;;;;;;;;;;;;;sDAGlI,8OAAC;4CACC,WAAU;4CACV,OAAO,uBAAuB;4CAC9B,UAAU,CAAC;gDACT,uBAAuB;gDACvB,uBAAuB,OAAO,EAAE,MAAM,CAAC,KAAK,KAAK;4CACnD;;8DAEA,8OAAC;oDAAO,OAAM;8DAAG;;;;;;gDAChB,CAAC,YAAY,SAAS,EAAE,EACtB,MAAM,CAAC,CAAC,IAAM,EAAE,QAAQ,EACxB,GAAG,CAAC,CAAC,qBACJ,8OAAC;wDAAqB,OAAO,KAAK,EAAE;;4DACjC,KAAK,IAAI;4DAAC;4DAAE,KAAK,IAAI,GAAG,CAAC,EAAE,EAAE,KAAK,IAAI,EAAE,GAAG;;uDADjC,KAAK,EAAE;;;;;;;;;;;wCAKzB,CAAC,YAAY,OAAO,wBACnB,8OAAC;4CAAE,WAAU;sDAA4B;;;;;;;;;;;;8CAI7C,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAM,WAAW;sDAAY;;;;;;sDAC9B,8OAAC;4CAAI,WAAU;;gDACZ,CAAC,aAAa,SAAS,EAAE,EACvB,MAAM,CAAC,CAAC,IAAM,EAAE,QAAQ,EACxB,GAAG,CAAC,CAAC;oDACJ,MAAM,UAAU,sBAAsB,QAAQ,CAAC,GAAG,EAAE;oDACpD,qBACE,8OAAC;wDAEC,WAAW,CAAC,gEAAgE,EAC1E,UACI,4DACA,4CACL,8CAA8C,CAAC;;0EAEhD,8OAAC;gEACC,MAAK;gEACL,SAAS;gEACT,UAAU,CAAC,IACT,yBAAyB,CAAC,OACxB,EAAE,MAAM,CAAC,OAAO,GAAG;+EAAI;4EAAM,GAAG,EAAE;yEAAC,GAAG,KAAK,MAAM,CAAC,CAAC,KAAO,OAAO,GAAG,EAAE;gEAG1E,WAAU;;;;;;0EAEZ,8OAAC;0EAAM,GAAG,IAAI;;;;;;0EACd,8OAAC;gEAAK,WAAU;;oEAA4B;oEAAE,GAAG,YAAY;;;;;;;;uDAlBxD,GAAG,EAAE;;;;;gDAqBhB;gDACD,CAAC,aAAa,OAAO,wBACpB,8OAAC;oDAAE,WAAU;8DAA4B;;;;;;gDAE1C,sBAAsB,MAAM,KAAK,KAAK,CAAC,aAAa,OAAO,UAAU,CAAC,IAAI,mBACzE,8OAAC;oDAAE,WAAU;8DAA2B;;;;;;;;;;;;;;;;;;;;;;;;sCAMhD,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAM,WAAW;8CAAY;;;;;;8CAC9B,8OAAC;oCAAI,WAAU;;wCACZ,CAAC,YAAY,SAAS,EAAE,EAAE,GAAG,CAAC,CAAC;4CAC9B,MAAM,UAAU,sBAAsB,QAAQ,CAAC,OAAO,EAAE;4CACxD,qBACE,8OAAC;gDAEC,WAAW,CAAC,gEAAgE,EAC1E,UAAU,4DAA4D,4CACvE,8CAA8C,CAAC;;kEAEhD,8OAAC;wDACC,MAAK;wDACL,SAAS;wDACT,UAAU,CAAC,IACT,yBAAyB,CAAC,OACxB,EAAE,MAAM,CAAC,OAAO,GAAG;uEAAI;oEAAM,OAAO,EAAE;iEAAC,GAAG,KAAK,MAAM,CAAC,CAAC,KAAO,OAAO,OAAO,EAAE;wDAGlF,WAAU;;;;;;kEAEZ,8OAAC;kEAAM,OAAO,QAAQ,IAAI,OAAO,KAAK,IAAI;;;;;;oDACzC,OAAO,eAAe,kBAAI,8OAAC;wDAAK,WAAU;kEAA+B;;;;;;;+CAhBrE,OAAO,EAAE;;;;;wCAmBpB;wCACC,CAAC,YAAY,OAAO,wBACnB,8OAAC;4CAAE,WAAU;sDAA4B;;;;;;;;;;;;;;;;;;;;;;;;8BAOjD,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAM,WAAW;sCAAY;;;;;;sCAC9B,8OAAC;4BACC,MAAK;4BACL,OAAO;4BACP,UAAU,CAAC,IAAM,WAAW,EAAE,MAAM,CAAC,KAAK;4BAC1C,WAAW,WAAW;4BACtB,aAAY;;;;;;;;;;;;;;;;;;IAMpB,MAAM,oBAAoB,kBACxB,8OAAC;YAAI,KAAK;YAAY,WAAU;;8BAC9B,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;;sDACC,8OAAC;4CAAE,WAAW;sDAAY;;;;;;sDAC1B,8OAAC;4CAAE,WAAU;sDAA4B;;;;;;;;;;;;8CAE3C,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CACC,MAAK;4CACL,SAAS,IAAM,eAAe;4CAC9B,WAAW,CAAC,gDAAgD,EAC1D,CAAC,cAAc,+BAA+B,iBAC9C;sDAED,iBAAiB,iBAAiB;;;;;;sDAErC,8OAAC;4CACC,MAAK;4CACL,SAAS,IAAM,eAAe;4CAC9B,WAAW,CAAC,gDAAgD,EAC1D,cAAc,+BAA+B,iBAC7C;sDAED,iBAAiB,mBAAmB;;;;;;;;;;;;;;;;;;sCAI3C,8OAAC;4BAAE,WAAU;sCACV,iBACG,oIACA;;;;;;wBAEL,YAAY,OAAO,kBAClB,8OAAC;4BAAE,WAAW;;8CACZ,8OAAC;oCAAK,aAAW;8CAAC;;;;;;gCACjB,YAAY,OAAO;;;;;;;wBAGvB,oCACC,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAK,aAAW;sDAAC;;;;;;sDAClB,8OAAC;sDAAM,iBAAiB,8CAA8C;;;;;;;;;;;;8CAExE,8OAAC;oCAAE,WAAU;8CACV,6BACC,CAAC,iBACG,0IACA,mIAAmI;;;;;;8CAE3I,8OAAC;oCAAI,WAAU;;wCACZ,gCACC,8OAAC;4CACC,MAAK;4CACL,SAAS,IAAM,OAAO,IAAI,CAAC;4CAC3B,WAAU;sDACX;;;;;;wCAIF,gDACC,8OAAC;4CACC,MAAK;4CACL,SAAS,IAAM,OAAO,IAAI,CAAC;4CAC3B,WAAU;sDACX;;;;;;;;;;;;;;;;;;;;;;;;8BASX,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;;sDACC,8OAAC;4CAAE,WAAW;sDAAY;;;;;;sDAC1B,8OAAC;4CAAE,WAAU;;gDAA4B;gDACvB;gDAAW;gDAAa;gDAAY;;;;;;;;;;;;;8CAGxD,8OAAC;oCACC,MAAK;oCACL,SAAS,IAAM,yBAAyB,CAAC,OAAS,CAAC;oCACnD,WAAW,CAAC,mEAAmE,EAC7E,wBACI,6DACA,6CACJ;8CAED,wBAAwB,wBAAwB;;;;;;;;;;;;wBAIpD,CAAC,sCACA,8OAAC;4BAAI,WAAU;;gCAAoF;gCACvB;gCACzE,iBAAiB,qBAAqB;gCAAiB;;;;;;iDAG1D;;8CACE,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAK,WAAU;;gDACb;gDAAkB;gDAAI;;;;;;;sDAEzB,8OAAC;4CAAK,WAAU;;gDAAsF;gDAC3F,sBAAsB,WAAW,YAAY,sBAAsB,YAAY,YAAY;;;;;;;;;;;;;8CAIxG,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAE,WAAW;8DAAY;;;;;;8DAC1B,8OAAC;oDAAI,WAAU;8DACZ,AAAC;wDACA;4DAAE,OAAO;4DAAQ,OAAO;wDAAS;wDACjC;4DAAE,OAAO;4DAAU,OAAO,CAAC,IAAI,EAAE,aAAa;wDAAC;wDAC/C;4DAAE,OAAO;4DAAU,OAAO;wDAAc;qDACzC,CAAW,GAAG,CAAC,CAAC,oBACf,8OAAC;4DAEC,MAAK;4DACL,SAAS,IAAM,oBAAoB,IAAI,KAAK;4DAC5C,WAAW,CAAC,mEAAmE,EAC7E,qBAAqB,IAAI,KAAK,GAC1B,6DACA,6CACJ;sEAED,IAAI,KAAK;2DATL,IAAI,KAAK;;;;;;;;;;gDAanB,qBAAqB,0BACpB,8OAAC;oDAAI,WAAU;8DACZ,AAAC;wDACA;4DAAE,OAAO;4DAAO,OAAO;wDAAqB;wDAC5C;4DAAE,OAAO;4DAAY,OAAO;wDAAoB;qDACjD,CAAW,GAAG,CAAC,CAAC,oBACf,8OAAC;4DAEC,MAAK;4DACL,SAAS,IAAM,qBAAqB,IAAI,KAAK;4DAC7C,WAAW,CAAC,mEAAmE,EAC7E,sBAAsB,IAAI,KAAK,GAC3B,6DACA,6CACJ;sEAED,IAAI,KAAK;2DATL,CAAC,UAAU,EAAE,IAAI,KAAK,EAAE;;;;;;;;;;gDAcpC,qBAAqB,0BACpB,8OAAC;oDAAE,WAAU;;wDAA4B;wDAC0B;wDAAW;;;;;;;;;;;;;sDAKlF,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAE,WAAW;8DAAY;;;;;;8DAC1B,8OAAC;oDAAI,WAAU;8DACZ,AAAC;wDACA;4DAAE,OAAO;4DAAQ,OAAO;wDAAoB;wDAC5C;4DAAE,OAAO;4DAAe,OAAO;wDAAgB;wDAC/C;4DAAE,OAAO;4DAAU,OAAO,CAAC,IAAI,EAAE,aAAa;wDAAC;wDAC/C;4DAAE,OAAO;4DAAU,OAAO;wDAAc;qDACzC,CAAW,GAAG,CAAC,CAAC,oBACf,8OAAC;4DAEC,MAAK;4DACL,SAAS,IAAM,yBAAyB,IAAI,KAAK;4DACjD,WAAW,CAAC,mEAAmE,EAC7E,0BAA0B,IAAI,KAAK,GAC/B,iDACA,6CACJ;sEAED,IAAI,KAAK;2DATL,IAAI,KAAK;;;;;;;;;;gDAanB,0BAA0B,0BACzB,8OAAC;oDAAI,WAAU;8DACZ,AAAC;wDACA;4DAAE,OAAO;4DAAO,OAAO;wDAAqB;wDAC5C;4DAAE,OAAO;4DAAY,OAAO;wDAAoB;qDACjD,CAAW,GAAG,CAAC,CAAC,oBACf,8OAAC;4DAEC,MAAK;4DACL,SAAS,IAAM,0BAA0B,IAAI,KAAK;4DAClD,WAAW,CAAC,mEAAmE,EAC7E,2BAA2B,IAAI,KAAK,GAChC,iDACA,6CACJ;sEAED,IAAI,KAAK;2DATL,CAAC,WAAW,EAAE,IAAI,KAAK,EAAE;;;;;;;;;;gDAcrC,0BAA0B,0BACzB,8OAAC;oDAAE,WAAU;;wDAA4B;wDACgC;wDAAW;;;;;;;;;;;;;;;;;;;8CAM1F,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAE,WAAW;sDAAY;;;;;;sDAC1B,8OAAC;4CAAI,WAAU;sDACZ,AAAC;gDACA;oDAAE,OAAO;oDAAU,OAAO;gDAAU;gDACpC;oDAAE,OAAO;oDAAW,OAAO;gDAAU;gDACrC;oDAAE,OAAO;oDAAY,OAAO;gDAAa;6CAC1C,CAAW,GAAG,CAAC,CAAC,oBACf,8OAAC;oDAEC,MAAK;oDACL,SAAS,IAAM,qBAAqB,IAAI,KAAK;oDAC7C,WAAW,CAAC,mEAAmE,EAC7E,sBAAsB,IAAI,KAAK,GAC3B,6DACA,6CACJ;8DAED,IAAI,KAAK;mDATL,CAAC,QAAQ,EAAE,IAAI,KAAK,EAAE;;;;;;;;;;sDAajC,8OAAC;4CAAE,WAAU;sDAA4B;;;;;;;;;;;;8CAK3C,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAE,WAAU;sDAAwD;;;;;;sDACrE,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAI,WAAU;;sEACb,8OAAC;4DAAE,WAAU;sEAAuD;;;;;;sEACpE,8OAAC;4DAAE,WAAU;sEAAyC;;;;;;sEACtD,8OAAC;4DAAE,WAAU;sEAA6B;;;;;;;;;;;;8DAE5C,8OAAC;oDAAI,WAAU;;sEACb,8OAAC;4DAAE,WAAU;sEAAuD;;;;;;sEACpE,8OAAC;4DAAE,WAAU;sEAAyC;;;;;;sEACtD,8OAAC;4DAAE,WAAU;sEAA6B;;;;;;;;;;;;;;;;;;wCAG7C,YAAY,MAAM,GAAG,mBACpB,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAE,WAAU;8DAAgB;;;;;;8DAC7B,8OAAC;oDAAI,WAAU;8DACZ,YAAY,GAAG,CAAC,CAAC,qBAChB,8OAAC;;gEAAa;gEAAG;;2DAAT;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;gBAUvB,4BACC,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAE,WAAW;8CAAa,iBAAiB,yBAAyB;;;;;;8CACrE,8OAAC;oCAAK,WAAU;8CAAoG;;;;;;;;;;;;sCAItH,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAM,WAAW;sDACf,iBAAiB,sBAAsB;;;;;;sDAE1C,8OAAC;4CACC,MAAK;4CACL,OAAO;4CACP,UAAU,CAAC,IAAM,kBAAkB,EAAE,MAAM,CAAC,KAAK;4CACjD,WAAW,WAAW;4CACtB,aAAa,iBAAiB,6BAA6B;;;;;;;;;;;;8CAG/D,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAM,WAAW;sDAAY;;;;;;sDAC9B,8OAAC;4CACC,MAAK;4CACL,KAAK;4CACL,OAAO;4CACP,UAAU,CAAC,IAAM,gBAAgB,EAAE,MAAM,CAAC,KAAK;4CAC/C,WAAW,WAAW;4CACtB,aAAY;;;;;;;;;;;;;;;;;;sCAIlB,8OAAC;4BAAE,WAAU;sCAA4B;;;;;;;;;;;yCAK3C,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAG,WAAW;8CAAa;;;;;;8CAC5B,8OAAC;oCACC,MAAK;oCACL,SAAS;oCACT,WAAU;;wCACX;wCACc;;;;;;;;;;;;;sCAIjB,8OAAC;4BAAI,WAAU;sCACZ,YAAY,GAAG,CAAC,CAAC,KAAK;gCACrB,MAAM,SAAS,OAAO,CAAC,IAAI,KAAK,IAAI,GAAG,EAAE,QAAQ,GAAG,OAAO,CAAC,KAAK;gCACjE,MAAM,YAAY,OAAO,QAAQ,CAAC,UAAU,SAAS;gCACrD,MAAM,UAAU,kBAAkB,WAAW,SAAS,cAAc;gCACpE,MAAM,mBAAmB,QAAQ,gBAAgB,IAAI,QAAQ,QAAQ,GAAG,QAAQ,cAAc;gCAC9F,qBACE,8OAAC;oCAEC,WAAU;;sDAEV,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAK,WAAU;;sEACd,8OAAC;4DAAK,aAAW;4DAAC,WAAU;sEAAiB;;;;;;wDAC5C;wDAAiB;wDAAE,MAAM;;;;;;;gDAE3B,YAAY,MAAM,GAAG,mBACpB,8OAAC;oDACC,MAAK;oDACL,SAAS,IAAM,uBAAuB;oDACtC,WAAU;8DACX;;;;;;;;;;;;sDAKL,8OAAC;4CAAI,WAAU;sDACb,cAAA,8OAAC;gDAAI,WAAU;;kEACb,8OAAC;wDAAM,WAAW;;4DACf,iBAAiB,sBAAsB;4DAAkB;0EAAC,8OAAC;gEAAK,aAAW;0EAAC;;;;;;;;;;;;kEAE/E,8OAAC;wDACC,MAAK;wDACL,OAAO,IAAI,IAAI;wDACf,UAAU,CAAC,IAAM,mBAAmB,KAAK,QAAQ,EAAE,MAAM,CAAC,KAAK;wDAC/D,WAAW,WAAW;wDACtB,aAAY;;;;;;;;;;;;;;;;;sDAKlB,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAI,WAAU;;sEACb,8OAAC;4DAAM,WAAW;;gEAAY;8EAClB,8OAAC;oEAAK,aAAW;8EAAC;;;;;;;;;;;;sEAE9B,8OAAC;4DACC,MAAK;4DACL,KAAK,cAAc,IAAI;4DACvB,MAAK;4DACL,OAAO,IAAI,KAAK;4DAChB,UAAU,CAAC,IAAM,mBAAmB,KAAK,SAAS,EAAE,MAAM,CAAC,KAAK;4DAChE,WAAW,WAAW;4DACtB,aAAY;;;;;;sEAEd,8OAAC;4DAAE,WAAU;;gEAA4B;gEAAI;gEAAiB;;;;;;;;;;;;;8DAEhE,8OAAC;oDAAI,WAAU;;sEACb,8OAAC;4DAAM,WAAW;sEAAY;;;;;;sEAC9B,8OAAC;4DACC,MAAK;4DACL,KAAK;4DACL,OAAO,IAAI,aAAa;4DACxB,UAAU,CAAC,IAAM,mBAAmB,KAAK,iBAAiB,EAAE,MAAM,CAAC,KAAK;4DACxE,WAAW,WAAW;4DACtB,aAAY;;;;;;;;;;;;8DAGhB,8OAAC;oDAAI,WAAU;;sEACb,8OAAC;4DAAE,WAAU;sEAA0C;;;;;;sEACvD,8OAAC;4DAAI,WAAU;;8EACb,8OAAC;;wEAAE;wEAAU,CAAC,QAAQ,YAAY,GAAG,GAAG,EAAE,OAAO,CAAC;wEAAG;;;;;;;8EACrD,8OAAC;;wEAAE;wEAAqB,CAAC,QAAQ,iBAAiB,GAAG,GAAG,EAAE,OAAO,CAAC;wEAAG;;;;;;;8EACrE,8OAAC;oEAAE,WAAU;;wEAAgB;wEAAqB,CAAC,mBAAmB,GAAG,EAAE,OAAO,CAAC;wEAAG;;;;;;;;;;;;;;;;;;;;;;;;;wCAK3F,yBACC,CAAC,AAAC,qBAAqB,YAAY,sBAAsB,cACtD,0BAA0B,YAAY,2BAA2B,UAAW,mBAC7E,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDAAK,WAAU;8DACb,iBAAiB,+BAA+B;;;;;;gDAElD,qBAAqB,YAAY,sBAAsB,4BACtD,8OAAC;oDAAM,WAAU;;sEACf,8OAAC;4DACC,MAAK;4DACL,SAAS,QAAQ,IAAI,YAAY;4DACjC,UAAU,IAAM,iBAAiB,KAAK;;;;;;sEAExC,8OAAC;sEAAK;;;;;;;;;;;;gDAGT,0BAA0B,YAAY,2BAA2B,4BAChE,8OAAC;oDAAM,WAAU;;sEACf,8OAAC;4DACC,MAAK;4DACL,SAAS,QAAQ,IAAI,iBAAiB;4DACtC,UAAU,IAAM,iBAAiB,KAAK;;;;;;sEAExC,8OAAC;sEAAK;;;;;;;;;;;;;;;;;;;mCA9FX;;;;;4BAqGX;;;;;;sCAGF,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAE,WAAW;8CAAY;;;;;;8CAC1B,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CACC,MAAK;4CACL,SAAS,IAAM,WAAW;4CAC1B,WAAW,CAAC,gDAAgD,EAC1D,YAAY,UAAU,+BAA+B,iBACrD;sDACH;;;;;;sDAGD,8OAAC;4CACC,MAAK;4CACL,SAAS,IAAM,WAAW;4CAC1B,WAAW,CAAC,gDAAgD,EAC1D,YAAY,aAAa,+BAA+B,iBACxD;sDACH;;;;;;;;;;;;8CAIH,8OAAC;oCAAE,WAAU;;wCAA4B;wCACD;wCAAiB;;;;;;;;;;;;;;;;;;;;;;;;;IAQnE,MAAM,mBAAmB;QACvB,MAAM,iBAAiB;QACvB,MAAM,cACJ,mBAAmB,UACf,oBACA,mBAAmB,iBACjB,iBACA;QACR,MAAM,aACJ,mBAAmB,UACf,uBACA,mBAAmB,iBACjB,2CACA;QACR,MAAM,gBAAgB,kBAAkB;QACxC,MAAM,eAAe,cAAc,MAAM,KAAK,IAAI,cAAc,CAAC,eAAe,EAAE,cAAc,MAAM,EAAE;QACxG,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAE,WAAW;kDAAY;;;;;;kDAC1B,8OAAC;wCAAE,WAAU;kDAAwB;;;;;;;;;;;;0CAEvC,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAK,WAAU;kDAAwD;;;;;;kDACxE,8OAAC;wCAAK,WAAU;kDAAsC;;;;;;;;;;;;;;;;;;kCAG1D,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;;kEACC,8OAAC;wDAAE,WAAW,GAAG,WAAW,MAAM,CAAC;;0EACjC,8OAAC;gEAAK,aAAW;gEAAC,WAAU;0EAAiB;;;;;;4DAAQ;;;;;;;kEAGvD,8OAAC;wDAAE,WAAU;kEAA4B,SAAS;;;;;;;;;;;;0DAEpD,8OAAC;gDACC,MAAK;gDACL,SAAS,IAAM,WAAW;gDAC1B,WAAU;0DACX;;;;;;;;;;;;kDAIH,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAI,WAAU;0DACZ,WACC,qDAAqD;8DACrD,8OAAC;oDAAI,KAAK;oDAAU,KAAI;oDAAO,WAAU;;;;;yEAEzC,8OAAC;oDAAI,WAAU;8DAA2E;;;;;;;;;;;0DAK9F,8OAAC;gDAAE,WAAU;0DAAsC,eAAe;;;;;;;;;;;;;;;;;;0CAItE,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;;kEACC,8OAAC;wDAAE,WAAW,GAAG,WAAW,MAAM,CAAC;;0EACjC,8OAAC;gEAAK,aAAW;gEAAC,WAAU;0EAAiB;;;;;;4DAAS;;;;;;;kEAGxD,8OAAC;wDAAE,WAAU;;4DACV,gBAAgB;4DAAkB;4DAAI,gBAAgB;;;;;;;;;;;;;0DAG3D,8OAAC;gDACC,MAAK;gDACL,SAAS,IAAM,WAAW;gDAC1B,WAAU;0DACX;;;;;;;;;;;;kDAIH,8OAAC;wCAAE,WAAU;;4CACV,WAAW,IAAI,KAAK,UAAU,cAAc,KAAK;4CAAsB;4CACvE,SAAS,CAAC,EAAE,EAAE,IAAI,KAAK,QAAQ,cAAc,IAAI,GAAG;;;;;;;oCAEtD,yBACC,8OAAC;wCAAE,WAAU;;0DACX,8OAAC;gDAAK,aAAW;gDAAC,WAAU;0DAAgB;;;;;;4CAC3C;;;;;;;;;;;;;0CAKP,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;;kEACC,8OAAC;wDAAE,WAAW,GAAG,WAAW,MAAM,CAAC;;0EACjC,8OAAC;gEAAK,aAAW;gEAAC,WAAU;0EAAiB;;;;;;4DAC5C;;;;;;;kEAEH,8OAAC;wDAAE,WAAU;kEACV,cACG,CAAC,OAAO,EAAE,eAAe,eAAe,cAAc,GACtD,GAAG,eAAe,MAAM,CAAC,KAAK,EAAE,eAAe,MAAM,KAAK,IAAI,KAAK,IAAI,IAAI,EAAE,aAAa;;;;;;;;;;;;0DAGlG,8OAAC;gDACC,MAAK;gDACL,SAAS,IAAM,WAAW;gDAC1B,WAAU;0DACX;;;;;;;;;;;;oCAIF,CAAC,6BACA,8OAAC;wCAAG,WAAU;kDACX,eAAe,GAAG,CAAC,CAAC,kBACnB,8OAAC;gDAAgC,WAAU;;kEACzC,8OAAC;kEAAM,EAAE,IAAI;;;;;;kEACb,8OAAC;wDAAK,WAAU;;4DAAiB,EAAE,KAAK,CAAC,OAAO,CAAC;4DAAG;;;;;;;;+CAF7C,GAAG,EAAE,IAAI,CAAC,CAAC,EAAE,EAAE,KAAK,EAAE;;;;;;;;;;oCAOpC,6BAAe,8OAAC;wCAAE,WAAU;;4CAAwB;4CAAsB;4CAAkB;;;;;;;;;;;;;0CAG/F,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;;kEACC,8OAAC;wDAAE,WAAW,GAAG,WAAW,MAAM,CAAC;;0EACjC,8OAAC;gEAAK,aAAW;gEAAC,WAAU;0EAAiB;;;;;;4DAAU;;;;;;;kEAGzD,8OAAC;wDAAE,WAAU;kEACV,cAAe,iBAAiB,mBAAmB,kBAAmB,iBAAiB,iBAAiB;;;;;;;;;;;;0DAG7G,8OAAC;gDACC,MAAK;gDACL,SAAS,IAAM,WAAW;gDAC1B,WAAU;0DACX;;;;;;;;;;;;kDAIH,8OAAC;wCAAE,WAAU;;4CAAwB;4CAAU;;;;;;;kDAC/C,8OAAC;wCAAE,WAAU;kDAA6B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAMtD;IAEA,qBACE,8OAAC;QACC,UAAU;QACV,UAAU,CAAC;YACT,EAAE,cAAc;YAChB;QACF;QACA,WAAU;;0BAEV,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAK,aAAW;gDAAC,WAAU;0DAAiB;;;;;;4CAC5C,iBAAiB,0BAA0B;;;;;;;kDAE9C,8OAAC;wCAAG,WAAU;kDACX,iBAAiB,gCAAgC;;;;;;kDAEpD,8OAAC;wCAAE,WAAU;kDAAwB;;;;;;;;;;;;0CAEvC,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,uKAAI;wCACH,MAAK;wCACL,WAAW,kJAAa;kDACzB;;;;;;kDAGD,8OAAC;wCACC,MAAK;wCACL,SAAS;wCACT,WAAW,kJAAa;kDACzB;;;;;;oCAGA,8BACC,8OAAC;wCAAK,WAAU;kDAA0E;;;;;;;;;;;;;;;;;;;;;;;;0BAQhG,8OAAC;gBAAI,WAAU;;kCACf,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC,6KAAW;4BACV,OAAO;4BACP,SAAS;4BACT,kBAAkB,KAAK,GAAG,CAAC,gBAAgB;4BAC3C,QAAQ,CAAC;gCACP,MAAM,MAAM,YAAY,SAAS,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;gCAClD,MAAM,eAAe,KAAK,GAAG,CAAC,gBAAgB;gCAC9C,IAAI,OAAO,KAAK,OAAO,cAAc,eAAe;4BACtD;;;;;;;;;;;oBAIH,aAAa,MAAM,GAAG,mBACrB,8OAAC;wBACC,KAAK;wBACL,UAAU,CAAC;wBACX,WAAU;wBACV,aAAU;;0CAEV,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAK,aAAW;kDAAC;;;;;;kDAClB,8OAAC;kDAAK;;;;;;;;;;;;0CAER,8OAAC;gCAAG,WAAU;0CACX,aAAa,GAAG,CAAC,CAAC,oBACjB,8OAAC;kDACC,cAAA,8OAAC;4CACC,MAAK;4CACL,SAAS,IAAM,WAAW,IAAI,KAAK;4CACnC,WAAU;;8DAEV,8OAAC;oDAAK,aAAW;8DAAC;;;;;;8DAClB,8OAAC;8DAAM,IAAI,OAAO;;;;;;;;;;;;uCAPb,GAAG,IAAI,KAAK,CAAC,CAAC,EAAE,IAAI,OAAO,EAAE;;;;;;;;;;;;;;;;kCAe9C,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BAEC,WAAW,cAAc,UAAU,yBAAyB;;gCAE3D,kBAAkB,YAAY;gCAC9B,kBAAkB,aAAa;gCAC/B,kBAAkB,cAAc;gCAChC,kBAAkB,aAAa;gCAC/B,kBAAkB,YAAY;;2BAP1B;;;;;;;;;;kCAWT,8OAAC;wBAAI,KAAK;wBAAa,WAAU;;4BAC9B,6BACC,8OAAC;gCACC,SAAS,gBAAgB,UAAU;gCACnC,OAAM;gCACN,SAAS;gCACT,aAAY;gCACZ,UAAU,IAAM,OAAO,IAAI,CAAC;;;;;;4BAG/B,iCAAmB,8OAAC;gCAAU,SAAQ;gCAAU,SAAS;;;;;;4BACzD,8BAAgB,8OAAC;gCAAU,SAAQ;gCAAQ,SAAS;;;;;;4BACpD,8BACC,8OAAC;gCACC,SAAQ;gCACR,OAAO,CAAC,6BAA6B,EAAE,YAAY;gCACnD,SAAS;;;;;;;;;;;;kCAKf,8OAAC,mKAAgB;wBACf,WAAU;wBACV,WACE,gBAAgB,UAAU,MAAM,GAAG,IAC/B,iBACE,2BACA,iBACF;wBAEN,QACE,kBAAkB,YACd,cACE,iBACE,iDACA,+CACF,qBACE,6BACA,CAAC,iBACG,yEACA,qEAAqE,IACzE,iBACE,sDACA,oDACN,kBAAkB,WAChB,gEACA;wBAER,gBAAgB;wBAChB,SAAS;wBACT,cAAc,gBAAgB,UAAU,MAAM,GAAG,IAAI,eAAe;wBACpE,iBAAiB;wBACjB,aAAa,gBAAgB;wBAC7B,QAAQ;wBACR,QAAQ;;;;;;;;;;;;YAIX,iCACC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;;kDACC,8OAAC;wCAAE,WAAU;kDACV,iBAAiB,4BAA4B;;;;;;kDAEhD,8OAAC;wCAAE,WAAU;kDAAiC;;;;;;;;;;;;0CAEhD,8OAAC;gCACC,MAAK;gCACL,SAAS,IAAM,mBAAmB;gCAClC,WAAU;gCACV,cAAW;0CACZ;;;;;;;;;;;;kCAIH,8OAAC;wBAAI,WAAU;;4BACZ,gBAAgB,IAAI,kBACnB,8OAAC,uKAAI;gCACH,MAAM,CAAC,SAAS,EAAE,gBAAgB,IAAI,EAAE;gCACxC,WAAU;0CACX;;;;;;4BAIF,gBAAgB,OAAO,kBACtB,8OAAC,uKAAI;gCACH,MAAM,CAAC,qBAAqB,EAAE,gBAAgB,OAAO,EAAE;gCACvD,WAAU;0CAET,iBAAiB,mBAAmB;;;;;;0CAGzC,8OAAC;gCACC,MAAK;gCACL,SAAS;gCACT,WAAU;0CAET,iBAAiB,wBAAwB;;;;;;;;;;;;;;;;;;YAMjD,OAAO,MAAM,GAAG,mBACf,8OAAC;gBAAI,WAAU;0BACZ,OAAO,GAAG,CAAC,CAAC,sBACX,8OAAC;wBAEC,WAAW,CAAC,gFAAgF,EAC1F,MAAM,IAAI,KAAK,YACX,4DACA,+CACJ;kCAED,MAAM,OAAO;uBAPT,MAAM,EAAE;;;;;;;;;;;;;;;;AAc3B"}}]
}