{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/nuno/orya/ORYA-WebApp/app/organizador/%28dashboard%29/updates/page.tsx"],"sourcesContent":["\"use client\";\n\nimport Link from \"next/link\";\nimport { useMemo, useState } from \"react\";\nimport useSWR from \"swr\";\nimport ObjectiveSubnav from \"@/app/organizador/ObjectiveSubnav\";\n\nconst fetcher = (url: string) => fetch(url).then((res) => res.json());\n\nconst CATEGORY_LABELS: Record<string, string> = {\n  TODAY: \"Hoje\",\n  CHANGES: \"Alterações\",\n  RESULTS: \"Resultados\",\n  CALL_UPS: \"Convocatórias\",\n};\n\nconst STATUS_LABELS: Record<string, string> = {\n  DRAFT: \"Rascunho\",\n  PUBLISHED: \"Publicado\",\n  ARCHIVED: \"Arquivado\",\n};\n\ntype UpdateItem = {\n  id: number;\n  title: string;\n  body: string | null;\n  category: string;\n  status: string;\n  isPinned: boolean;\n  event: { id: number; title: string } | null;\n  publishedAt: string | null;\n  createdAt: string;\n};\n\ntype UpdatesPageProps = {\n  embedded?: boolean;\n};\n\nexport default function UpdatesPage({ embedded }: UpdatesPageProps) {\n  const { data, mutate, isLoading } = useSWR<{ ok: boolean; items: UpdateItem[] }>(\n    \"/api/organizador/updates\",\n    fetcher,\n  );\n  const { data: eventsData } = useSWR<{ ok: boolean; items: { id: number; title: string }[] }>(\n    \"/api/organizador/events/list?limit=80\",\n    fetcher,\n  );\n\n  const updates = data?.items ?? [];\n  const events = eventsData?.items ?? [];\n\n  const [editingId, setEditingId] = useState<number | null>(null);\n  const [title, setTitle] = useState(\"\");\n  const [body, setBody] = useState(\"\");\n  const [category, setCategory] = useState(\"TODAY\");\n  const [status, setStatus] = useState(\"DRAFT\");\n  const [isPinned, setIsPinned] = useState(false);\n  const [eventId, setEventId] = useState<number | \"\">(\"\");\n  const [saving, setSaving] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [success, setSuccess] = useState<string | null>(null);\n\n  const resetForm = () => {\n    setEditingId(null);\n    setTitle(\"\");\n    setBody(\"\");\n    setCategory(\"TODAY\");\n    setStatus(\"DRAFT\");\n    setIsPinned(false);\n    setEventId(\"\");\n  };\n\n  const handleEdit = (update: UpdateItem) => {\n    setEditingId(update.id);\n    setTitle(update.title);\n    setBody(update.body ?? \"\");\n    setCategory(update.category);\n    setStatus(update.status);\n    setIsPinned(update.isPinned);\n    setEventId(update.event?.id ?? \"\");\n  };\n\n  const handleSave = async () => {\n    setError(null);\n    setSuccess(null);\n    if (!title.trim()) {\n      setError(\"Indica um título curto para o update.\");\n      return;\n    }\n\n    setSaving(true);\n    const payload = {\n      title: title.trim(),\n      body: body.trim(),\n      category,\n      status,\n      isPinned,\n      eventId: eventId === \"\" ? null : eventId,\n    };\n\n    try {\n      const res = await fetch(\n        editingId ? `/api/organizador/updates/${editingId}` : \"/api/organizador/updates\",\n        {\n          method: editingId ? \"PATCH\" : \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify(payload),\n        },\n      );\n      const json = await res.json().catch(() => null);\n      if (!res.ok || json?.ok === false) {\n        setError(json?.error || \"Erro ao guardar update.\");\n        setSaving(false);\n        return;\n      }\n      setSuccess(editingId ? \"Update atualizado.\" : \"Update criado.\");\n      resetForm();\n      mutate();\n    } catch (err) {\n      console.error(\"[updates][save]\", err);\n      setError(\"Erro inesperado ao guardar.\");\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const togglePin = async (update: UpdateItem) => {\n    await fetch(`/api/organizador/updates/${update.id}`, {\n      method: \"PATCH\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ isPinned: !update.isPinned }),\n    });\n    mutate();\n  };\n\n  const archiveUpdate = async (update: UpdateItem) => {\n    await fetch(`/api/organizador/updates/${update.id}`, {\n      method: \"DELETE\",\n    });\n    mutate();\n  };\n\n  const publishQuick = async (update: UpdateItem) => {\n    await fetch(`/api/organizador/updates/${update.id}`, {\n      method: \"PATCH\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ status: \"PUBLISHED\" }),\n    });\n    mutate();\n  };\n\n  const formattedUpdates = useMemo(() => {\n    return updates.map((update) => {\n      const date = update.publishedAt || update.createdAt;\n      const dateLabel = date\n        ? new Date(date).toLocaleString(\"pt-PT\", {\n            day: \"2-digit\",\n            month: \"short\",\n            hour: \"2-digit\",\n            minute: \"2-digit\",\n          })\n        : \"A definir\";\n      return { ...update, dateLabel };\n    });\n  }, [updates]);\n\n  return (\n    <main className=\"relative w-full overflow-hidden text-white\">\n\n      <section\n        className={\n          embedded ? \"relative flex flex-col gap-6\" : \"relative w-full flex flex-col gap-6 px-4 py-8 md:px-6 lg:px-8\"\n        }\n      >\n        {!embedded && <ObjectiveSubnav objective=\"promote\" activeId=\"updates\" />}\n        <header className=\"flex flex-wrap items-center justify-between gap-3 rounded-3xl border border-white/12 bg-gradient-to-br from-white/8 via-[#0b1124]/70 to-[#050810]/90 px-6 py-5 shadow-[0_24px_60px_rgba(0,0,0,0.65)] backdrop-blur-2xl\">\n          <div>\n            <p className=\"text-[11px] uppercase tracking-[0.3em] text-white/60\">Canal oficial</p>\n            <h1 className=\"text-2xl font-semibold\">Atualizações da organização</h1>\n            <p className=\"text-sm text-white/65\">\n              Comunicados curtos, objetivos e sempre com estado claro.\n            </p>\n          </div>\n        </header>\n\n        <section className=\"rounded-3xl border border-white/12 bg-white/5 p-5 shadow-[0_24px_60px_rgba(0,0,0,0.65)] backdrop-blur-2xl\">\n          <div className=\"flex flex-wrap items-center justify-between gap-2\">\n            <h2 className=\"text-lg font-semibold\">{editingId ? \"Editar update\" : \"Novo update\"}</h2>\n            {editingId && (\n              <button\n                type=\"button\"\n                onClick={resetForm}\n                className=\"text-[12px] text-white/60 hover:text-white\"\n              >\n                Cancelar edição\n              </button>\n            )}\n          </div>\n\n          <div className=\"mt-4 grid gap-4 md:grid-cols-2\">\n            <div className=\"space-y-2\">\n              <label className=\"text-[12px] text-white/70\">Título</label>\n              <input\n                className=\"w-full rounded-xl border border-white/15 bg-black/30 px-3 py-2 text-sm outline-none focus:border-[#6BFFFF]\"\n                value={title}\n                onChange={(e) => setTitle(e.target.value)}\n                placeholder=\"Ex: Alteração de horários\"\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <label className=\"text-[12px] text-white/70\">Categoria</label>\n              <select\n                className=\"w-full rounded-xl border border-white/15 bg-black/30 px-3 py-2 text-sm outline-none focus:border-[#6BFFFF]\"\n                value={category}\n                onChange={(e) => setCategory(e.target.value)}\n              >\n                {Object.entries(CATEGORY_LABELS).map(([key, label]) => (\n                  <option key={key} value={key}>\n                    {label}\n                  </option>\n                ))}\n              </select>\n            </div>\n            <div className=\"space-y-2\">\n              <label className=\"text-[12px] text-white/70\">Estado</label>\n              <select\n                className=\"w-full rounded-xl border border-white/15 bg-black/30 px-3 py-2 text-sm outline-none focus:border-[#6BFFFF]\"\n                value={status}\n                onChange={(e) => setStatus(e.target.value)}\n              >\n                {Object.entries(STATUS_LABELS).map(([key, label]) => (\n                  <option key={key} value={key}>\n                    {label}\n                  </option>\n                ))}\n              </select>\n            </div>\n            <div className=\"space-y-2\">\n              <label className=\"text-[12px] text-white/70\">Evento (opcional)</label>\n              <select\n                className=\"w-full rounded-xl border border-white/15 bg-black/30 px-3 py-2 text-sm outline-none focus:border-[#6BFFFF]\"\n                value={eventId}\n                onChange={(e) => setEventId(e.target.value ? Number(e.target.value) : \"\")}\n              >\n                <option value=\"\">Sem evento</option>\n                {events.map((ev) => (\n                  <option key={ev.id} value={ev.id}>\n                    {ev.title}\n                  </option>\n                ))}\n              </select>\n            </div>\n          </div>\n\n          <div className=\"mt-4 space-y-2\">\n            <label className=\"text-[12px] text-white/70\">Mensagem</label>\n            <textarea\n              className=\"w-full min-h-[120px] rounded-xl border border-white/15 bg-black/30 px-3 py-2 text-sm outline-none focus:border-[#6BFFFF]\"\n              value={body}\n              onChange={(e) => setBody(e.target.value)}\n              placeholder=\"Mensagem curta, direta e objetiva.\"\n            />\n          </div>\n\n          <label className=\"mt-4 flex items-center gap-2 text-sm text-white/80\">\n            <input\n              type=\"checkbox\"\n              checked={isPinned}\n              onChange={(e) => setIsPinned(e.target.checked)}\n              className=\"h-4 w-4 rounded border-white/30 bg-black/40 text-[#6BFFFF]\"\n            />\n            Fixar no topo\n          </label>\n\n          {error && <p className=\"mt-3 text-sm text-red-300\">{error}</p>}\n          {success && <p className=\"mt-3 text-sm text-emerald-300\">{success}</p>}\n\n          <button\n            type=\"button\"\n            onClick={handleSave}\n            disabled={saving}\n            className=\"mt-4 w-full rounded-full bg-white px-4 py-2 text-sm font-semibold text-black transition hover:scale-[1.01] disabled:opacity-60\"\n          >\n            {saving ? \"A guardar...\" : editingId ? \"Guardar alterações\" : \"Publicar update\"}\n          </button>\n        </section>\n\n        <section className=\"space-y-4\">\n          <div className=\"flex items-center justify-between\">\n            <h2 className=\"text-lg font-semibold\">Atualizações recentes</h2>\n            <span className=\"text-[12px] text-white/60\">{updates.length} total</span>\n          </div>\n\n          {isLoading && (\n            <div className=\"rounded-2xl border border-white/10 bg-white/5 p-4 text-sm text-white/70\">\n              A carregar atualizações…\n            </div>\n          )}\n\n          {!isLoading && formattedUpdates.length === 0 && (\n            <div className=\"rounded-2xl border border-white/10 bg-white/5 p-6 text-sm text-white/70\">\n              Ainda não publicaste nenhuma atualização.\n            </div>\n          )}\n\n          <div className=\"grid gap-3\">\n            {formattedUpdates.map((update) => (\n              <div\n                key={update.id}\n                className=\"rounded-2xl border border-white/12 bg-white/5 p-4 text-sm text-white/80\"\n              >\n                <div className=\"flex flex-wrap items-center justify-between gap-2\">\n                  <div>\n                    <p className=\"text-[11px] uppercase tracking-[0.2em] text-white/60\">\n                      {CATEGORY_LABELS[update.category] || update.category}\n                      {update.isPinned ? \" · Fixado\" : \"\"}\n                    </p>\n                    <h3 className=\"text-base font-semibold text-white\">{update.title}</h3>\n                    {update.event && (\n                      <p className=\"text-[12px] text-white/60\">Evento: {update.event.title}</p>\n                    )}\n                  </div>\n                  <div className=\"text-[11px] text-white/50\">{update.dateLabel}</div>\n                </div>\n                {update.body && <p className=\"mt-2 text-[12px] text-white/70\">{update.body}</p>}\n                <div className=\"mt-3 flex flex-wrap gap-2 text-[11px]\">\n                  <span className=\"rounded-full border border-white/20 bg-white/10 px-2 py-1\">\n                    {STATUS_LABELS[update.status] || update.status}\n                  </span>\n                  {update.status !== \"PUBLISHED\" && (\n                    <button\n                      type=\"button\"\n                      onClick={() => publishQuick(update)}\n                      className=\"rounded-full border border-emerald-400/40 bg-emerald-500/10 px-2 py-1 text-emerald-100\"\n                    >\n                      Publicar\n                    </button>\n                  )}\n                  <button\n                    type=\"button\"\n                    onClick={() => togglePin(update)}\n                    className=\"rounded-full border border-white/20 bg-white/10 px-2 py-1\"\n                  >\n                    {update.isPinned ? \"Desafixar\" : \"Fixar\"}\n                  </button>\n                  <button\n                    type=\"button\"\n                    onClick={() => handleEdit(update)}\n                    className=\"rounded-full border border-white/20 bg-white/10 px-2 py-1\"\n                  >\n                    Editar\n                  </button>\n                  <button\n                    type=\"button\"\n                    onClick={() => archiveUpdate(update)}\n                    className=\"rounded-full border border-white/20 bg-white/10 px-2 py-1\"\n                  >\n                    Arquivar\n                  </button>\n                </div>\n              </div>\n            ))}\n          </div>\n        </section>\n      </section>\n    </main>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 682, "column": 0}, "map": {"version":3,"sources":["file:///Users/nuno/orya/ORYA-WebApp/app/organizador/%28dashboard%29/padel/PadelHubClient.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\nimport { useRouter, useSearchParams } from \"next/navigation\";\nimport useSWR from \"swr\";\nimport { ConfirmDestructiveActionDialog } from \"@/app/components/ConfirmDestructiveActionDialog\";\nimport { trackEvent } from \"@/lib/analytics\";\nimport { PORTUGAL_CITIES } from \"@/config/cities\";\n\ntype PadelClub = {\n  id: number;\n  name: string;\n  city: string | null;\n  address: string | null;\n  courtsCount: number;\n  slug?: string | null;\n  isActive: boolean;\n  isDefault?: boolean;\n  createdAt: string | Date;\n};\n\ntype PadelClubCourt = {\n  id: number;\n  padelClubId: number;\n  name: string;\n  description: string | null;\n  indoor: boolean;\n  isActive: boolean;\n  displayOrder: number;\n};\n\ntype PadelClubStaff = {\n  id: number;\n  padelClubId: number;\n  userId: string | null;\n  email: string | null;\n  fullName?: string | null;\n  role: string;\n  inheritToEvents: boolean;\n};\n\ntype Player = {\n  id: number;\n  fullName: string;\n  email: string | null;\n  phone: string | null;\n  level: string | null;\n  isActive: boolean;\n  createdAt: string | Date;\n  tournamentsCount?: number;\n};\n\ntype OrganizerStaffMember = {\n  userId: string;\n  fullName: string | null;\n  username: string | null;\n  email: string | null;\n  role: string | null;\n};\n\ntype OrganizerStaffResponse = {\n  ok: boolean;\n  items: OrganizerStaffMember[];\n};\n\nconst PADEL_TABS = [\"calendar\", \"clubs\", \"players\", \"rankings\"] as const;\n\ntype Props = {\n  organizerId: number;\n  organizationKind: string | null;\n  initialClubs: PadelClub[];\n  initialPlayers: Player[];\n};\n\nconst DEFAULT_FORM = {\n  id: null as number | null,\n  name: \"\",\n  city: \"\",\n  address: \"\",\n  courtsCount: \"1\",\n  isActive: true,\n  slug: \"\",\n  isDefault: false,\n};\n\nconst DEFAULT_COURT_FORM = {\n  id: null as number | null,\n  name: \"\",\n  description: \"\",\n  indoor: false,\n  isActive: true,\n  displayOrder: 0,\n};\n\nconst DEFAULT_STAFF_FORM = {\n  id: null as number | null,\n  email: \"\",\n  staffMemberId: \"\",\n  role: \"STAFF\",\n  inheritToEvents: true,\n};\n\nconst badge = (tone: \"green\" | \"amber\" | \"slate\" = \"slate\") =>\n  `rounded-full border px-2 py-[4px] text-[11px] ${\n    tone === \"green\"\n      ? \"border-emerald-400/40 bg-emerald-500/15 text-emerald-100\"\n    : tone === \"amber\"\n        ? \"border-amber-300/40 bg-amber-400/10 text-amber-100\"\n        : \"border-white/15 bg-white/10 text-white/70\"\n  }`;\nconst toast = (msg: string, tone: \"ok\" | \"err\" | \"warn\" = \"ok\") => {\n  if (typeof window === \"undefined\") return;\n  const el = document.createElement(\"div\");\n  el.textContent = msg;\n  el.className = `fixed right-4 top-4 z-[9999] rounded-full px-4 py-2 text-sm font-semibold shadow-lg transition ${\n    tone === \"ok\"\n      ? \"bg-emerald-500 text-black\"\n      : tone === \"warn\"\n        ? \"bg-amber-400 text-black\"\n        : \"bg-red-500 text-white\"\n  }`;\n  document.body.appendChild(el);\n  setTimeout(() => {\n    el.style.opacity = \"0\";\n    el.style.transform = \"translateY(-6px)\";\n    setTimeout(() => el.remove(), 180);\n  }, 1800);\n};\n\nconst fetcher = (url: string) => fetch(url).then((r) => r.json());\n\nconst SkeletonBlock = ({ className = \"\" }: { className?: string }) => (\n  <div\n    className={`animate-pulse rounded-2xl border border-white/10 bg-gradient-to-br from-white/10 via-[#0b1124]/50 to-[#050810]/70 shadow-[0_20px_60px_rgba(0,0,0,0.4)] backdrop-blur-2xl ${className}`}\n  />\n);\n\nconst PadelTabSkeleton = () => (\n  <div className=\"space-y-4\">\n    <div className=\"flex items-center gap-3\">\n      <SkeletonBlock className=\"h-9 w-32\" />\n      <SkeletonBlock className=\"h-9 w-24\" />\n      <SkeletonBlock className=\"h-9 w-24\" />\n    </div>\n    <div className=\"grid gap-3 lg:grid-cols-[1fr_320px]\">\n      <SkeletonBlock className=\"h-[360px]\" />\n      <div className=\"space-y-3\">\n        <SkeletonBlock className=\"h-16\" />\n        <SkeletonBlock className=\"h-14\" />\n        <SkeletonBlock className=\"h-24\" />\n      </div>\n    </div>\n    <div className=\"grid gap-2 md:grid-cols-3\">\n      <SkeletonBlock className=\"h-20\" />\n      <SkeletonBlock className=\"h-20\" />\n      <SkeletonBlock className=\"h-20\" />\n    </div>\n  </div>\n);\n\nconst formatDateTimeLocal = (value: string | Date) => {\n  const d = new Date(value);\n  if (Number.isNaN(d.getTime())) return \"\";\n  const offset = d.getTimezoneOffset();\n  const local = new Date(d.getTime() - offset * 60_000);\n  return local.toISOString().slice(0, 16);\n};\n\nconst formatZoned = (value: string | Date, timeZone: string) => {\n  const d = new Date(value);\n  if (Number.isNaN(d.getTime())) return \"—\";\n  try {\n    return new Intl.DateTimeFormat(\"pt-PT\", {\n      timeZone,\n      day: \"2-digit\",\n      month: \"2-digit\",\n      hour: \"2-digit\",\n      minute: \"2-digit\",\n    }).format(d);\n  } catch {\n    return d.toLocaleString(\"pt-PT\");\n  }\n};\n\ntype TimelineItem = {\n  id: string;\n  kind: \"match\" | \"block\" | \"availability\";\n  label: string;\n  start: Date;\n  end: Date;\n  laneKey: string;\n  laneLabel: string;\n  courtId?: number | null;\n  version?: string;\n  color: string;\n};\n\nconst TimelineView = ({\n  blocks,\n  availabilities,\n  matches,\n  timezone,\n  dayStart,\n  onDrop,\n  laneHints = [],\n  conflictMap,\n  slotMinutes,\n}: {\n  blocks: any[];\n  availabilities: any[];\n  matches: any[];\n  timezone: string;\n  dayStart: Date | null;\n  laneHints?: Array<{ key: string; label: string; courtId?: number | null }>;\n  onDrop?: (payload: { id: string; kind: TimelineItem[\"kind\"]; start: Date; end: Date; courtId?: number | null }) => void;\n  conflictMap: Map<string, string[]>;\n  slotMinutes: number;\n}) => {\n  if (!dayStart) {\n    return <p className=\"text-[12px] text-white/60\">Seleciona uma data válida.</p>;\n  }\n  const laneWidth = 100; // percent\n  const dayLength = 24 * 60 * 60 * 1000;\n  const startDay = new Date(dayStart);\n  startDay.setHours(0, 0, 0, 0);\n  const endDay = new Date(startDay.getTime() + dayLength);\n\n  const toDate = (value: string | Date) => {\n    const d = new Date(value);\n    return Number.isNaN(d.getTime()) ? null : d;\n  };\n\n  const items: TimelineItem[] = [];\n  const lanesSeed = laneHints.reduce<Record<string, { key: string; label: string; courtId?: number | null; items: TimelineItem[] }>>(\n    (acc, hint) => {\n      acc[hint.key] = { ...hint, items: [] };\n      return acc;\n    },\n    {},\n  );\n\n  for (const b of blocks) {\n    const s = toDate(b.startAt);\n    const e = toDate(b.endAt);\n    if (!s || !e) continue;\n    const laneKey = b.courtId ? `court-${b.courtId}` : \"block-generic\";\n    const laneLabel = b.courtName || (b.courtId ? `Court ${b.courtId}` : \"Court\");\n    items.push({\n      id: `block-${b.id}`,\n      kind: \"block\",\n      label: b.label || \"Bloqueio\",\n      start: s,\n      end: e,\n      laneKey,\n      laneLabel,\n      courtId: b.courtId ?? null,\n      version: b.updatedAt,\n      color: \"from-[#7b7bff]/25 to-[#7cf2ff]/30 border-white/20\",\n    });\n  }\n  for (const av of availabilities) {\n    const s = toDate(av.startAt);\n    const e = toDate(av.endAt);\n    if (!s || !e) continue;\n    const laneKey = \"player-availability\";\n    const laneLabel = \"Jogadores\";\n    items.push({\n      id: `av-${av.id}`,\n      kind: \"availability\",\n      label: av.playerName || av.playerEmail || \"Jogador\",\n      start: s,\n      end: e,\n      laneKey,\n      laneLabel,\n      version: av.updatedAt,\n      color: \"from-[#f59e0b]/25 to-[#fde68a]/20 border-amber-200/40\",\n    });\n  }\n  for (const m of matches) {\n    const s = toDate(m.startTime || m.plannedStartAt);\n    if (!s) continue;\n    const plannedEnd = toDate(m.plannedEndAt);\n    const durationMinutes = Number.isFinite(m.plannedDurationMinutes) ? m.plannedDurationMinutes : 60;\n    const e = plannedEnd || new Date(s.getTime() + (durationMinutes || 60) * 60 * 1000); // assume 1h se não houver fim\n    const laneKey = m.courtId ? `court-${m.courtId}` : m.courtName ? `court-name-${m.courtName}` : m.courtNumber ? `court-num-${m.courtNumber}` : \"match-generic\";\n    const laneLabel = m.courtName || (m.courtNumber ? `Court ${m.courtNumber}` : m.courtId ? `Court ${m.courtId}` : \"Court\");\n    items.push({\n      id: `match-${m.id}`,\n      kind: \"match\",\n      label: `Jogo #${m.id}`,\n      start: s,\n      end: e,\n      laneKey,\n      laneLabel,\n      courtId: m.courtId ?? null,\n      version: m.updatedAt,\n      color: \"from-[#34d399]/25 to-[#059669]/25 border-emerald-200/40\",\n    });\n  }\n\n  const grouped = items.reduce<Record<string, { key: string; label: string; courtId?: number | null; items: TimelineItem[] }>>((acc, item) => {\n    const existing = acc[item.laneKey] || lanesSeed[item.laneKey];\n    if (!existing) {\n      acc[item.laneKey] = { key: item.laneKey, label: item.laneLabel, courtId: item.courtId, items: [item] };\n    } else {\n      acc[item.laneKey] = { ...existing, items: [...(existing.items || []), item] };\n    }\n    return acc;\n  }, lanesSeed);\n\n  const lanes = Object.values(grouped).map((lane) => ({\n    court: lane.label,\n    courtId: lane.courtId,\n    key: lane.key,\n    items: (lane.items || []).sort((a, b) => a.start.getTime() - b.start.getTime()),\n  }));\n\n  const clampPercent = (value: number) => Math.min(100, Math.max(0, value));\n  const snapToSlot = (date: Date) => {\n    const minutes = date.getMinutes();\n    const snapped = Math.round(minutes / slotMinutes) * slotMinutes;\n    date.setMinutes(snapped, 0, 0);\n    return date;\n  };\n\n  const formatTime = (d: Date) =>\n    new Intl.DateTimeFormat(\"pt-PT\", { hour: \"2-digit\", minute: \"2-digit\", timeZone: timezone }).format(d);\n\n  return (\n    <div className=\"space-y-2\">\n      {lanes.length === 0 && <p className=\"text-[12px] text-white/60\">Sem registos para hoje.</p>}\n      {lanes.map((lane) => (\n        <div\n          key={lane.key || lane.court}\n          className=\"space-y-1 rounded-xl border border-white/10 bg-white/5 p-3\"\n          onDragOver={(e) => e.preventDefault()}\n          onDrop={(e) => {\n            if (!onDrop) return;\n            e.preventDefault();\n            const payload = e.dataTransfer.getData(\"application/json\");\n            try {\n                    const parsed = JSON.parse(payload);\n                    const duration = parsed.durationMs ?? 0;\n                    const rect = (e.currentTarget.querySelector(\".timeline-lane\") as HTMLElement)?.getBoundingClientRect();\n                    if (!rect) return;\n                    const relX = (e.clientX - rect.left) / rect.width;\n              const newStart = snapToSlot(new Date(startDay.getTime() + relX * (endDay.getTime() - startDay.getTime())));\n              const newEnd = new Date(newStart.getTime() + duration);\n              onDrop({\n                id: parsed.id,\n                kind: parsed.kind,\n                start: newStart,\n                end: newEnd,\n                courtId: lane.courtId,\n              });\n            } catch {\n              // ignore\n            }\n          }}\n        >\n          <div className=\"flex items-center justify-between text-[12px] text-white/70\">\n            <span className=\"font-semibold\">{lane.court}</span>\n            <span className=\"text-white/50\">Hoje</span>\n          </div>\n          <div className=\"timeline-lane relative h-16 overflow-hidden rounded-lg border border-white/10 bg-black/30\">\n            {lane.items.map((item) => {\n              const left =\n                clampPercent(((item.start.getTime() - startDay.getTime()) / (endDay.getTime() - startDay.getTime())) * laneWidth);\n              const width =\n                clampPercent(((item.end.getTime() - item.start.getTime()) / (endDay.getTime() - startDay.getTime())) * laneWidth);\n            return (\n              <div\n                key={item.id}\n                className={`absolute top-1 h-12 rounded-lg border px-2 py-1 text-[11px] text-white shadow ${item.color} bg-gradient-to-r ${\n                  lane.items.length > 1 && lane.items.some((other) => other !== item && other.laneKey === item.laneKey && overlaps(item, other))\n                    ? \"ring-2 ring-red-400/70\"\n                    : \"\"\n                } ${conflictMap.get(item.id)?.length ? \"border-red-300/70 shadow-[0_0_0_2px_rgba(248,113,113,0.35)]\" : \"\"}`}\n                style={{ left: `${left}%`, width: `${Math.max(width, 6)}%` }}\n                title={`${item.label} · ${formatTime(item.start)} - ${formatTime(item.end)}`}\n                draggable\n                onDragStart={(e) => {\n                    e.dataTransfer.setData(\n                      \"application/json\",\n                      JSON.stringify({\n                        id: item.id,\n                        kind: item.kind,\n                        durationMs: item.end.getTime() - item.start.getTime(),\n                        version: item.version,\n                      }),\n                    );\n                }}\n                onDragOver={(e) => e.preventDefault()}\n                onDrop={(e) => {\n                  if (!onDrop) return;\n                  e.preventDefault();\n                  const payload = e.dataTransfer.getData(\"application/json\");\n                  try {\n                    const parsed = JSON.parse(payload);\n                    if (parsed.id !== item.id) return;\n                    // simple drop keeps duration, aligns start to cursor\n                    const rect = (e.currentTarget.parentElement as HTMLElement).getBoundingClientRect();\n                    const relX = (e.clientX - rect.left) / rect.width;\n                    const newStart = snapToSlot(new Date(startDay.getTime() + relX * (endDay.getTime() - startDay.getTime())));\n                    const duration = item.end.getTime() - item.start.getTime();\n                    const newEnd = new Date(newStart.getTime() + duration);\n                    onDrop({\n                      id: item.id,\n                      kind: item.kind,\n                        start: newStart,\n                        end: newEnd,\n                        courtId: lane.courtId,\n                      });\n                    } catch {\n                      // ignore\n                    }\n                  }}\n              >\n                  <p className=\"font-semibold leading-tight\">{item.label}</p>\n                  <p className=\"text-white/70\">{formatTime(item.start)} - {formatTime(item.end)}</p>\n                </div>\n              );\n            })}\n          </div>\n          <div className=\"flex justify-between text-[11px] text-white/50\">\n            <span>00:00</span>\n            <span>12:00</span>\n            <span>24:00</span>\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n};\n\nconst normalizeSlug = (value: string) => {\n  const base =\n    value\n      .normalize(\"NFD\")\n      .replace(/[\\u0300-\\u036f]/g, \"\")\n      .toLowerCase()\n      .replace(/[^a-z0-9]+/g, \"-\")\n      .replace(/^-+|-+$/g, \"\") || \"clube\";\n  return base;\n};\n\nconst buildSlugCandidates = (value: string, limit = 15) => {\n  const base = normalizeSlug(value || \"clube\");\n  const list: string[] = [];\n  for (let i = 0; i < limit; i += 1) {\n    list.push(i === 0 ? base : `${base}${i}`);\n  }\n  return list;\n};\n\nconst fetchCourtsForClub = async (clubId: number): Promise<PadelClubCourt[]> => {\n  try {\n    const res = await fetch(`/api/padel/clubs/${clubId}/courts`);\n    const json = await res.json().catch(() => null);\n    if (res.ok && Array.isArray(json?.items)) {\n      return json.items as PadelClubCourt[];\n    }\n  } catch (err) {\n    console.error(\"[padel/clubs] fetchCourtsForClub\", err);\n  }\n  return [];\n};\n\nexport default function PadelHubClient({ organizerId, organizationKind, initialClubs, initialPlayers }: Props) {\n  const router = useRouter();\n  const searchParams = useSearchParams();\n  const padelSectionParam = searchParams?.get(\"padel\") || null;\n  const eventIdParam = searchParams?.get(\"eventId\") || null;\n  const eventId = eventIdParam && Number.isFinite(Number(eventIdParam)) ? Number(eventIdParam) : null;\n  const initialTab = PADEL_TABS.includes(padelSectionParam as any)\n    ? (padelSectionParam as (typeof PADEL_TABS)[number])\n    : \"clubs\";\n\n  const [activeTab, setActiveTab] = useState<(typeof PADEL_TABS)[number]>(initialTab);\n  const [switchingTab, setSwitchingTab] = useState(false);\n  const [clubs, setClubs] = useState<PadelClub[]>(initialClubs);\n  const [players, setPlayers] = useState<Player[]>(initialPlayers);\n  const [search, setSearch] = useState(\"\");\n  const [calendarScope, setCalendarScope] = useState<\"week\" | \"day\">(\"week\");\n  const [calendarFilter, setCalendarFilter] = useState<\"all\" | \"club\">(\"all\");\n  const [calendarError, setCalendarError] = useState<string | null>(null);\n  const [calendarMessage, setCalendarMessage] = useState<string | null>(null);\n  const [calendarWarning, setCalendarWarning] = useState<string | null>(null);\n  const [slotMinutes, setSlotMinutes] = useState<number>(15);\n  const [lastAction, setLastAction] = useState<{\n    type: \"block\" | \"availability\" | \"match\";\n    id: number;\n    prevStart: string;\n    prevEnd: string;\n    prevCourtId?: number | null;\n    prevDuration?: number | null;\n    version?: string | null;\n  } | null>(null);\n  const [blockForm, setBlockForm] = useState({\n    start: \"\",\n    end: \"\",\n    label: \"\",\n    note: \"\",\n  });\n  const [editingBlockId, setEditingBlockId] = useState<number | null>(null);\n  const [editingBlockVersion, setEditingBlockVersion] = useState<string | null>(null);\n  const [availabilityForm, setAvailabilityForm] = useState({\n    start: \"\",\n    end: \"\",\n    playerName: \"\",\n    playerEmail: \"\",\n    note: \"\",\n  });\n  const [editingAvailabilityId, setEditingAvailabilityId] = useState<number | null>(null);\n  const [editingAvailabilityVersion, setEditingAvailabilityVersion] = useState<string | null>(null);\n  const [savingCalendar, setSavingCalendar] = useState(false);\n\n  const [clubForm, setClubForm] = useState(DEFAULT_FORM);\n  const [slugError, setSlugError] = useState<string | null>(null);\n  const [clubModalOpen, setClubModalOpen] = useState(false);\n  const [savingClub, setSavingClub] = useState(false);\n  const [clubError, setClubError] = useState<string | null>(null);\n  const [clubMessage, setClubMessage] = useState<string | null>(null);\n\n  const [drawerClubId, setDrawerClubId] = useState<number | null>(initialClubs[0]?.id ?? null);\n  const [courts, setCourts] = useState<PadelClubCourt[]>([]);\n  const [staff, setStaff] = useState<PadelClubStaff[]>([]);\n  const [loadingDrawer, setLoadingDrawer] = useState(false);\n\n  const [courtForm, setCourtForm] = useState(DEFAULT_COURT_FORM);\n  const [courtMessage, setCourtMessage] = useState<string | null>(null);\n  const [courtError, setCourtError] = useState<string | null>(null);\n  const [savingCourt, setSavingCourt] = useState(false);\n  const [courtDialog, setCourtDialog] = useState<{ court: PadelClubCourt; nextActive: boolean } | null>(null);\n\n  const [staffForm, setStaffForm] = useState(DEFAULT_STAFF_FORM);\n  const [staffMode, setStaffMode] = useState<\"existing\" | \"external\">(\"existing\");\n  const [staffSearch, setStaffSearch] = useState(\"\");\n  const [staffMessage, setStaffMessage] = useState<string | null>(null);\n  const [staffError, setStaffError] = useState<string | null>(null);\n  const [staffInviteNotice, setStaffInviteNotice] = useState<string | null>(null);\n  const [draggingCourtId, setDraggingCourtId] = useState<number | null>(null);\n  const [clubDialog, setClubDialog] = useState<{ club: PadelClub; nextActive: boolean } | null>(null);\n  const [deleteClubDialog, setDeleteClubDialog] = useState<PadelClub | null>(null);\n  const [deleteCourtDialog, setDeleteCourtDialog] = useState<PadelClubCourt | null>(null);\n\n  const { data: organizerStaff } = useSWR<OrganizerStaffResponse>(\n    organizerId ? `/api/organizador/organizations/members?organizerId=${organizerId}` : null,\n    fetcher,\n    { revalidateOnFocus: false },\n  );\n  const { data: calendarData, isLoading: isCalendarLoading, mutate: mutateCalendar } = useSWR(\n    eventId ? `/api/padel/calendar?eventId=${eventId}` : null,\n    fetcher,\n    { revalidateOnFocus: false },\n  );\n\n  useEffect(() => {\n    if (padelSectionParam && PADEL_TABS.includes(padelSectionParam as any) && padelSectionParam !== activeTab) {\n      setActiveTab(padelSectionParam as (typeof PADEL_TABS)[number]);\n      setSwitchingTab(false);\n    }\n  }, [padelSectionParam, activeTab]);\n\n  useEffect(() => {\n    const timer = switchingTab ? setTimeout(() => setSwitchingTab(false), 280) : null;\n    return () => {\n      if (timer) clearTimeout(timer);\n    };\n  }, [switchingTab]);\n\n  const setPadelSection = (section: (typeof PADEL_TABS)[number]) => {\n    setSwitchingTab(true);\n    setActiveTab(section);\n    const params = new URLSearchParams(searchParams?.toString() || \"\");\n    params.set(\"tab\", \"manage\");\n    params.set(\"section\", \"padel-hub\");\n    params.set(\"padel\", section);\n    router.replace(`/organizador?${params.toString()}`, { scroll: false });\n    setLastAction(null);\n  };\n\n  const hasActiveClub = useMemo(() => clubs.some((c) => c.isActive), [clubs]);\n  const sortedClubs = useMemo(() => {\n    return [...clubs].sort((a, b) => {\n      if (a.isActive !== b.isActive) return a.isActive ? -1 : 1;\n      return new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime();\n    });\n  }, [clubs]);\n\n  const selectedClub = useMemo(() => clubs.find((c) => c.id === drawerClubId) || null, [clubs, drawerClubId]);\n\n  const filteredPlayers = useMemo(() => {\n    const term = search.trim().toLowerCase();\n    if (!term) return players;\n    return players.filter((p) => p.fullName.toLowerCase().includes(term) || (p.email || \"\").toLowerCase().includes(term));\n  }, [players, search]);\n\n  const activeCourtsCount = useMemo(() => courts.filter((c) => c.isActive).length, [courts]);\n  const staffOptions = useMemo(() => {\n    const list = organizerStaff?.items ?? [];\n    const term = staffSearch.trim().toLowerCase();\n    const filtered = term\n      ? list.filter(\n          (m) =>\n            (m.fullName || \"\").toLowerCase().includes(term) ||\n            (m.email || \"\").toLowerCase().includes(term) ||\n            (m.username || \"\").toLowerCase().includes(term),\n        )\n      : list;\n    return filtered;\n  }, [organizerStaff?.items, staffSearch]);\n  const inheritedStaffCount = useMemo(() => staff.filter((s) => s.inheritToEvents).length, [staff]);\n  // Mantém a ordem recebida e renumera sequencialmente\n  const renumberCourts = (list: PadelClubCourt[]) =>\n    list.map((c, idx) => ({ ...c, displayOrder: idx + 1 }));\n\n  const computeActiveCount = (list: PadelClubCourt[]) => list.filter((c) => c.isActive).length;\n\n  const syncActiveCountOnClub = (clubId: number, list: PadelClubCourt[]) => {\n    const activeCount = computeActiveCount(list);\n    setClubs((prev) => prev.map((c) => (c.id === clubId ? { ...c, courtsCount: activeCount } : c)));\n    return activeCount;\n  };\n\n  const refreshActiveCounts = async (clubList: PadelClub[]) => {\n    if (!clubList.length) return;\n    try {\n      const updates = await Promise.all(\n        clubList.map(async (club) => {\n          const courts = await fetchCourtsForClub(club.id);\n          return { id: club.id, count: computeActiveCount(courts) };\n        }),\n      );\n      setClubs((prev) =>\n        prev.map((club) => {\n          const found = updates.find((u) => u.id === club.id);\n          return found ? { ...club, courtsCount: found.count } : club;\n        }),\n      );\n    } catch (err) {\n      console.error(\"[padel/clubs] refreshActiveCounts\", err);\n    }\n  };\n\n  const createDefaultCourts = async (clubId: number, desired: number, startIndex = 1) => {\n    const created: PadelClubCourt[] = [];\n    for (let i = 0; i < desired; i += 1) {\n      const idx = startIndex + i;\n      try {\n        const res = await fetch(`/api/padel/clubs/${clubId}/courts`, {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({\n            name: `Court ${idx}`,\n            description: \"\",\n            indoor: false,\n            isActive: true,\n            displayOrder: idx,\n            surface: null,\n          }),\n        });\n        const json = await res.json().catch(() => null);\n        if (res.ok && json?.court) {\n          created.push(json.court as PadelClubCourt);\n        }\n      } catch (err) {\n        console.error(\"[padel/clubs/courts] auto-create\", err);\n      }\n    }\n    return renumberCourts(created);\n  };\n\n  useEffect(() => {\n    if (!drawerClubId) {\n      setCourts([]);\n      setStaff([]);\n      return;\n    }\n    loadCourtsAndStaff(drawerClubId);\n     \n  }, [drawerClubId]);\n\n  useEffect(() => {\n    setClubs(initialClubs);\n  }, [initialClubs]);\n\n  useEffect(() => {\n    setPlayers(initialPlayers);\n  }, [initialPlayers]);\n\n  useEffect(() => {\n    if (drawerClubId) return;\n    if (clubs.length === 0) return;\n    const preferred = clubs.find((c) => c.isActive) ?? clubs[0];\n    setDrawerClubId(preferred.id);\n  }, [clubs, drawerClubId]);\n\n  useEffect(() => {\n    if (initialClubs.length) {\n      refreshActiveCounts(initialClubs);\n    }\n  }, []);\n\n  const persistCourtOrder = async (list: PadelClubCourt[]) => {\n    if (!selectedClub) return;\n    const payload = renumberCourts(list);\n    const updates = payload.map((c) =>\n      fetch(`/api/padel/clubs/${selectedClub.id}/courts`, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ ...c, name: c.name, description: c.description || \"\", surface: null }),\n      }).catch((err) => {\n        console.error(\"[padel/clubs/reorder] failed\", err);\n        return null;\n      })\n    );\n    await Promise.all(updates);\n  };\n\n  const reorderCourts = (targetId: number) => {\n    if (!draggingCourtId || draggingCourtId === targetId) return null;\n    const current = [...courts];\n    const from = current.findIndex((ct) => ct.id === draggingCourtId);\n    const to = current.findIndex((ct) => ct.id === targetId);\n    if (from === -1 || to === -1) return null;\n    const [moved] = current.splice(from, 1);\n    current.splice(to, 0, moved);\n    const renumbered = renumberCourts(current);\n    setCourts(renumbered);\n    return renumbered;\n  };\n\n  useEffect(() => {\n    if (courtForm.id) return;\n    const nextOrder = Math.max(1, activeCourtsCount + 1);\n    if (courtForm.displayOrder !== nextOrder) {\n      setCourtForm((prev) => ({ ...prev, displayOrder: nextOrder }));\n    }\n  }, [activeCourtsCount, courtForm.id]);\n\n  const openNewClubModal = () => {\n    setClubForm(DEFAULT_FORM);\n    setClubError(null);\n    setClubMessage(null);\n    setSlugError(null);\n    setClubModalOpen(true);\n  };\n\n  const openEditClubModal = (club: PadelClub) => {\n    setClubForm({\n      id: club.id,\n      name: club.name,\n      city: club.city || \"\",\n      address: club.address || \"\",\n      courtsCount: club.courtsCount ? String(club.courtsCount) : \"1\",\n      isActive: club.isActive,\n      slug: club.slug || \"\",\n      isDefault: Boolean(club.isDefault),\n    });\n    setClubError(null);\n    setClubMessage(null);\n    setSlugError(null);\n    setClubModalOpen(true);\n  };\n\n  const loadCourtsAndStaff = async (clubId: number) => {\n    setLoadingDrawer(true);\n    setCourtMessage(null);\n    setCourtError(null);\n    setStaffMessage(null);\n    setStaffError(null);\n    try {\n      const [courtsRes, staffRes] = await Promise.all([\n        fetch(`/api/padel/clubs/${clubId}/courts`),\n        fetch(`/api/padel/clubs/${clubId}/staff`),\n      ]);\n      const courtsJson = await courtsRes.json().catch(() => null);\n      const staffJson = await staffRes.json().catch(() => null);\n      if (courtsRes.ok && Array.isArray(courtsJson?.items)) {\n        const list = renumberCourts(courtsJson.items as PadelClubCourt[]);\n        setCourts(list);\n        syncActiveCountOnClub(clubId, list);\n      } else setCourtError(courtsJson?.error || \"Erro ao carregar courts.\");\n      if (staffRes.ok && Array.isArray(staffJson?.items)) setStaff(staffJson.items as PadelClubStaff[]);\n      else setStaffError(staffJson?.error || \"Erro ao carregar equipa.\");\n    } catch (err) {\n      console.error(\"[padel/clubs] load courts/staff\", err);\n      setCourtError(\"Erro ao carregar courts.\");\n      setStaffError(\"Erro ao carregar equipa.\");\n    } finally {\n      setLoadingDrawer(false);\n    }\n  };\n\n  const handleSubmitClub = async () => {\n    setClubError(null);\n    setSlugError(null);\n    setClubMessage(null);\n    if (!clubForm.name.trim()) {\n      setClubError(\"Nome do clube é obrigatório.\");\n      return;\n    }\n    if (!clubForm.address.trim()) {\n      setClubError(\"Morada é obrigatória.\");\n      return;\n    }\n    const courtsNum = Number(clubForm.courtsCount);\n    const courtsCount = Number.isFinite(courtsNum) ? Math.min(1000, Math.max(1, Math.floor(courtsNum))) : 1;\n    setSavingClub(true);\n    const slugCandidates = buildSlugCandidates(clubForm.slug || clubForm.name, 15);\n    let savedClub: PadelClub | null = null;\n    let lastError: string | null = null;\n    try {\n      for (const candidate of slugCandidates) {\n        const res = await fetch(\"/api/padel/clubs\", {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({\n            id: clubForm.id,\n            organizerId,\n            name: clubForm.name.trim(),\n            city: clubForm.city.trim(),\n            address: clubForm.address.trim(),\n            courtsCount,\n            isActive: clubForm.isActive,\n            slug: candidate,\n            isDefault: clubForm.isDefault,\n          }),\n        });\n        const json = await res.json().catch(() => null);\n        if (res.ok && json?.club) {\n          savedClub = json.club as PadelClub;\n          break;\n        }\n        const errMsg = json?.error || \"Erro ao guardar clube.\";\n        lastError = errMsg;\n        const lower = errMsg.toLowerCase();\n        if (lower.includes(\"slug\") || lower.includes(\"já existe\") || lower.includes(\"duplic\")) {\n          continue;\n        } else {\n          break;\n        }\n      }\n      if (!savedClub) {\n        setSlugError(lastError || \"Slug em uso. Tentámos alternativas automáticas.\");\n        setClubError(lastError || \"Erro ao guardar clube.\");\n        return;\n      }\n      const club = savedClub;\n      setClubs((prev) => {\n        const existing = prev.some((c) => c.id === club.id);\n        if (existing) return prev.map((c) => (c.id === club.id ? club : c));\n        return [club, ...prev];\n      });\n      setClubMessage(clubForm.id ? \"Clube atualizado.\" : \"Clube criado.\");\n      setClubModalOpen(false);\n      setClubForm({ ...DEFAULT_FORM, courtsCount: String(courtsCount) });\n      setDrawerClubId(club.id);\n      trackEvent(clubForm.id ? \"padel_club_updated\" : \"padel_club_created\", { clubId: club.id });\n\n      const existingList = await fetchCourtsForClub(club.id);\n      const existingCount = existingList.length;\n      if (courtsCount > existingCount) {\n        const missing = courtsCount - existingCount;\n        const createdCourts = await createDefaultCourts(club.id, missing, existingCount + 1);\n        const merged = renumberCourts([...existingList, ...createdCourts]);\n        if (club.id === selectedClub?.id) setCourts(merged);\n        setCourtMessage(`Criados ${createdCourts.length} courts por omissão.`);\n        const activeCount = syncActiveCountOnClub(club.id, merged);\n        if (club.id !== selectedClub?.id) {\n          setClubs((prev) => prev.map((c) => (c.id === club.id ? { ...c, courtsCount: activeCount } : c)));\n        }\n      } else {\n        const normalized = renumberCourts(existingList);\n        const activeCount = syncActiveCountOnClub(club.id, normalized);\n        if (club.id === selectedClub?.id && existingCount > 0) setCourts(normalized);\n        if (club.id !== selectedClub?.id) {\n          setClubs((prev) => prev.map((c) => (c.id === club.id ? { ...c, courtsCount: activeCount } : c)));\n        }\n      }\n    } catch (err) {\n      console.error(\"[padel/clubs] save\", err);\n      setClubError(\"Erro inesperado ao guardar clube.\");\n    } finally {\n      setSavingClub(false);\n    }\n  };\n\n  const markDefaultClub = async (club: PadelClub) => {\n    setClubError(null);\n    setClubMessage(null);\n    try {\n      const res = await fetch(\"/api/padel/clubs\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          id: club.id,\n          organizerId,\n          name: club.name,\n          city: club.city,\n          address: club.address,\n          courtsCount: club.courtsCount,\n          isActive: club.isActive,\n          slug: club.slug,\n          isDefault: true,\n        }),\n      });\n      const json = await res.json().catch(() => null);\n      if (!res.ok || json?.ok === false) {\n        setClubError(json?.error || \"Erro ao definir default.\");\n      } else {\n        const saved = json.club as PadelClub;\n        setClubs((prev) => prev.map((c) => ({ ...c, isDefault: c.id === saved.id })));\n        setClubMessage(\"Clube definido como predefinido.\");\n        trackEvent(\"padel_club_marked_default\", { clubId: saved.id });\n      }\n    } catch (err) {\n      console.error(\"[padel/clubs] default\", err);\n      setClubError(\"Erro inesperado ao definir default.\");\n    }\n  };\n\n  const resetCourtForm = () => {\n    setCourtForm(DEFAULT_COURT_FORM);\n    setCourtMessage(null);\n    setCourtError(null);\n  };\n\n  const handleEditCourt = (court: PadelClubCourt) => {\n    setCourtForm({\n      id: court.id,\n      name: court.name,\n      description: court.description || \"\",\n      indoor: court.indoor,\n      isActive: court.isActive,\n      displayOrder: court.displayOrder,\n    });\n  };\n\n  const handleSubmitCourt = async () => {\n    if (!selectedClub) return;\n    const fallbackName = courtForm.name.trim() || `Court ${courts.length + 1}`;\n    const desiredOrder = Number.isFinite(courtForm.displayOrder) ? Math.max(1, Math.floor(courtForm.displayOrder)) : 1;\n    const maxOrder = Math.max(1, activeCourtsCount + (courtForm.id ? 0 : courtForm.isActive ? 1 : 0));\n    const normalizedOrder = Math.min(maxOrder, desiredOrder);\n    setSavingCourt(true);\n    setCourtError(null);\n    setCourtMessage(null);\n    try {\n        const res = await fetch(`/api/padel/clubs/${selectedClub.id}/courts`, {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({\n            ...courtForm,\n          name: fallbackName,\n          description: courtForm.description.trim(),\n          surface: null,\n          displayOrder: normalizedOrder,\n        }),\n      });\n        const json = await res.json().catch(() => null);\n        if (!res.ok || json?.ok === false) {\n          setCourtError(json?.error || \"Erro ao guardar court.\");\n        } else {\n          const court = json.court as PadelClubCourt;\n          setCourts((prev) => {\n            const exists = prev.some((c) => c.id === court.id);\n            const updated = exists ? prev.map((c) => (c.id === court.id ? court : c)) : [...prev, court];\n            const normalized = renumberCourts(updated);\n            syncActiveCountOnClub(selectedClub.id, normalized);\n            return normalized;\n          });\n          trackEvent(courtForm.id ? \"padel_court_updated\" : \"padel_court_created\", {\n            clubId: selectedClub.id,\n            indoor: court.indoor,\n          });\n        setCourtMessage(courtForm.id ? \"Court atualizado.\" : \"Court criado.\");\n        resetCourtForm();\n      }\n    } catch (err) {\n      console.error(\"[padel/clubs/courts] save\", err);\n      setCourtError(\"Erro inesperado ao guardar court.\");\n    } finally {\n      setSavingCourt(false);\n    }\n  };\n\n  const handleConfirmCourtToggle = async () => {\n    if (!courtDialog || !selectedClub) return;\n    await handleToggleCourtActive(courtDialog.court, courtDialog.nextActive);\n    trackEvent(courtDialog.nextActive ? \"padel_court_reactivated\" : \"padel_court_deactivated\", {\n      clubId: selectedClub.id,\n      courtId: courtDialog.court.id,\n    });\n    setCourtDialog(null);\n  };\n\n  const handleToggleClubActive = async (club: PadelClub, next: boolean) => {\n    setClubError(null);\n    setClubMessage(null);\n    setClubDialog(null);\n    try {\n      const res = await fetch(\"/api/padel/clubs\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          id: club.id,\n          organizerId,\n          name: club.name,\n          city: club.city,\n          address: club.address,\n          courtsCount: club.courtsCount,\n          isActive: next,\n          slug: club.slug,\n          isDefault: club.isDefault,\n        }),\n      });\n      const json = await res.json().catch(() => null);\n      if (!res.ok || json?.ok === false) {\n        setClubError(json?.error || \"Erro ao atualizar estado do clube.\");\n      } else {\n        const saved = json.club as PadelClub;\n        setClubs((prev) => prev.map((c) => (c.id === saved.id ? saved : c)));\n        setClubMessage(saved.isActive ? \"Clube reativado.\" : \"Clube arquivado.\");\n        trackEvent(saved.isActive ? \"padel_club_reactivated\" : \"padel_club_archived\", { clubId: saved.id });\n      }\n    } catch (err) {\n      console.error(\"[padel/clubs] toggle active\", err);\n      setClubError(\"Erro inesperado ao atualizar clube.\");\n    } finally {\n      setClubDialog(null);\n    }\n  };\n\n  const handleDeleteClub = async (club: PadelClub) => {\n    setClubError(null);\n    setClubMessage(null);\n    try {\n      const res = await fetch(`/api/padel/clubs?id=${club.id}`, { method: \"DELETE\" });\n      const json = await res.json().catch(() => null);\n      if (!res.ok || json?.ok === false) {\n        setClubError(json?.error || \"Erro ao apagar clube.\");\n      } else {\n        setClubs((prev) => prev.filter((c) => c.id !== club.id));\n        if (drawerClubId === club.id) {\n          setDrawerClubId(null);\n          setCourts([]);\n          setStaff([]);\n        }\n        setClubMessage(\"Clube apagado.\");\n      }\n    } catch (err) {\n      console.error(\"[padel/clubs] delete\", err);\n      setClubError(\"Erro inesperado ao apagar clube.\");\n    } finally {\n      setDeleteClubDialog(null);\n    }\n  };\n\n  const handleToggleCourtActive = async (court: PadelClubCourt, next: boolean) => {\n    if (!selectedClub) return;\n    setSavingCourt(true);\n    try {\n      const res = await fetch(`/api/padel/clubs/${selectedClub.id}/courts`, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ ...court, isActive: next }),\n      });\n      const json = await res.json().catch(() => null);\n      if (res.ok && json?.court) {\n        const updated = json.court as PadelClubCourt;\n        setCourts((prev) => {\n          const nextList = renumberCourts(prev.map((c) => (c.id === updated.id ? updated : c)));\n          syncActiveCountOnClub(selectedClub.id, nextList);\n          return nextList;\n        });\n      }\n    } catch (err) {\n      console.error(\"[padel/clubs/courts] toggle\", err);\n    } finally {\n      setSavingCourt(false);\n    }\n  };\n\n  const handleDeleteCourt = async (court: PadelClubCourt) => {\n    if (!selectedClub) return;\n    setSavingCourt(true);\n    try {\n      const res = await fetch(`/api/padel/clubs/${selectedClub.id}/courts?courtId=${court.id}`, {\n        method: \"DELETE\",\n      });\n      const json = await res.json().catch(() => null);\n      if (res.ok && json?.ok !== false) {\n        setCourts((prev) => {\n          const nextList = renumberCourts(prev.filter((c) => c.id !== court.id));\n          syncActiveCountOnClub(selectedClub.id, nextList);\n          return nextList;\n        });\n      } else {\n        setCourtError(json?.error || \"Erro ao apagar court.\");\n      }\n    } catch (err) {\n      console.error(\"[padel/clubs/courts] delete\", err);\n      setCourtError(\"Erro inesperado ao apagar court.\");\n    } finally {\n      setSavingCourt(false);\n      setDeleteCourtDialog(null);\n    }\n  };\n\n  const resetStaffForm = () => {\n    setStaffForm(DEFAULT_STAFF_FORM);\n    setStaffMode(\"existing\");\n    setStaffSearch(\"\");\n    setStaffError(null);\n    setStaffMessage(null);\n    setStaffInviteNotice(null);\n  };\n\n  const handleEditStaff = (member: PadelClubStaff) => {\n    setStaffForm({\n      id: member.id,\n      email: member.email || \"\",\n      staffMemberId: member.userId || \"\",\n      role: member.role,\n      inheritToEvents: member.inheritToEvents,\n    });\n    setStaffMode(member.userId ? \"existing\" : \"external\");\n  };\n\n  const handleSubmitStaff = async () => {\n    if (!selectedClub) return;\n    const selectedMember = staffMode === \"existing\" ? staffOptions.find((m) => m.userId === staffForm.staffMemberId) : null;\n    const emailToSend =\n      staffMode === \"existing\" ? selectedMember?.email ?? \"\" : staffForm.email.trim();\n    if (staffMode === \"existing\" && !selectedMember) {\n      setStaffError(\"Escolhe um membro do staff global.\");\n      return;\n    }\n    if (staffMode === \"external\" && !emailToSend) {\n      setStaffError(\"Indica o email do contacto externo.\");\n      return;\n    }\n    const duplicate =\n      staffMode === \"existing\"\n        ? staff.some((s) => s.userId && s.userId === selectedMember?.userId && s.id !== staffForm.id)\n        : staff.some((s) => s.email && s.email.toLowerCase() === emailToSend.toLowerCase() && s.id !== staffForm.id);\n    if (duplicate) {\n      setStaffError(\"Já tens este contacto associado ao clube.\");\n      return;\n    }\n    setStaffError(null);\n    setStaffMessage(null);\n    setStaffInviteNotice(null);\n    try {\n      const res = await fetch(`/api/padel/clubs/${selectedClub.id}/staff`, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          id: staffForm.id,\n          email: emailToSend,\n          userId: staffMode === \"existing\" ? selectedMember?.userId : null,\n          role: staffForm.role,\n          padelRole: staffForm.role,\n          inheritToEvents: staffForm.inheritToEvents,\n        }),\n      });\n      const json = await res.json().catch(() => null);\n      if (!res.ok || json?.ok === false) {\n        setStaffError(json?.error || \"Erro ao guardar membro.\");\n      } else {\n        const member = json.staff as PadelClubStaff;\n        setStaff((prev) => {\n          const exists = prev.some((s) => s.id === member.id);\n          if (exists) return prev.map((s) => (s.id === member.id ? member : s));\n          return [member, ...prev];\n        });\n        setStaffMessage(staffForm.id ? \"Membro atualizado.\" : \"Membro adicionado.\");\n        if (staffMode === \"external\" && emailToSend && organizerId) {\n          // Tentar enviar convite de organização (viewer) para criar conta\n          const inviteRes = await fetch(\"/api/organizador/organizations/members/invites\", {\n            method: \"POST\",\n            headers: { \"Content-Type\": \"application/json\" },\n            body: JSON.stringify({\n              organizerId,\n              identifier: emailToSend,\n              role: \"VIEWER\",\n            }),\n          }).catch(() => null);\n          if (inviteRes && inviteRes.ok) {\n            setStaffInviteNotice(\"Convite enviado para criar conta. Ao registar-se, fica ligado como staff do clube.\");\n          }\n        }\n        resetStaffForm();\n      }\n    } catch (err) {\n      console.error(\"[padel/clubs/staff] save\", err);\n      setStaffError(\"Erro inesperado ao guardar membro.\");\n    }\n  };\n\n  const compactAddress = (club: PadelClub) => {\n    const bits = [club.city, club.address].filter(Boolean);\n    return bits.join(\" · \") || \"Morada por definir\";\n  };\n\n  const activeCourtsForClub = (club: PadelClub) => {\n    if (!club) return 0;\n    if (club.id === selectedClub?.id && courts.length > 0) return computeActiveCount(courts);\n    return club.courtsCount || 0;\n  };\n\n  const totalActiveCourts = useMemo(() => clubs.reduce((acc, c) => acc + (c.courtsCount || 0), 0), [clubs]);\n  const calendarBlocksRaw = calendarData?.blocks ?? [];\n  const calendarAvailabilitiesRaw = calendarData?.availabilities ?? [];\n  const calendarMatchesRaw = calendarData?.matches ?? [];\n  const calendarConflicts = calendarData?.conflicts ?? [];\n  const calendarTimezone = calendarData?.eventTimezone ?? \"Europe/Lisbon\";\n  const calendarBuffer = calendarData?.bufferMinutes ?? 5;\n  const calendarDayLengthMinutes = 24 * 60;\n  const [selectedDay, setSelectedDay] = useState(() => {\n    const d = new Date();\n    d.setHours(0, 0, 0, 0);\n    return d.toISOString().slice(0, 10);\n  });\n  const startOfDay = useMemo(() => {\n    const d = new Date(selectedDay);\n    if (Number.isNaN(d.getTime())) return null;\n    d.setHours(0, 0, 0, 0);\n    return d;\n  }, [selectedDay]);\n  const endOfDay = useMemo(() => {\n    if (!startOfDay) return null;\n    const d = new Date(startOfDay);\n    d.setHours(23, 59, 59, 999);\n    return d;\n  }, [startOfDay]);\n\n  const isWithinDay = (date: string | Date) => {\n    if (!startOfDay || !endOfDay) return true;\n    const d = new Date(date);\n    return d >= startOfDay && d <= endOfDay;\n  };\n\n  const calendarBlocks =\n    calendarScope === \"day\"\n      ? calendarBlocksRaw.filter((b) => isWithinDay(b.startAt))\n      : calendarBlocksRaw;\n  const calendarAvailabilities =\n    calendarScope === \"day\"\n      ? calendarAvailabilitiesRaw.filter((b) => isWithinDay(b.startAt))\n      : calendarAvailabilitiesRaw;\n  const matchStartsWithinDay = (m: any) => isWithinDay(m.startTime || m.plannedStartAt);\n  const calendarMatches =\n    calendarScope === \"day\" ? calendarMatchesRaw.filter((m) => matchStartsWithinDay(m)) : calendarMatchesRaw;\n  const matchesById = useMemo(() => {\n    const map = new Map<number, any>();\n    calendarMatchesRaw.forEach((m) => map.set(m.id, m));\n    return map;\n  }, [calendarMatchesRaw]);\n  const getItemVersion = (kind: \"block\" | \"availability\" | \"match\", id: number) => {\n    if (kind === \"block\") return calendarBlocks.find((b: any) => b.id === id)?.updatedAt;\n    if (kind === \"availability\") return calendarAvailabilities.find((a: any) => a.id === id)?.updatedAt;\n    return calendarMatchesRaw.find((m: any) => m.id === id)?.updatedAt;\n  };\n\n  const resetCalendarForms = () => {\n    setBlockForm({ start: \"\", end: \"\", label: \"\", note: \"\" });\n    setAvailabilityForm({ start: \"\", end: \"\", playerName: \"\", playerEmail: \"\", note: \"\" });\n    setEditingBlockId(null);\n    setEditingAvailabilityId(null);\n    setEditingBlockVersion(null);\n    setEditingAvailabilityVersion(null);\n    setCalendarMessage(null);\n  };\n\n  const saveCalendarItem = async (type: \"block\" | \"availability\") => {\n    if (!eventId) {\n      setCalendarError(\"Abre a partir de um torneio para editar o calendário.\");\n      return;\n    }\n    const isBlock = type === \"block\";\n    const editingId = isBlock ? editingBlockId : editingAvailabilityId;\n    const start = isBlock ? blockForm.start : availabilityForm.start;\n    const end = isBlock ? blockForm.end : availabilityForm.end;\n    if (!start || !end) {\n      setCalendarError(\"Indica início e fim.\");\n      return;\n    }\n    setSavingCalendar(true);\n    setCalendarError(null);\n    setCalendarMessage(null);\n    setCalendarWarning(null);\n    try {\n      const payload =\n        type === \"block\"\n          ? {\n              type: \"block\",\n              id: editingId ?? undefined,\n              eventId,\n              startAt: blockForm.start,\n              endAt: blockForm.end,\n              label: blockForm.label || undefined,\n              note: blockForm.note || undefined,\n              ...(editingBlockVersion ? { version: editingBlockVersion } : {}),\n            }\n          : {\n              type: \"availability\",\n              id: editingId ?? undefined,\n              eventId,\n              startAt: availabilityForm.start,\n              endAt: availabilityForm.end,\n              playerName: availabilityForm.playerName || undefined,\n              playerEmail: availabilityForm.playerEmail || undefined,\n              note: availabilityForm.note || undefined,\n              ...(editingAvailabilityVersion ? { version: editingAvailabilityVersion } : {}),\n            };\n\n      const res = await fetch(\"/api/padel/calendar\", {\n        method: editingId ? \"PATCH\" : \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(payload),\n      });\n      const json = await res.json().catch(() => null);\n      if (!res.ok || json?.ok === false) {\n        setCalendarError(json?.error || \"Não foi possível guardar.\");\n      } else {\n        const prev =\n          type === \"block\"\n            ? calendarBlocks.find((b: any) => b.id === editingId)\n            : calendarAvailabilities.find((a: any) => a.id === editingId);\n        if (prev && editingId) {\n          setLastAction({\n            type,\n            id: editingId,\n            prevStart: prev.startAt,\n            prevEnd: prev.endAt,\n            prevCourtId: prev.courtId ?? null,\n            version: prev.updatedAt ?? null,\n          });\n        } else {\n          setLastAction(null);\n        }\n        setCalendarMessage(editingId ? \"Atualizado.\" : \"Guardado.\");\n        toast(editingId ? \"Atualizado\" : \"Guardado\", \"ok\");\n        resetCalendarForms();\n        mutateCalendar();\n      }\n    } catch (err) {\n      console.error(\"[padel/calendar] save\", err);\n      setCalendarError(\"Erro inesperado ao guardar.\");\n    } finally {\n      setSavingCalendar(false);\n    }\n  };\n\n  const handleEditBlock = (block: any) => {\n    setEditingAvailabilityId(null);\n    setEditingBlockId(block.id);\n    setEditingBlockVersion(block.updatedAt || null);\n    setBlockForm({\n      start: formatDateTimeLocal(block.startAt),\n      end: formatDateTimeLocal(block.endAt),\n      label: block.label || \"\",\n      note: block.note || \"\",\n    });\n  };\n\n  const handleEditAvailability = (av: any) => {\n    setEditingBlockId(null);\n    setEditingAvailabilityId(av.id);\n    setEditingAvailabilityVersion(av.updatedAt || null);\n    setAvailabilityForm({\n      start: formatDateTimeLocal(av.startAt),\n      end: formatDateTimeLocal(av.endAt),\n      playerName: av.playerName || \"\",\n      playerEmail: av.playerEmail || \"\",\n      note: av.note || \"\",\n    });\n  };\n\n  const handleDeleteCalendarItem = async (type: \"block\" | \"availability\", id: number) => {\n    if (!eventId || !Number.isFinite(id)) return;\n    const sure = window.confirm(\"Remover este registo?\");\n    if (!sure) return;\n    setSavingCalendar(true);\n    setCalendarError(null);\n    setCalendarMessage(null);\n    setCalendarWarning(null);\n    try {\n      const res = await fetch(`/api/padel/calendar?type=${type}&id=${id}`, { method: \"DELETE\" });\n      const json = await res.json().catch(() => null);\n      if (!res.ok || json?.ok === false) {\n        setCalendarError(json?.error || \"Não foi possível remover.\");\n      } else {\n        setCalendarMessage(\"Removido.\");\n        resetCalendarForms();\n        mutateCalendar();\n        setLastAction(null);\n      }\n    } catch (err) {\n      console.error(\"[padel/calendar] delete\", err);\n      setCalendarError(\"Erro inesperado ao remover.\");\n    } finally {\n      setSavingCalendar(false);\n    }\n  };\n\n  return (\n    <div className=\"space-y-5 rounded-3xl border border-white/12 bg-gradient-to-br from-white/8 via-[#0b1124]/75 to-[#050810]/92 px-4 py-6 shadow-[0_30px_110px_rgba(0,0,0,0.6)] backdrop-blur-3xl md:px-6\">\n      <header className=\"flex flex-wrap items-start justify-between gap-3 rounded-2xl border border-white/12 bg-gradient-to-r from-white/10 via-[#0f1c3d]/70 to-[#0b1021]/85 px-4 py-4 shadow-[0_20px_70px_rgba(0,0,0,0.55)]\">\n        <div className=\"space-y-1\">\n          <div className=\"inline-flex items-center gap-2 rounded-full border border-white/20 bg-white/10 px-3 py-1 text-[11px] uppercase tracking-[0.22em] text-white/80 shadow-[0_10px_30px_rgba(0,0,0,0.4)]\">\n            Padel Hub\n          </div>\n          <h1 className=\"text-3xl font-semibold text-white drop-shadow-[0_10px_40px_rgba(0,0,0,0.55)]\">Operação de Padel</h1>\n          <p className=\"text-sm text-white/70\">Calendário, clubes, courts, staff e jogadores num só hub.</p>\n        </div>\n      </header>\n\n      <div className=\"grid grid-cols-1 gap-3 rounded-2xl border border-white/12 bg-gradient-to-r from-white/8 via-[#0c1328]/70 to-[#050912]/90 p-4 shadow-[0_22px_70px_rgba(0,0,0,0.55)] sm:grid-cols-4\">\n        <div>\n          <p className=\"text-[11px] uppercase tracking-[0.2em] text-white/60\">Calendário</p>\n          <p className=\"text-2xl font-semibold\">Slots & conflitos</p>\n          <p className=\"text-[12px] text-white/60\">Bloqueios, jogos e indisponibilidades.</p>\n        </div>\n        <div>\n          <p className=\"text-[11px] uppercase tracking-[0.2em] text-white/60\">Clubes</p>\n          <p className=\"text-2xl font-semibold\">{clubs.length}</p>\n          <p className=\"text-[12px] text-white/60\">{hasActiveClub ? \"Ativos e prontos a usar.\" : \"Ativa pelo menos um.\"}</p>\n        </div>\n        <div>\n          <p className=\"text-[11px] uppercase tracking-[0.2em] text-white/60\">Courts ativos</p>\n          <p className=\"text-2xl font-semibold\">{Number.isFinite(totalActiveCourts) ? totalActiveCourts : \"—\"}</p>\n          <p className=\"text-[12px] text-white/60\">Usados como sugestão no wizard.</p>\n        </div>\n        <div>\n          <p className=\"text-[11px] uppercase tracking-[0.2em] text-white/60\">Jogadores</p>\n          <p className=\"text-2xl font-semibold\">{players.length}</p>\n          <p className=\"text-[12px] text-white/60\">Roster auto-alimentado pelos registos de jogadores.</p>\n        </div>\n      </div>\n\n      <div className=\"flex flex-wrap gap-2 border-b border-white/15 pb-3\">\n        {[\n          { key: \"calendar\", label: \"Calendário\" },\n          { key: \"clubs\", label: \"Clubes\" },\n          { key: \"players\", label: \"Jogadores\" },\n          { key: \"rankings\", label: \"Rankings (em breve)\" },\n        ].map((tab) => (\n          <button\n            key={tab.key}\n            className={`rounded-full border px-3 py-1 text-[12px] ${\n              activeTab === tab.key ? \"border-white/80 bg-white text-black\" : \"border-white/10 bg-white/5 text-white/75 hover:border-white/25\"\n            }`}\n            onClick={() => setPadelSection(tab.key as typeof padelTabs[number])}\n          >\n            {tab.label}\n          </button>\n        ))}\n      </div>\n\n      {switchingTab && <PadelTabSkeleton />}\n\n      {!switchingTab && activeTab === \"calendar\" && (\n        <div className=\"space-y-4 rounded-2xl border border-white/12 bg-gradient-to-br from-white/6 via-[#0c1628]/60 to-[#050912]/85 p-4 shadow-[0_18px_60px_rgba(0,0,0,0.5)] transition-all duration-250 ease-out opacity-100 translate-y-0\">\n          <div className=\"flex flex-wrap items-center justify-between gap-3\">\n            <div className=\"space-y-1\">\n              <p className=\"text-[12px] uppercase tracking-[0.2em] text-white/60\">Calendário</p>\n              <p className=\"text-sm text-white/70\">Visual por court com jogos, bloqueios e indisponibilidades (padel only).</p>\n            </div>\n            <div className=\"flex flex-wrap items-center gap-2\">\n              <span className=\"rounded-full border border-white/20 bg-white/5 px-3 py-1 text-[12px] text-white/75\">\n                Fuso: {calendarTimezone}\n              </span>\n              <span className=\"rounded-full border border-white/20 bg-white/5 px-3 py-1 text-[12px] text-white/75\">\n                Buffer: {calendarBuffer} min\n              </span>\n              <div className=\"inline-flex rounded-full border border-white/15 bg-white/5 p-1 text-[12px]\">\n                {[\"week\", \"day\"].map((scope) => (\n                  <button\n                    key={scope}\n                    onClick={() => setCalendarScope(scope as \"week\" | \"day\")}\n                    className={`rounded-full px-3 py-1 font-semibold transition ${\n                      calendarScope === scope ? \"bg-white text-black shadow\" : \"text-white/75\"\n                    }`}\n                    disabled={switchingTab}\n                  >\n                    {scope === \"week\" ? \"Semana\" : \"Dia\"}\n                  </button>\n                ))}\n              </div>\n              {calendarScope === \"day\" && (\n                <input\n                  type=\"date\"\n                  value={selectedDay}\n                  onChange={(e) => setSelectedDay(e.target.value)}\n                  className=\"rounded-full border border-white/20 bg-white/5 px-3 py-1 text-[12px] text-white/80 outline-none focus:border-white/60 focus:ring-2 focus:ring-cyan-400/40\"\n                />\n              )}\n              <div className=\"inline-flex rounded-full border border-white/15 bg-white/5 p-1 text-[12px]\">\n                {[\n                  { key: \"all\", label: \"Todos os clubes\" },\n                  { key: \"club\", label: \"Clube ativo\" },\n                ].map((opt) => (\n                  <button\n                    key={opt.key}\n                    onClick={() => setCalendarFilter(opt.key as \"all\" | \"club\")}\n                    className={`rounded-full px-3 py-1 font-semibold transition ${\n                      calendarFilter === opt.key ? \"bg-white text-black shadow\" : \"text-white/75\"\n                    }`}\n                    disabled={switchingTab}\n                  >\n                    {opt.label}\n                  </button>\n                ))}\n              </div>\n              <div className=\"inline-flex rounded-full border border-white/15 bg-white/5 p-1 text-[12px]\">\n                {[15, 30].map((slot) => (\n                  <button\n                    key={slot}\n                    onClick={() => setSlotMinutes(slot)}\n                    className={`rounded-full px-3 py-1 font-semibold transition ${\n                      slotMinutes === slot ? \"bg-white text-black shadow\" : \"text-white/75\"\n                    }`}\n                    disabled={switchingTab}\n                  >\n                    Slot {slot}m\n                  </button>\n                ))}\n              </div>\n            </div>\n          </div>\n\n          <div className=\"grid gap-3 lg:grid-cols-[1fr_320px]\">\n            <div className=\"h-[420px] rounded-2xl border border-dashed border-white/15 bg-black/25 p-4 text-white/70\">\n              <div className=\"flex items-center justify-between\">\n                <p className=\"text-sm font-semibold text-white\">Timeline</p>\n                {isCalendarLoading && <span className=\"text-[11px] text-white/60 animate-pulse\">A carregar…</span>}\n              </div>\n              {!eventId && (\n                <p className=\"mt-2 text-[12px] text-white/60\">\n                  Abre este hub a partir de um torneio de padel para ver o calendário (precisa de eventId no URL).\n                </p>\n              )}\n              {eventId && !isCalendarLoading && calendarError && (\n                <p className=\"mt-2 text-[12px] text-red-200\">{calendarError}</p>\n              )}\n              {eventId && !isCalendarLoading && calendarWarning && (\n                <p className=\"mt-2 text-[12px] text-amber-200\">{calendarWarning}</p>\n              )}\n              {eventId && !isCalendarLoading && calendarMessage && (\n                <p className=\"mt-2 text-[12px] text-emerald-200\">{calendarMessage}</p>\n              )}\n              {eventId && calendarScope === \"day\" && !isCalendarLoading && !calendarError && startOfDay && (\n                <p className=\"mt-2 text-[12px] text-white/60\">\n                  A mostrar registos de {selectedDay} ({formatZoned(startOfDay, calendarTimezone)}).\n                </p>\n              )}\n                {eventId && !isCalendarLoading && !calendarError && (\n                  <div className=\"mt-3 space-y-3\">\n                    <div className=\"overflow-hidden rounded-2xl border border-white/10 bg-black/25 p-3 shadow-[0_16px_50px_rgba(0,0,0,0.45)]\">\n                      <p className=\"mb-2 text-[12px] uppercase tracking-[0.16em] text-white/55\">Visão rápida (timeline)</p>\n                      <TimelineView\n                        blocks={calendarBlocks}\n                        availabilities={calendarAvailabilities}\n                        matches={calendarMatches}\n                        timezone={calendarTimezone}\n                        dayStart={startOfDay}\n                        conflictMap={new Map(\n                          calendarConflicts.map((c) => [`${c.type === \"block_block\" || c.type === \"block_match\" ? \"block\" : c.type === \"availability_match\" ? \"availability\" : \"match\"}-${c.aId}`, [c.type]]),\n                        )}\n                        slotMinutes={slotMinutes}\n                        onDrop={async (payload) => {\n                          // Persistir drop no servidor (mantendo duração). Usa PATCH no tipo certo.\n                          if (!eventId) return;\n                          const [kind, rawId] = payload.id.split(\"-\");\n                          const parsedId = Number(rawId);\n                          if (!Number.isFinite(parsedId)) return;\n                          if (kind === \"match\") {\n                            const match = matchesById.get(parsedId);\n                            if (!match?.courtId) {\n                              setCalendarWarning(\"Define primeiro o court do jogo para o mover.\");\n                              toast(\"Define o court do jogo antes de mover\", \"warn\");\n                              return;\n                            }\n                          }\n                          setSavingCalendar(true);\n                          setCalendarError(null);\n                          setCalendarMessage(null);\n                          setCalendarWarning(null);\n                          try {\n                            const currentVersion = getItemVersion(kind as any, parsedId);\n                            const prevMatch = kind === \"match\" ? matchesById.get(parsedId) : null;\n                            const res = await fetch(\"/api/padel/calendar\", {\n                              method: \"PATCH\",\n                              headers: { \"Content-Type\": \"application/json\" },\n                              body: JSON.stringify({\n                                type: kind === \"block\" ? \"block\" : kind === \"availability\" ? \"availability\" : kind === \"match\" ? \"match\" : null,\n                                id: parsedId,\n                                startAt: payload.start.toISOString(),\n                                endAt: payload.end.toISOString(),\n                                ...(currentVersion ? { version: currentVersion } : {}),\n                                ...(payload.courtId ? { courtId: payload.courtId } : {}),\n                              }),\n                            });\n                            const json = await res.json().catch(() => null);\n                            if (!res.ok || json?.ok === false) {\n                              const errMsg = json?.error || \"Não foi possível mover.\";\n                              if (res.status === 409 || errMsg.toLowerCase().includes(\"conflito\")) {\n                                setCalendarWarning(errMsg);\n                                toast(errMsg, \"warn\");\n                              } else if (res.status === 423 || errMsg.toLowerCase().includes(\"lock\")) {\n                                setCalendarWarning(\"Outro admin está a editar este slot.\");\n                                toast(\"Outro admin a editar este slot.\", \"warn\");\n                              } else if (res.status === 409 && errMsg.toLowerCase().includes(\"stale\")) {\n                                setCalendarWarning(\"Atualiza a página, houve edição em paralelo.\");\n                                toast(\"Edição desatualizada, atualiza a página.\", \"warn\");\n                              } else {\n                                setCalendarError(errMsg);\n                                toast(errMsg, \"err\");\n                              }\n                            } else {\n                              setCalendarMessage(\"Atualizado via drag & drop.\");\n                              toast(\"Atualizado via drag & drop\", \"ok\");\n                              if (kind === \"block\") {\n                                const prev = calendarBlocks.find((b: any) => b.id === parsedId);\n                                if (prev) {\n                                  setLastAction({\n                                    type: \"block\",\n                                    id: parsedId,\n                                    prevStart: prev.startAt,\n                                    prevEnd: prev.endAt,\n                                    prevCourtId: prev.courtId ?? null,\n                                    version: prev.updatedAt ?? null,\n                                  });\n                                }\n                              } else if (kind === \"availability\") {\n                                const prev = calendarAvailabilities.find((a: any) => a.id === parsedId);\n                                if (prev) {\n                                  setLastAction({\n                                    type: \"availability\",\n                                    id: parsedId,\n                                    prevStart: prev.startAt,\n                                    prevEnd: prev.endAt,\n                                    version: prev.updatedAt ?? null,\n                                  });\n                                }\n                              } else if (kind === \"match\" && prevMatch) {\n                                const start = prevMatch.startTime || prevMatch.plannedStartAt;\n                                const end =\n                                  prevMatch.plannedEndAt ||\n                                  (start && prevMatch.plannedDurationMinutes\n                                    ? new Date(new Date(start).getTime() + prevMatch.plannedDurationMinutes * 60 * 1000).toISOString()\n                                    : prevMatch.startTime);\n                                setLastAction({\n                                  type: \"match\",\n                                  id: parsedId,\n                                  prevStart: start,\n                                  prevEnd: end,\n                                  prevCourtId: prevMatch.courtId ?? null,\n                                  prevDuration: prevMatch.plannedDurationMinutes ?? null,\n                                  version: prevMatch.updatedAt ?? null,\n                                });\n                              }\n                              mutateCalendar();\n                            }\n                          } catch (err) {\n                            console.error(\"[padel/calendar] drag-drop update\", err);\n                            setCalendarError(\"Erro ao mover.\");\n                            toast(\"Erro ao mover\", \"err\");\n                          } finally {\n                            setSavingCalendar(false);\n                          }\n                        }}\n                      />\n                    </div>\n                    <div className=\"grid gap-2 lg:grid-cols-2\">\n                      <div className=\"space-y-2\">\n                        <p className=\"text-[12px] uppercase tracking-[0.16em] text-white/55\">Bloqueios</p>\n                        {calendarBlocks.length === 0 && (\n                          <p className=\"text-[12px] text-white/55\">Sem bloqueios.</p>\n                        )}\n                        {[...calendarBlocks]\n                          .sort((a, b) => new Date(a.startAt).getTime() - new Date(b.startAt).getTime())\n                          .slice(0, 6)\n                          .map((block) => (\n                            <div\n                              key={`block-${block.id}`}\n                              className=\"rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-[12px] space-y-1\"\n                            >\n                              <p className=\"font-semibold text-white\">Bloqueio {block.label || `#${block.id}`}</p>\n                              <p className=\"text-white/65\">\n                                {formatZoned(block.startAt, calendarTimezone)} → {formatZoned(block.endAt, calendarTimezone)}\n                              </p>\n                              {block.note && <p className=\"text-white/55\">Nota: {block.note}</p>}\n                              <div className=\"flex flex-wrap gap-2\">\n                                <button\n                                  type=\"button\"\n                                  onClick={() => handleEditBlock(block)}\n                                  className=\"rounded-full border border-white/20 px-2 py-[5px] text-[11px] text-white hover:border-white/35\"\n                                >\n                                  Editar\n                                </button>\n                                <button\n                                  type=\"button\"\n                                  onClick={() => handleDeleteCalendarItem(\"block\", block.id)}\n                                  className=\"rounded-full border border-red-300/60 bg-red-500/15 px-2 py-[5px] text-[11px] text-red-50 hover:border-red-200/70\"\n                                >\n                                  Apagar\n                                </button>\n                              </div>\n                            </div>\n                          ))}\n                      </div>\n                      <div className=\"space-y-2\">\n                        <p className=\"text-[12px] uppercase tracking-[0.16em] text-white/55\">Indisponibilidades</p>\n                        {calendarAvailabilities.length === 0 && (\n                          <p className=\"text-[12px] text-white/55\">Sem indisponibilidades.</p>\n                        )}\n                        {[...calendarAvailabilities]\n                          .sort((a, b) => new Date(a.startAt).getTime() - new Date(b.startAt).getTime())\n                          .slice(0, 6)\n                          .map((av) => (\n                            <div\n                              key={`av-${av.id}`}\n                              className=\"rounded-lg border border-amber-300/30 bg-amber-400/10 px-3 py-2 text-[12px] text-white space-y-1\"\n                            >\n                              <p className=\"font-semibold\">{av.playerName || av.playerEmail || \"Jogador\"}</p>\n                              <p className=\"text-white/70\">\n                                {formatZoned(av.startAt, calendarTimezone)} → {formatZoned(av.endAt, calendarTimezone)}\n                              </p>\n                              {av.note && <p className=\"text-white/65\">Nota: {av.note}</p>}\n                              <div className=\"flex flex-wrap gap-2\">\n                                <button\n                                  type=\"button\"\n                                  onClick={() => handleEditAvailability(av)}\n                                  className=\"rounded-full border border-white/30 px-2 py-[5px] text-[11px] text-white hover:border-white/45\"\n                                >\n                                  Editar\n                                </button>\n                                <button\n                                  type=\"button\"\n                                  onClick={() => handleDeleteCalendarItem(\"availability\", av.id)}\n                                  className=\"rounded-full border border-red-300/60 bg-red-500/15 px-2 py-[5px] text-[11px] text-red-50 hover:border-red-200/70\"\n                                >\n                                  Apagar\n                                </button>\n                              </div>\n                            </div>\n                          ))}\n                      </div>\n              <div className=\"space-y-2 lg:col-span-2\">\n                <p className=\"text-[12px] uppercase tracking-[0.16em] text-white/55\">Jogos agendados</p>\n                {calendarMatches.length === 0 && (\n                  <p className=\"text-[12px] text-white/55\">Sem jogos com horário definido.</p>\n                )}\n                {[...calendarMatches]\n                  .sort(\n                    (a, b) =>\n                      new Date(a.startTime || a.plannedStartAt || 0).getTime() -\n                      new Date(b.startTime || b.plannedStartAt || 0).getTime(),\n                  )\n                  .slice(0, 6)\n                  .map((m) => (\n                    <div\n                      key={`match-${m.id}`}\n                      className={`flex flex-wrap items-center justify-between gap-2 rounded-lg border px-3 py-2 text-[12px] text-white shadow-[0_12px_35px_rgba(0,0,0,0.35)] ${\n                        calendarConflicts.some((c) => c.aId === m.id && c.type !== \"outside_event_window\")\n                          ? \"border-red-400/70 bg-red-500/10\"\n                          : calendarConflicts.some((c) => c.aId === m.id && c.type === \"outside_event_window\")\n                            ? \"border-amber-300/60 bg-amber-500/10\"\n                            : \"border-white/12 bg-gradient-to-r from-white/8 via-[#0f1c3d]/50 to-[#050912]/80\"\n                      }`}\n                    >\n                      <div className=\"space-y-1\">\n                        <p className=\"font-semibold\">Jogo #{m.id}</p>\n                        <p className=\"text-white/70\">\n                          {formatZoned(m.startTime || m.plannedStartAt, calendarTimezone)} · Court {m.courtName || m.courtNumber || m.courtId || \"—\"}\n                        </p>\n                        <p className=\"text-white/60\">{m.roundLabel || m.groupLabel || \"Fase\"}</p>\n                        <div className=\"flex flex-wrap gap-1\">\n                          <button\n                            type=\"button\"\n                            onClick={async () => {\n                              const start = m.startTime || m.plannedStartAt;\n                              const end =\n                                m.plannedEndAt ||\n                                (start && m.plannedDurationMinutes\n                                  ? new Date(new Date(start).getTime() + m.plannedDurationMinutes * 60 * 1000).toISOString()\n                                  : null);\n                              if (!start || !end) return;\n                              const newEnd = new Date(new Date(end).getTime() - slotMinutes * 60 * 1000);\n                              setSavingCalendar(true);\n                              try {\n                                const res = await fetch(\"/api/padel/calendar\", {\n                                  method: \"PATCH\",\n                                  headers: { \"Content-Type\": \"application/json\" },\n                                  body: JSON.stringify({\n                                    type: \"match\",\n                                    id: m.id,\n                                    startAt: start,\n                                    endAt: newEnd.toISOString(),\n                                    version: m.updatedAt,\n                                  }),\n                                });\n                                const json = await res.json().catch(() => null);\n                                if (!res.ok || json?.ok === false) {\n                                  setCalendarError(json?.error || \"Não foi possível ajustar.\");\n                                  toast(json?.error || \"Não foi possível ajustar.\", \"err\");\n                                } else {\n                                  setLastAction({\n                                    type: \"match\",\n                                    id: m.id,\n                                    prevStart: start,\n                                    prevEnd: end,\n                                    prevCourtId: m.courtId ?? null,\n                                    prevDuration: m.plannedDurationMinutes ?? null,\n                                    version: m.updatedAt ?? null,\n                                  });\n                                  toast(\"Ajustado -1 slot\", \"ok\");\n                                  mutateCalendar();\n                                }\n                              } finally {\n                                setSavingCalendar(false);\n                              }\n                            }}\n                            className=\"rounded-full border border-white/20 px-2 py-[2px] text-[11px] text-white hover:border-white/35\"\n                          >\n                            -{slotMinutes}m\n                          </button>\n                          <button\n                            type=\"button\"\n                            onClick={async () => {\n                              const start = m.startTime || m.plannedStartAt;\n                              const end =\n                                m.plannedEndAt ||\n                                (start && m.plannedDurationMinutes\n                                  ? new Date(new Date(start).getTime() + m.plannedDurationMinutes * 60 * 1000).toISOString()\n                                  : null);\n                              if (!start || !end) return;\n                              const newEnd = new Date(new Date(end).getTime() + slotMinutes * 60 * 1000);\n                              setSavingCalendar(true);\n                              try {\n                                const res = await fetch(\"/api/padel/calendar\", {\n                                  method: \"PATCH\",\n                                  headers: { \"Content-Type\": \"application/json\" },\n                                  body: JSON.stringify({\n                                    type: \"match\",\n                                    id: m.id,\n                                    startAt: start,\n                                    endAt: newEnd.toISOString(),\n                                    version: m.updatedAt,\n                                  }),\n                                });\n                                const json = await res.json().catch(() => null);\n                                if (!res.ok || json?.ok === false) {\n                                  setCalendarError(json?.error || \"Não foi possível ajustar.\");\n                                  toast(json?.error || \"Não foi possível ajustar.\", \"err\");\n                                } else {\n                                  setLastAction({\n                                    type: \"match\",\n                                    id: m.id,\n                                    prevStart: start,\n                                    prevEnd: end,\n                                    prevCourtId: m.courtId ?? null,\n                                    prevDuration: m.plannedDurationMinutes ?? null,\n                                    version: m.updatedAt ?? null,\n                                  });\n                                  toast(\"Ajustado +1 slot\", \"ok\");\n                                  mutateCalendar();\n                                }\n                              } finally {\n                                setSavingCalendar(false);\n                              }\n                            }}\n                            className=\"rounded-full border border-white/20 px-2 py-[2px] text-[11px] text-white hover:border-white/35\"\n                          >\n                            +{slotMinutes}m\n                          </button>\n                        </div>\n                      </div>\n                      <span className=\"rounded-full border border-white/20 bg-white/5 px-2 py-1 text-[11px] text-white/75\">\n                        {m.status}\n                      </span>\n                    </div>\n                          ))}\n                      </div>\n                    <div className=\"space-y-2 lg:col-span-2\">\n                      <p className=\"text-[12px] uppercase tracking-[0.16em] text-white/55\">Conflitos</p>\n                      {calendarConflicts.length === 0 && (\n                        <p className=\"text-[12px] text-emerald-200/80\">Sem conflitos detetados.</p>\n                      )}\n                      {calendarConflicts.slice(0, 6).map((c) => (\n                        <div\n                          key={`${c.type}-${c.aId}-${c.bId}`}\n                          className={`flex items-center justify-between rounded-lg px-3 py-2 text-[12px] shadow-[0_12px_35px_rgba(0,0,0,0.35)] ${\n                            c.type === \"outside_event_window\" || c.type === \"availability_match\"\n                              ? \"border border-amber-300/40 bg-amber-500/10 text-amber-50\"\n                              : \"border border-red-300/40 bg-red-500/10 text-red-50\"\n                          }`}\n                        >\n                          <div className=\"space-y-1\">\n                            <p className=\"font-semibold\">{c.summary}</p>\n                            <p className=\"text-red-100/80\">Registos #{c.aId} e #{c.bId}</p>\n                            {c.type === \"player_match\" && (\n                              <p className=\"text-[11px] text-red-100/70\">Dupla/jogador duplicado no mesmo horário.</p>\n                            )}\n                            {c.type === \"outside_event_window\" && (\n                              <p className=\"text-[11px] text-amber-100/80\">Fora da janela do evento.</p>\n                            )}\n                          </div>\n                          <span className=\"rounded-full border border-red-200/40 bg-red-200/15 px-2 py-[6px] text-[11px] text-red-50\">\n                            {c.type}\n                          </span>\n                        </div>\n                      ))}\n                    </div>\n                    </div>\n                  </div>\n                )}\n            </div>\n            <div className=\"space-y-3 rounded-2xl border border-white/12 bg-white/5 p-4 text-white/80 shadow-[0_16px_50px_rgba(0,0,0,0.45)]\">\n              <p className=\"text-sm font-semibold text-white\">Legenda & próximos passos</p>\n              <ul className=\"space-y-2 text-[13px] text-white/70\">\n                <li>• Bloqueios de court e indisponibilidades de jogador.</li>\n                <li>• Conflitos: sobreposição, jogador em dois jogos, fora de horário.</li>\n                <li>• Vista por clube ou todos os clubes ativos do torneio.</li>\n                <li>• Horas em {calendarTimezone} com buffer de {calendarBuffer} min entre registos.</li>\n              </ul>\n              <div className=\"rounded-xl border border-white/12 bg-gradient-to-br from-white/8 via-[#0f1c3d]/50 to-[#050912]/90 p-3 text-[13px] text-white/75\">\n                A seguir: endpoints de indisponibilidade + slots de bloqueio; depois ligamos o drag & drop.\n              </div>\n            </div>\n            <div className=\"space-y-3 rounded-2xl border border-white/12 bg-gradient-to-br from-white/8 via-[#0f1c3d]/55 to-[#050912]/90 p-4 text-white shadow-[0_18px_55px_rgba(0,0,0,0.45)]\">\n              <p className=\"text-sm font-semibold text-white\">Novo bloqueio</p>\n              <div className=\"grid gap-2 sm:grid-cols-2\">\n                <input\n                  type=\"datetime-local\"\n                  value={blockForm.start}\n                  onChange={(e) => setBlockForm((p) => ({ ...p, start: e.target.value }))}\n                  className=\"rounded-lg border border-white/15 bg-black/30 px-3 py-2 text-sm outline-none focus:border-[#6BFFFF]\"\n                  placeholder=\"Início\"\n                  disabled={!eventId || savingCalendar}\n                />\n                <input\n                  type=\"datetime-local\"\n                  value={blockForm.end}\n                  onChange={(e) => setBlockForm((p) => ({ ...p, end: e.target.value }))}\n                  className=\"rounded-lg border border-white/15 bg-black/30 px-3 py-2 text-sm outline-none focus:border-[#6BFFFF]\"\n                  placeholder=\"Fim\"\n                  disabled={!eventId || savingCalendar}\n                />\n              </div>\n              <input\n                type=\"text\"\n                value={blockForm.label}\n                onChange={(e) => setBlockForm((p) => ({ ...p, label: e.target.value }))}\n                className=\"w-full rounded-lg border border-white/15 bg-black/30 px-3 py-2 text-sm outline-none focus:border-[#6BFFFF]\"\n                placeholder=\"Título do bloqueio (opcional)\"\n                disabled={!eventId || savingCalendar}\n              />\n              <input\n                type=\"text\"\n                value={blockForm.note}\n                onChange={(e) => setBlockForm((p) => ({ ...p, note: e.target.value }))}\n                className=\"w-full rounded-lg border border-white/15 bg-black/30 px-3 py-2 text-sm outline-none focus:border-[#6BFFFF]\"\n                placeholder=\"Nota (opcional)\"\n                disabled={!eventId || savingCalendar}\n              />\n              <button\n                type=\"button\"\n                onClick={() => saveCalendarItem(\"block\")}\n                disabled={!eventId || savingCalendar}\n                className=\"inline-flex items-center justify-center rounded-full bg-white px-4 py-2 text-sm font-semibold text-black shadow hover:scale-[1.01] disabled:opacity-60\"\n              >\n                {savingCalendar ? \"A guardar…\" : editingBlockId ? \"Atualizar bloqueio\" : \"Guardar bloqueio\"}\n              </button>\n              {lastAction && lastAction.type === \"block\" && (\n                <button\n                  type=\"button\"\n                  onClick={() => {\n                    if (!lastAction) return;\n                    setCalendarMessage(null);\n                    setCalendarWarning(null);\n                    setCalendarError(null);\n                    setSavingCalendar(true);\n                    fetch(\"/api/padel/calendar\", {\n                      method: \"PATCH\",\n                      headers: { \"Content-Type\": \"application/json\" },\n                      body: JSON.stringify({\n                        type: \"block\",\n                        id: lastAction.id,\n                        startAt: lastAction.prevStart,\n                        endAt: lastAction.prevEnd,\n                        courtId: lastAction.prevCourtId ?? undefined,\n                        version: lastAction.version ?? undefined,\n                      }),\n                    })\n                      .then((res) => res.json().then((json) => ({ res, json })))\n                      .then(({ res, json }) => {\n                        if (!res.ok || json?.ok === false) {\n                          setCalendarError(json?.error || \"Não foi possível desfazer.\");\n                          toast(json?.error || \"Não foi possível desfazer.\", \"err\");\n                        } else {\n                          setCalendarMessage(\"Desfeito.\");\n                          toast(\"Desfeito\", \"ok\");\n                          setLastAction(null);\n                          mutateCalendar();\n                        }\n                      })\n                      .catch(() => {\n                        setCalendarError(\"Erro ao desfazer.\");\n                      })\n                      .finally(() => setSavingCalendar(false));\n                  }}\n                  className=\"inline-flex items-center justify-center rounded-full border border-white/25 px-4 py-2 text-sm font-semibold text-white hover:border-white/40\"\n                >\n                  Desfazer último\n                </button>\n              )}\n              {editingBlockId && (\n                <button\n                  type=\"button\"\n                  onClick={resetCalendarForms}\n                  className=\"inline-flex items-center justify-center rounded-full border border-white/25 px-4 py-2 text-sm font-semibold text-white hover:border-white/40\"\n                >\n                  Cancelar edição\n                </button>\n              )}\n              {!eventId && <p className=\"text-[12px] text-white/55\">Precisas de eventId no URL.</p>}\n            </div>\n            <div className=\"space-y-3 rounded-2xl border border-white/12 bg-gradient-to-br from-white/8 via-[#130c24]/55 to-[#050912]/90 p-4 text-white shadow-[0_18px_55px_rgba(0,0,0,0.45)]\">\n              <p className=\"text-sm font-semibold text-white\">Nova indisponibilidade</p>\n              <div className=\"grid gap-2 sm:grid-cols-2\">\n                <input\n                  type=\"datetime-local\"\n                  value={availabilityForm.start}\n                  onChange={(e) => setAvailabilityForm((p) => ({ ...p, start: e.target.value }))}\n                  className=\"rounded-lg border border-white/15 bg-black/30 px-3 py-2 text-sm outline-none focus:border-[#6BFFFF]\"\n                  placeholder=\"Início\"\n                  disabled={!eventId || savingCalendar}\n                />\n                <input\n                  type=\"datetime-local\"\n                  value={availabilityForm.end}\n                  onChange={(e) => setAvailabilityForm((p) => ({ ...p, end: e.target.value }))}\n                  className=\"rounded-lg border border-white/15 bg-black/30 px-3 py-2 text-sm outline-none focus:border-[#6BFFFF]\"\n                  placeholder=\"Fim\"\n                  disabled={!eventId || savingCalendar}\n                />\n              </div>\n              <input\n                type=\"text\"\n                value={availabilityForm.playerName}\n                onChange={(e) => setAvailabilityForm((p) => ({ ...p, playerName: e.target.value }))}\n                className=\"w-full rounded-lg border border-white/15 bg-black/30 px-3 py-2 text-sm outline-none focus:border-[#6BFFFF]\"\n                placeholder=\"Nome do jogador (opcional)\"\n                disabled={!eventId || savingCalendar}\n              />\n              <input\n                type=\"email\"\n                value={availabilityForm.playerEmail}\n                onChange={(e) => setAvailabilityForm((p) => ({ ...p, playerEmail: e.target.value }))}\n                className=\"w-full rounded-lg border border-white/15 bg-black/30 px-3 py-2 text-sm outline-none focus:border-[#6BFFFF]\"\n                placeholder=\"Email (opcional)\"\n                disabled={!eventId || savingCalendar}\n              />\n              <input\n                type=\"text\"\n                value={availabilityForm.note}\n                onChange={(e) => setAvailabilityForm((p) => ({ ...p, note: e.target.value }))}\n                className=\"w-full rounded-lg border border-white/15 bg-black/30 px-3 py-2 text-sm outline-none focus:border-[#6BFFFF]\"\n                placeholder=\"Nota (opcional)\"\n                disabled={!eventId || savingCalendar}\n              />\n              <button\n                type=\"button\"\n                onClick={() => saveCalendarItem(\"availability\")}\n                disabled={!eventId || savingCalendar}\n                className=\"inline-flex items-center justify-center rounded-full bg-white px-4 py-2 text-sm font-semibold text-black shadow hover:scale-[1.01] disabled:opacity-60\"\n              >\n                {savingCalendar ? \"A guardar…\" : editingAvailabilityId ? \"Atualizar indisponibilidade\" : \"Guardar indisponibilidade\"}\n              </button>\n              {lastAction && lastAction.type === \"availability\" && (\n                <button\n                  type=\"button\"\n                  onClick={() => {\n                    if (!lastAction) return;\n                    setCalendarMessage(null);\n                    setCalendarWarning(null);\n                    setCalendarError(null);\n                    setSavingCalendar(true);\n                    fetch(\"/api/padel/calendar\", {\n                      method: \"PATCH\",\n                      headers: { \"Content-Type\": \"application/json\" },\n                      body: JSON.stringify({\n                        type: \"availability\",\n                        id: lastAction.id,\n                        startAt: lastAction.prevStart,\n                        endAt: lastAction.prevEnd,\n                        version: lastAction.version ?? undefined,\n                      }),\n                    })\n                      .then((res) => res.json().then((json) => ({ res, json })))\n                      .then(({ res, json }) => {\n                        if (!res.ok || json?.ok === false) {\n                          setCalendarError(json?.error || \"Não foi possível desfazer.\");\n                          toast(json?.error || \"Não foi possível desfazer.\", \"err\");\n                        } else {\n                          setCalendarMessage(\"Desfeito.\");\n                          toast(\"Desfeito\", \"ok\");\n                          setLastAction(null);\n                          mutateCalendar();\n                        }\n                      })\n                      .catch(() => {\n                        setCalendarError(\"Erro ao desfazer.\");\n                      })\n                      .finally(() => setSavingCalendar(false));\n                  }}\n                  className=\"inline-flex items-center justify-center rounded-full border border-white/25 px-4 py-2 text-sm font-semibold text-white hover:border-white/40\"\n                >\n                  Desfazer último\n                </button>\n              )}\n              {editingAvailabilityId && (\n                <button\n                  type=\"button\"\n                  onClick={resetCalendarForms}\n                  className=\"inline-flex items-center justify-center rounded-full border border-white/25 px-4 py-2 text-sm font-semibold text-white hover:border-white/40\"\n                >\n                  Cancelar edição\n                </button>\n              )}\n              {!eventId && <p className=\"text-[12px] text-white/55\">Precisas de eventId no URL.</p>}\n            </div>\n          </div>\n        </div>\n      )}\n\n      {!switchingTab && activeTab === \"clubs\" && (\n        <div className=\"space-y-4 transition-all duration-250 ease-out opacity-100 translate-y-0\">\n          <div className=\"flex flex-wrap items-center justify-between gap-2\">\n            <div>\n              <h2 className=\"text-sm font-semibold text-white\">Clubes</h2>\n              <p className=\"text-[12px] text-white/65\">Morada, courts e default para o wizard.</p>\n            </div>\n            <button\n              type=\"button\"\n              onClick={openNewClubModal}\n              className=\"rounded-full bg-white px-4 py-2 text-sm font-semibold text-black shadow hover:scale-[1.01]\"\n            >\n              Novo clube\n            </button>\n          </div>\n          {sortedClubs.length === 0 ? (\n            <div className=\"rounded-2xl border border-dashed border-white/20 bg-black/35 p-6 text-white\">\n              <p className=\"text-lg font-semibold\">Ainda sem clubes.</p>\n              <p className=\"text-sm text-white/70\">Adiciona o primeiro para preencher morada e courts no wizard.</p>\n              <div className=\"mt-3 flex gap-2\">\n                <button\n                  type=\"button\"\n                  onClick={openNewClubModal}\n                  className=\"rounded-full bg-white px-4 py-2 text-sm font-semibold text-black shadow\"\n                >\n                  Criar clube\n                </button>\n              </div>\n            </div>\n          ) : (\n            <div className=\"grid gap-3 md:grid-cols-2 xl:grid-cols-3\">\n              {sortedClubs.map((club) => {\n                return (\n                  <div\n                    key={club.id}\n                    className={`rounded-2xl p-4 shadow-[0_16px_60px_rgba(0,0,0,0.45)] ${\n                      club.isActive\n                        ? \"border border-emerald-400/40 bg-emerald-500/5\"\n                        : \"border border-red-500/40 bg-red-500/8\"\n                    } ${drawerClubId === club.id ? \"ring-2 ring-cyan-400/40\" : \"\"}`}\n                    role=\"button\"\n                    tabIndex={0}\n                    onClick={() => {\n                      setDrawerClubId(club.id);\n                      loadCourtsAndStaff(club.id);\n                    }}\n                    onKeyDown={(e) => {\n                      if (e.key === \"Enter\" || e.key === \" \") {\n                        e.preventDefault();\n                        setDrawerClubId(club.id);\n                        loadCourtsAndStaff(club.id);\n                      }\n                    }}\n                  >\n                    <div className=\"flex items-start justify-between gap-3\">\n                      <div className=\"space-y-1\">\n                        <p className=\"text-base font-semibold text-white\">{club.name}</p>\n                    <p className=\"text-[12px] text-white/65\">{compactAddress(club)}</p>\n                    <p className=\"text-[12px] text-white/55\">Courts ativos: {activeCourtsForClub(club)}</p>\n                  </div>\n                      <span\n                        className={\n                          club.isActive\n                            ? badge(\"green\")\n                            : \"rounded-full border border-red-400/50 bg-red-500/15 px-3 py-1 text-[12px] text-red-100\"\n                        }\n                      >\n                        {club.isActive ? \"Ativo\" : \"Inativo\"}\n                      </span>\n                    </div>\n                    <div className=\"mt-3 flex flex-wrap items-center gap-2\">\n                      <button\n                        type=\"button\"\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          setDrawerClubId(club.id);\n                          loadCourtsAndStaff(club.id);\n                        }}\n                        className=\"rounded-full border border-white/20 px-3 py-1.5 text-[12px] text-white hover:border-white/30\"\n                      >\n                        Courts & equipa\n                      </button>\n                      <button\n                        type=\"button\"\n                        onClick={() => openEditClubModal(club)}\n                        className=\"rounded-full border border-white/20 px-3 py-1.5 text-[12px] text-white hover:border-white/30\"\n                      >\n                        Editar\n                      </button>\n                      {!club.isDefault && (\n                        <button\n                          type=\"button\"\n                          onClick={() => markDefaultClub(club)}\n                          className=\"rounded-full border border-white/20 px-3 py-1.5 text-[12px] text-white/80 hover:border-white/30\"\n                        >\n                          Tornar default\n                        </button>\n                      )}\n                      <button\n                        type=\"button\"\n                        onClick={() => setClubDialog({ club, nextActive: !club.isActive })}\n                        className={`rounded-full border px-3 py-1.5 text-[12px] ${\n                          club.isActive\n                            ? \"border-amber-300/60 bg-amber-400/15 text-amber-50 hover:border-amber-200/80\"\n                            : \"border-emerald-400/60 bg-emerald-500/15 text-emerald-50 hover:border-emerald-300/80\"\n                        }`}\n                      >\n                        {club.isActive ? \"Arquivar\" : \"Reativar\"}\n                      </button>\n                      {!club.isActive && (\n                        <button\n                          type=\"button\"\n                          onClick={() => setDeleteClubDialog(club)}\n                          className=\"rounded-full border border-red-400/60 bg-red-500/15 px-3 py-1.5 text-[12px] text-red-50 hover:border-red-300/80\"\n                        >\n                          Apagar\n                        </button>\n                      )}\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n          )}\n\n          {drawerClubId && selectedClub && (\n            <div className=\"space-y-4 rounded-2xl border border-white/12 bg-gradient-to-br from-white/6 via-[#0c1628]/65 to-[#050912]/85 p-4 shadow-[0_18px_60px_rgba(0,0,0,0.5)]\">\n              <div className=\"flex flex-wrap items-center justify-between gap-2\">\n                <div>\n                  <p className=\"text-[12px] uppercase tracking-[0.18em] text-white/60\">Courts & equipa</p>\n                  <p className=\"text-sm text-white/70\">Courts ativos e staff herdável vão para o wizard de torneio.</p>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <label className=\"sr-only\" htmlFor=\"club-switcher\">\n                    Trocar clube\n                  </label>\n                  <select\n                    id=\"club-switcher\"\n                    value={drawerClubId ?? \"\"}\n                    onChange={(e) => {\n                      const nextId = Number(e.target.value);\n                      if (Number.isFinite(nextId)) {\n                        setDrawerClubId(nextId);\n                      }\n                    }}\n                    className=\"rounded-full border border-white/20 bg-black/50 px-3 py-1 text-[12px] text-white shadow-inner outline-none transition focus:border-white/60 focus:ring-2 focus:ring-cyan-400/40\"\n                  >\n                    {sortedClubs.map((club) => (\n                      <option key={club.id} value={club.id}>\n                        {club.name}\n                      </option>\n                    ))}\n                  </select>\n                  <span className={badge(\"slate\")}>{selectedClub.name}</span>\n                  <button\n                    type=\"button\"\n                    onClick={() => setDrawerClubId(null)}\n                    className=\"rounded-full border border-white/15 px-3 py-1 text-[12px] text-white hover:border-white/30\"\n                  >\n                    Fechar\n                  </button>\n                </div>\n              </div>\n\n              {loadingDrawer && (\n                <div className=\"space-y-3\">\n                  <div className=\"h-4 w-32 rounded bg-white/10 animate-pulse\" />\n                  <div className=\"grid gap-3 lg:grid-cols-2\">\n                    {[...Array(2)].map((_, idx) => (\n                      <div key={idx} className=\"space-y-2 rounded-xl border border-white/12 bg-white/5 p-3 animate-pulse\">\n                        <div className=\"h-4 w-1/2 rounded bg-white/10\" />\n                        <div className=\"h-10 rounded bg-white/5\" />\n                        <div className=\"h-10 rounded bg-white/5\" />\n                        <div className=\"h-3 w-24 rounded bg-white/10\" />\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              )}\n\n              <div className=\"grid gap-4 lg:grid-cols-2\">\n                <div className=\"space-y-3 rounded-xl border border-white/12 bg-gradient-to-br from-white/6 via-[#0c1628]/60 to-[#050912]/85 p-3 shadow-[0_14px_45px_rgba(0,0,0,0.45)]\">\n                  <div className=\"flex items-center justify-between\">\n                    <p className=\"text-sm font-semibold text-white\">Courts do clube</p>\n                    <span className={badge(\"slate\")}>{courts.filter((c) => c.isActive).length} ativos</span>\n                  </div>\n                  <div className=\"grid gap-2 sm:grid-cols-2\">\n                    <input\n                      value={courtForm.name}\n                      onChange={(e) => setCourtForm((p) => ({ ...p, name: e.target.value }))}\n                      className=\"rounded-lg border border-white/15 bg-black/40 px-3 py-2 text-sm outline-none focus:border-[#6BFFFF]\"\n                      placeholder=\"Nome do court\"\n                    />\n                    <input\n                      value={courtForm.description}\n                      onChange={(e) => setCourtForm((p) => ({ ...p, description: e.target.value }))}\n                      className=\"rounded-lg border border-white/15 bg-black/40 px-3 py-2 text-sm outline-none focus:border-[#6BFFFF]\"\n                      placeholder=\"Descrição / patrocinador (opcional)\"\n                    />\n                    <div className=\"col-span-2 flex flex-wrap items-center gap-2 text-sm text-white/80\">\n                      <span className=\"text-[12px] uppercase tracking-[0.2em] text-white/60\">Tipo</span>\n                      <div className=\"inline-flex rounded-full border border-white/15 bg-black/40 p-1 text-[12px]\">\n                        {[\n                          { key: false, label: \"Outdoor\" },\n                          { key: true, label: \"Indoor\" },\n                        ].map((opt) => (\n                          <button\n                            key={String(opt.key)}\n                            type=\"button\"\n                            onClick={() => setCourtForm((p) => ({ ...p, indoor: opt.key as boolean }))}\n                            className={`rounded-full px-3 py-1 transition ${\n                              courtForm.indoor === opt.key\n                                ? \"bg-white text-black font-semibold shadow\"\n                                : \"text-white/75 hover:bg-white/5\"\n                            }`}\n                          >\n                            {opt.label}\n                          </button>\n                        ))}\n                      </div>\n                    <div className=\"inline-flex rounded-full border border-white/15 bg-black/40 p-1 text-[12px]\">\n                      {[\n                        { key: true, label: \"Ativo\" },\n                        { key: false, label: \"Inativo\" },\n                      ].map((opt) => (\n                          <button\n                            key={String(opt.key)}\n                            type=\"button\"\n                            onClick={() => setCourtForm((p) => ({ ...p, isActive: opt.key as boolean }))}\n                            className={`rounded-full px-3 py-1 transition ${\n                              courtForm.isActive === opt.key\n                                ? opt.key\n                                  ? \"bg-emerald-400 text-black font-semibold\"\n                                  : \"bg-white text-black font-semibold\"\n                                : \"text-white/75 hover:bg-white/5\"\n                            }`}\n                          >\n                            {opt.label}\n                          </button>\n                        ))}\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"flex flex-wrap gap-2\">\n                    <button\n                      type=\"button\"\n                      onClick={handleSubmitCourt}\n                      disabled={savingCourt}\n                      className=\"rounded-full bg-white px-3 py-1.5 text-[12px] font-semibold text-black shadow disabled:opacity-60\"\n                    >\n                      {savingCourt ? \"A guardar…\" : courtForm.id ? \"Atualizar court\" : \"Guardar court\"}\n                    </button>\n                    {courtForm.id && (\n                      <button\n                        type=\"button\"\n                        onClick={resetCourtForm}\n                        className=\"rounded-full border border-white/20 px-3 py-1.5 text-[12px] text-white hover:border-white/35\"\n                      >\n                        Cancelar\n                      </button>\n                    )}\n                {(courtError || courtMessage) && (\n                  <span className=\"text-[12px] text-white/70\">{courtError || courtMessage}</span>\n                )}\n              </div>\n              <div className=\"space-y-2 rounded-lg border border-white/10 bg-white/5 p-2 text-[12px] text-white/80\">\n                {courts.length === 0 && <p className=\"text-white/60\">Sem courts ainda.</p>}\n                {courts.map((c, idx) => (\n                  <div\n                    key={c.id}\n                    draggable\n                    onDragStart={() => setDraggingCourtId(c.id)}\n                    onDragOver={(e) => e.preventDefault()}\n                    onDrop={(e) => {\n                      e.preventDefault();\n                      const updated = reorderCourts(c.id);\n                      if (updated) {\n                        persistCourtOrder(updated);\n                      }\n                      setDraggingCourtId(null);\n                    }}\n                    onDragEnd={() => setDraggingCourtId(null)}\n                    className={`flex items-center justify-between gap-3 rounded-md px-3 py-2 transition ${\n                      c.isActive\n                        ? \"border border-emerald-400/35 bg-emerald-500/5\"\n                        : \"border border-red-500/40 bg-red-500/8\"\n                    } ${draggingCourtId === c.id ? \"opacity-60\" : \"opacity-100\"}`}\n                  >\n                    <div className=\"flex items-center gap-3\">\n                      <div\n                        className={`flex h-10 w-10 items-center justify-center rounded-full border text-lg font-bold ${\n                          c.isActive\n                            ? \"border-emerald-400/40 bg-emerald-500/10 text-emerald-50\"\n                            : \"border-red-400/40 bg-red-500/10 text-red-100\"\n                        }`}\n                      >\n                        {idx + 1}\n                      </div>\n                      <div>\n                        <p className=\"text-sm font-semibold text-white\">{c.name}</p>\n                        <p className={`text-[11px] ${c.isActive ? \"text-emerald-100/80\" : \"text-red-100/80\"}`}>\n                          {c.indoor ? \"Indoor\" : \"Outdoor\"} · Ordem {c.displayOrder} · {c.isActive ? \"Ativo\" : \"Inativo\"}\n                        </p>\n                      </div>\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                      <button\n                        type=\"button\"\n                        onClick={() => handleEditCourt(c)}\n                        className=\"rounded-full border border-white/15 px-2 py-1 text-[11px] text-white hover:border-white/30\"\n                      >\n                        Editar\n                      </button>\n                      <button\n                        type=\"button\"\n                        onClick={() => setCourtDialog({ court: c, nextActive: !c.isActive })}\n                        className={`rounded-full border px-2 py-1 text-[11px] ${\n                          c.isActive\n                            ? \"border-amber-300/60 bg-amber-400/15 text-amber-50 hover:border-amber-200/80\"\n                            : \"border-emerald-400/60 bg-emerald-500/15 text-emerald-50 hover:border-emerald-300/80\"\n                        }`}\n                      >\n                        {c.isActive ? \"Desativar\" : \"Reativar\"}\n                      </button>\n                      {!c.isActive && (\n                        <button\n                          type=\"button\"\n                          onClick={() => setDeleteCourtDialog(c)}\n                          className=\"rounded-full border border-red-400/60 bg-red-500/15 px-2 py-1 text-[11px] text-red-50 hover:border-red-300/80\"\n                        >\n                          Apagar\n                        </button>\n                      )}\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n\n                <div className=\"space-y-3 rounded-xl border border-white/12 bg-gradient-to-br from-white/6 via-[#0c1628]/60 to-[#050912]/85 p-3 shadow-[0_14px_45px_rgba(0,0,0,0.45)]\">\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"space-y-1\">\n                      <p className=\"text-sm font-semibold text-white\">Staff do clube</p>\n                      <p className=\"text-[11px] text-white/60\">\n                        {staff.length} membros · {inheritedStaffCount} herdam para torneios\n                      </p>\n                    </div>\n                    <span className={badge(\"slate\")}>Herdam: {inheritedStaffCount}</span>\n                  </div>\n\n                  <div className=\"grid gap-2 sm:grid-cols-2\">\n                    {[\n                      {\n                        key: \"existing\",\n                        label: \"Staff do organizador\",\n                        desc: \"Reaproveita quem já tens no staff global e herda para torneios.\",\n                      },\n                      {\n                        key: \"external\",\n                        label: \"Contacto externo\",\n                        desc: \"Email + role só para este clube. Podes convidar depois.\",\n                      },\n                    ].map((opt) => (\n                      <button\n                        key={opt.key}\n                        type=\"button\"\n                        onClick={() => setStaffMode(opt.key as typeof staffMode)}\n                        className={`rounded-xl border p-3 text-left transition ${\n                          staffMode === opt.key\n                            ? \"border-white/60 bg-white/10 shadow-[0_10px_35px_rgba(0,0,0,0.45)]\"\n                            : \"border-white/15 bg-white/5 hover:border-white/30\"\n                        }`}\n                      >\n                        <p className=\"font-semibold text-white\">{opt.label}</p>\n                        <p className=\"text-[12px] text-white/65\">{opt.desc}</p>\n                      </button>\n                    ))}\n                  </div>\n\n                  {staffMode === \"existing\" ? (\n                    <div className=\"space-y-2 rounded-xl border border-white/12 bg-black/30 p-3\">\n                      <div className=\"grid gap-2 sm:grid-cols-2\">\n                        <input\n                          value={staffSearch}\n                          onChange={(e) => setStaffSearch(e.target.value)}\n                          className=\"rounded-lg border border-white/15 bg-black/40 px-3 py-2 text-sm outline-none focus:border-[#6BFFFF]\"\n                          placeholder=\"Pesquisar membro (nome, email, username)\"\n                        />\n                        <select\n                          value={staffForm.staffMemberId}\n                          onChange={(e) => setStaffForm((p) => ({ ...p, staffMemberId: e.target.value }))}\n                          className=\"rounded-lg border border-white/15 bg-black/40 px-3 py-2 text-sm outline-none focus:border-[#6BFFFF]\"\n                        >\n                          <option value=\"\">Escolhe membro</option>\n                          {staffOptions.map((m) => (\n                            <option key={m.userId} value={m.userId}>\n                              {(m.fullName || m.username || m.email || \"Membro\").trim()} {m.email ? `· ${m.email}` : \"\"}\n                            </option>\n                          ))}\n                        </select>\n                      </div>\n                      {staffForm.staffMemberId && (\n                        <div className=\"rounded-lg border border-white/15 bg-white/5 p-3 text-[12px] text-white/75\">\n                          <p className=\"font-semibold text-white/90\">Resumo rápido</p>\n                          <p className=\"text-white/70\">\n                            Herdado do staff global; ficará marcado como herdado neste clube e nos torneios.\n                          </p>\n                        </div>\n                      )}\n                    </div>\n                  ) : (\n                    <div className=\"space-y-2 rounded-xl border border-white/12 bg-black/30 p-3\">\n                      <div className=\"grid gap-2 sm:grid-cols-2\">\n                        <input\n                          value={staffForm.email}\n                          onChange={(e) => setStaffForm((p) => ({ ...p, email: e.target.value }))}\n                          className=\"rounded-lg border border-white/15 bg-black/40 px-3 py-2 text-sm outline-none focus:border-[#6BFFFF]\"\n                          placeholder=\"Email do contacto\"\n                        />\n                        <div className=\"rounded-lg border border-white/15 bg-black/25 px-3 py-2 text-[12px] text-white/70\">\n                          Sem conta ORYA: guardamos só email + role. Podes convidar mais tarde.\n                        </div>\n                      </div>\n                    </div>\n                  )}\n\n                  <div className=\"grid gap-2 sm:grid-cols-2\">\n                    <select\n                      value={staffForm.role}\n                      onChange={(e) => setStaffForm((p) => ({ ...p, role: e.target.value }))}\n                      className=\"rounded-lg border border-white/15 bg-black/40 px-3 py-2 text-sm outline-none focus:border-[#6BFFFF]\"\n                    >\n                      <option value=\"ADMIN_CLUBE\">Admin clube</option>\n                      <option value=\"DIRETOR_PROVA\">Diretor / Árbitro</option>\n                      <option value=\"STAFF\">Staff de campo</option>\n                    </select>\n                    <div className=\"inline-flex rounded-full border border-white/15 bg-black/40 p-1 text-[12px]\">\n                      {[\n                        { key: true, label: \"Herdar para torneios\" },\n                        { key: false, label: \"Só neste clube\" },\n                      ].map((opt) => (\n                        <button\n                          key={String(opt.key)}\n                          type=\"button\"\n                          onClick={() => setStaffForm((p) => ({ ...p, inheritToEvents: opt.key as boolean }))}\n                          className={`rounded-full px-3 py-1 transition ${\n                            staffForm.inheritToEvents === opt.key\n                              ? \"bg-white text-black font-semibold shadow\"\n                              : \"text-white/75 hover:bg-white/5\"\n                          }`}\n                        >\n                          {opt.label}\n                        </button>\n                      ))}\n                    </div>\n                  </div>\n\n                  <div className=\"flex flex-wrap gap-2\">\n                    <button\n                      type=\"button\"\n                      onClick={handleSubmitStaff}\n                      className=\"rounded-full bg-white px-3 py-1.5 text-[12px] font-semibold text-black shadow\"\n                    >\n                      {staffForm.id ? \"Atualizar\" : \"Adicionar\"}\n                    </button>\n                    {staffForm.id && (\n                      <button\n                        type=\"button\"\n                        onClick={resetStaffForm}\n                        className=\"rounded-full border border-white/20 px-3 py-1.5 text-[12px] text-white hover:border-white/35\"\n                      >\n                        Cancelar\n                      </button>\n                    )}\n                    {(staffError || staffMessage || staffInviteNotice) && (\n                      <span className=\"text-[12px] text-white/70\">\n                        {staffError || staffMessage || staffInviteNotice}\n                      </span>\n                    )}\n                  </div>\n\n                  <div className=\"space-y-2 rounded-lg border border-white/12 bg-white/5 p-2 text-[12px] text-white/80\">\n                    {staff.length === 0 && <p className=\"text-white/60\">Sem staff ainda.</p>}\n                    {staff.map((s) => (\n                      <div key={s.id} className=\"flex items-center justify-between rounded-md border border-white/10 bg-black/40 px-2 py-1.5\">\n                        <div className=\"space-y-0.5\">\n                          <p className=\"text-sm text-white\">{s.email || s.userId || \"Sem contacto\"}</p>\n                          <div className=\"flex flex-wrap items-center gap-2 text-[11px] text-white/60\">\n                            <span className=\"rounded-full border border-white/20 bg-white/5 px-2 py-[2px]\">{s.role}</span>\n                            <span\n                              className={`rounded-full border px-2 py-[2px] ${\n                                s.inheritToEvents\n                                  ? \"border-emerald-300/50 bg-emerald-500/10 text-emerald-100\"\n                                  : \"border-white/20 bg-white/5 text-white/70\"\n                              }`}\n                            >\n                              {s.inheritToEvents ? \"Herdado p/ torneios\" : \"Só no clube\"}\n                            </span>\n                            <span className=\"rounded-full border border-white/15 bg-white/5 px-2 py-[2px]\">\n                              {s.userId ? \"Staff global\" : \"Externo\"}\n                            </span>\n                            {!s.userId && <span className=\"rounded-full border border-amber-300/50 bg-amber-400/10 px-2 py-[2px] text-amber-50\">Pendente (sem conta)</span>}\n                          </div>\n                        </div>\n                        <button\n                          type=\"button\"\n                          onClick={() => handleEditStaff(s)}\n                          className=\"rounded-full border border-white/15 px-2 py-1 text-[11px] text-white hover:border-white/30\"\n                        >\n                          Editar\n                        </button>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n      )}\n\n      {!switchingTab && activeTab === \"players\" && (\n        <div className=\"space-y-4 rounded-2xl border border-white/12 bg-gradient-to-br from-white/6 via-[#0c1628]/60 to-[#050912]/85 p-4 shadow-[0_18px_60px_rgba(0,0,0,0.5)] transition-all duration-250 ease-out opacity-100 translate-y-0\">\n          <div className=\"flex flex-wrap items-center justify-between gap-3\">\n            <div>\n              <p className=\"text-[12px] uppercase tracking-[0.2em] text-white/60\">Jogadores</p>\n              <p className=\"text-sm text-white/70\">Roster automático. Sem criação manual nesta fase.</p>\n            </div>\n            <input\n              value={search}\n              onChange={(e) => setSearch(e.target.value)}\n              placeholder=\"Procurar por nome ou email\"\n              className=\"w-60 rounded-full border border-white/15 bg-black/30 px-3 py-2 text-sm outline-none focus:border-[#6BFFFF]\"\n            />\n          </div>\n          <div className=\"overflow-auto rounded-xl border border-white/10\">\n            <table className=\"min-w-full text-left text-sm text-white/80\">\n              <thead className=\"bg-white/5 text-[12px] uppercase tracking-[0.12em] text-white/60\">\n                <tr>\n                  <th className=\"px-3 py-2\">Jogador</th>\n                  <th className=\"px-3 py-2\">Email</th>\n                  <th className=\"px-3 py-2\">Telefone</th>\n                  <th className=\"px-3 py-2\">Torneios</th>\n                </tr>\n              </thead>\n              <tbody>\n                {filteredPlayers.length === 0 && (\n                  <tr>\n                    <td className=\"px-3 py-3 text-[13px] text-white/60\" colSpan={4}>\n                      Sem jogadores ainda. Quando houver registos de jogadores em Padel, a lista aparece aqui.\n                    </td>\n                  </tr>\n                )}\n                {filteredPlayers.map((p) => (\n                  <tr key={p.id} className=\"border-t border-white/10\">\n                    <td className=\"px-3 py-2 font-semibold text-white\">\n                      <div>{p.fullName}</div>\n                      <p className=\"text-[11px] text-white/60\">{p.level || \"Nível não definido\"}</p>\n                    </td>\n                    <td className=\"px-3 py-2\">{p.email || \"—\"}</td>\n                    <td className=\"px-3 py-2\">{p.phone || \"—\"}</td>\n                    <td className=\"px-3 py-2\">\n                    <span className={badge(\"slate\")}>{p.tournamentsCount ?? 0} torneios</span>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        </div>\n      )}\n\n      {!switchingTab && activeTab === \"rankings\" && (\n        <div className=\"rounded-2xl border border-white/12 bg-gradient-to-br from-white/6 via-[#0c1628]/60 to-[#050912]/85 p-4 text-sm text-white/75 space-y-2 shadow-[0_18px_60px_rgba(0,0,0,0.5)] transition-all duration-250 ease-out opacity-100 translate-y-0\">\n          <p className=\"text-[12px] uppercase tracking-[0.2em] text-white/60\">Rankings</p>\n          <p>Rankings multi-torneio chegam numa próxima versão.</p>\n        </div>\n      )}\n\n      {organizationKind !== \"CLUBE_PADEL\" && (\n        <div className=\"rounded-2xl border border-white/12 bg-gradient-to-br from-white/6 via-[#0c1628]/60 to-[#050912]/85 p-4 text-[12px] text-white/70 shadow-[0_16px_50px_rgba(0,0,0,0.45)]\">\n          Ferramentas de Padel disponíveis mesmo sem seres clube. Usa quando precisares.\n        </div>\n      )}\n\n      {clubModalOpen && (\n        <div className=\"fixed inset-0 z-40 flex items-center justify-center bg-black/70 px-4\">\n          <div className=\"w-full max-w-xl rounded-2xl border border-white/10 bg-[#0c142b] p-6 shadow-[0_30px_80px_rgba(0,0,0,0.55)]\">\n            <div className=\"flex items-start justify-between gap-2\">\n              <div>\n                <p className=\"text-[12px] uppercase tracking-[0.2em] text-white/60\">\n                  {clubForm.id ? \"Editar clube\" : \"Novo clube\"}\n                </p>\n                <h3 className=\"text-xl font-semibold text-white\">Só o essencial.</h3>\n              </div>\n              <button\n                type=\"button\"\n                onClick={() => setClubModalOpen(false)}\n                className=\"rounded-full border border-white/20 px-3 py-1 text-[12px] text-white hover:border-white/35\"\n              >\n                Fechar\n              </button>\n            </div>\n\n            <div className=\"mt-4 space-y-3\">\n              <input\n                value={clubForm.name}\n                onChange={(e) => setClubForm((p) => ({ ...p, name: e.target.value }))}\n                placeholder=\"Nome do clube\"\n                className=\"w-full rounded-lg border border-white/15 bg-black/30 px-3 py-2 text-sm outline-none focus:border-[#6BFFFF]\"\n              />\n              <div className=\"grid gap-3 sm:grid-cols-2\">\n                <div className=\"relative\">\n                  <input\n                    list=\"pt-cities\"\n                    value={clubForm.city}\n                    onChange={(e) => setClubForm((p) => ({ ...p, city: e.target.value }))}\n                    placeholder=\"Cidade\"\n                    className=\"w-full rounded-lg border border-white/15 bg-black/30 px-3 py-2 text-sm outline-none focus:border-[#6BFFFF]\"\n                  />\n                  <datalist id=\"pt-cities\">\n                    {PORTUGAL_CITIES.map((city) => (\n                      <option key={city} value={city} />\n                    ))}\n                  </datalist>\n                </div>\n                <input\n                  value={clubForm.address}\n                  onChange={(e) => setClubForm((p) => ({ ...p, address: e.target.value }))}\n                  placeholder=\"Morada\"\n                  className=\"rounded-lg border border-white/15 bg-black/30 px-3 py-2 text-sm outline-none focus:border-[#6BFFFF]\"\n                />\n              </div>\n              <div className=\"grid gap-3 sm:grid-cols-2\">\n                <input\n                  value={(clubForm as any).slug ?? \"\"}\n                  onChange={(e) => {\n                    setSlugError(null);\n                    setClubForm((p: any) => ({ ...p, slug: e.target.value }));\n                  }}\n                  placeholder=\"Slug / código curto (opcional)\"\n                  className=\"rounded-lg border border-white/15 bg-black/30 px-3 py-2 text-sm outline-none focus:border-[#6BFFFF]\"\n                />\n                {slugError && <p className=\"mt-1 text-[12px] font-semibold text-red-300\">{slugError}</p>}\n                <input\n                  type=\"number\"\n                  min={1}\n                  max={1000}\n                  value={clubForm.courtsCount}\n                  onChange={(e) => setClubForm((p) => ({ ...p, courtsCount: e.target.value }))}\n                  placeholder=\"Nº de courts\"\n                  className=\"rounded-lg border border-white/15 bg-black/30 px-3 py-2 text-sm outline-none focus:border-[#6BFFFF]\"\n                />\n              </div>\n              <label className=\"flex items-center gap-2 text-sm text-white/80\">\n                <input\n                  type=\"checkbox\"\n                  checked={clubForm.isActive}\n                  onChange={(e) => setClubForm((p) => ({ ...p, isActive: e.target.checked }))}\n                  className=\"h-4 w-4\"\n                />\n                Ativo (disponível no wizard)\n              </label>\n              <div className=\"flex flex-wrap items-center gap-2 text-[12px] text-white/70\">\n                {clubError && <span className=\"text-red-300\">{clubError}</span>}\n                {clubMessage && <span>{clubMessage}</span>}\n              </div>\n              <div className=\"flex flex-wrap gap-2\">\n                <button\n                  type=\"button\"\n                  onClick={handleSubmitClub}\n                  disabled={savingClub}\n                  className=\"rounded-full bg-white px-4 py-2 text-sm font-semibold text-black shadow disabled:opacity-60\"\n                >\n                  {savingClub ? \"A guardar…\" : clubForm.id ? \"Guardar alterações\" : \"Criar clube\"}\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={() => setClubModalOpen(false)}\n                  className=\"rounded-full border border-white/20 px-3 py-2 text-[12px] text-white hover:border-white/35\"\n                >\n                  Cancelar\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {clubDialog && (\n        <ConfirmDestructiveActionDialog\n          open\n          title={clubDialog.nextActive ? \"Reativar clube?\" : \"Arquivar clube?\"}\n          description={\n            clubDialog.nextActive\n              ? \"O clube volta a aparecer no wizard e sugestões.\"\n              : \"O clube ficará inativo e deixa de aparecer nas sugestões do wizard.\"\n          }\n          consequences={\n            clubDialog.nextActive\n              ? [\"Courts ativos continuam disponíveis.\"]\n              : [\"Não aparecerá ao criar torneios.\", \"Podes reativar mais tarde.\"]\n          }\n          confirmLabel={clubDialog.nextActive ? \"Reativar\" : \"Arquivar\"}\n          dangerLevel=\"medium\"\n          onClose={() => setClubDialog(null)}\n          onConfirm={() => handleToggleClubActive(clubDialog.club, clubDialog.nextActive)}\n        />\n      )}\n\n      {deleteClubDialog && (\n        <ConfirmDestructiveActionDialog\n          open\n          title=\"Apagar clube?\"\n          description=\"Remove definitivamente este clube e os courts associados. Não aparecerá mais no hub ou no wizard.\"\n          consequences={[\"Ação permanente.\", \"Court e staff associados deixam de estar disponíveis.\"]}\n          confirmLabel=\"Apagar\"\n          dangerLevel=\"high\"\n          onClose={() => setDeleteClubDialog(null)}\n          onConfirm={() => handleDeleteClub(deleteClubDialog)}\n        />\n      )}\n\n      {courtDialog && (\n        <ConfirmDestructiveActionDialog\n          open\n          title={courtDialog.nextActive ? \"Reativar court?\" : \"Desativar court?\"}\n          description={\n            courtDialog.nextActive\n              ? \"O court volta a ser sugerido no wizard.\"\n              : \"O court fica inativo e deixa de ser sugerido.\"\n          }\n          consequences={\n            courtDialog.nextActive\n              ? [\"Mantém a ordem e atributos.\"]\n              : [\"Sai das sugestões do wizard.\", \"Podes reativar mais tarde.\"]\n          }\n          confirmLabel={courtDialog.nextActive ? \"Reativar\" : \"Desativar\"}\n          dangerLevel=\"medium\"\n          onClose={() => setCourtDialog(null)}\n          onConfirm={handleConfirmCourtToggle}\n        />\n      )}\n\n      {deleteCourtDialog && (\n        <ConfirmDestructiveActionDialog\n          open\n          title=\"Apagar court?\"\n          description=\"Remove definitivamente este court. Não aparecerá mais no hub ou no wizard.\"\n          consequences={[\"Ação permanente.\", \"Podes criar outro mais tarde.\"]}\n          confirmLabel=\"Apagar\"\n          dangerLevel=\"high\"\n          onClose={() => setDeleteCourtDialog(null)}\n          onConfirm={() => handleDeleteCourt(deleteCourtDialog)}\n        />\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAPA;;;;;;;AAiEA,MAAM,aAAa;IAAC;IAAY;IAAS;IAAW;CAAW;AAS/D,MAAM,eAAe;IACnB,IAAI;IACJ,MAAM;IACN,MAAM;IACN,SAAS;IACT,aAAa;IACb,UAAU;IACV,MAAM;IACN,WAAW;AACb;AAEA,MAAM,qBAAqB;IACzB,IAAI;IACJ,MAAM;IACN,aAAa;IACb,QAAQ;IACR,UAAU;IACV,cAAc;AAChB;AAEA,MAAM,qBAAqB;IACzB,IAAI;IACJ,OAAO;IACP,eAAe;IACf,MAAM;IACN,iBAAiB;AACnB;AAEA,MAAM,QAAQ,CAAC,OAAoC,OAAO,GACxD,CAAC,8CAA8C,EAC7C,SAAS,UACL,6DACF,SAAS,UACL,uDACA,6CACN;AACJ,MAAM,QAAQ,CAAC,KAAa,OAA8B,IAAI;IAC5D;;IACA,MAAM,KAAK,SAAS,aAAa,CAAC;IAClC,GAAG,WAAW,GAAG;IACjB,GAAG,SAAS,GAAG,CAAC,+FAA+F,EAC7G,SAAS,OACL,8BACA,SAAS,SACP,4BACA,yBACN;IACF,SAAS,IAAI,CAAC,WAAW,CAAC;IAC1B,WAAW;QACT,GAAG,KAAK,CAAC,OAAO,GAAG;QACnB,GAAG,KAAK,CAAC,SAAS,GAAG;QACrB,WAAW,IAAM,GAAG,MAAM,IAAI;IAChC,GAAG;AACL;AAEA,MAAM,UAAU,CAAC,MAAgB,MAAM,KAAK,IAAI,CAAC,CAAC,IAAM,EAAE,IAAI;AAE9D,MAAM,gBAAgB,CAAC,EAAE,YAAY,EAAE,EAA0B,iBAC/D,6LAAC;QACC,WAAW,CAAC,yKAAyK,EAAE,WAAW;;;;;;KAFhM;AAMN,MAAM,mBAAmB,kBACvB,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAc,WAAU;;;;;;kCACzB,6LAAC;wBAAc,WAAU;;;;;;kCACzB,6LAAC;wBAAc,WAAU;;;;;;;;;;;;0BAE3B,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAc,WAAU;;;;;;kCACzB,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAc,WAAU;;;;;;0CACzB,6LAAC;gCAAc,WAAU;;;;;;0CACzB,6LAAC;gCAAc,WAAU;;;;;;;;;;;;;;;;;;0BAG7B,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAc,WAAU;;;;;;kCACzB,6LAAC;wBAAc,WAAU;;;;;;kCACzB,6LAAC;wBAAc,WAAU;;;;;;;;;;;;;;;;;;MAlBzB;AAuBN,MAAM,sBAAsB,CAAC;IAC3B,MAAM,IAAI,IAAI,KAAK;IACnB,IAAI,OAAO,KAAK,CAAC,EAAE,OAAO,KAAK,OAAO;IACtC,MAAM,SAAS,EAAE,iBAAiB;IAClC,MAAM,QAAQ,IAAI,KAAK,EAAE,OAAO,KAAK,SAAS;IAC9C,OAAO,MAAM,WAAW,GAAG,KAAK,CAAC,GAAG;AACtC;AAEA,MAAM,cAAc,CAAC,OAAsB;IACzC,MAAM,IAAI,IAAI,KAAK;IACnB,IAAI,OAAO,KAAK,CAAC,EAAE,OAAO,KAAK,OAAO;IACtC,IAAI;QACF,OAAO,IAAI,KAAK,cAAc,CAAC,SAAS;YACtC;YACA,KAAK;YACL,OAAO;YACP,MAAM;YACN,QAAQ;QACV,GAAG,MAAM,CAAC;IACZ,EAAE,OAAM;QACN,OAAO,EAAE,cAAc,CAAC;IAC1B;AACF;AAeA,MAAM,eAAe,CAAC,EACpB,MAAM,EACN,cAAc,EACd,OAAO,EACP,QAAQ,EACR,QAAQ,EACR,MAAM,EACN,YAAY,EAAE,EACd,WAAW,EACX,WAAW,EAWZ;IACC,IAAI,CAAC,UAAU;QACb,qBAAO,6LAAC;YAAE,WAAU;sBAA4B;;;;;;IAClD;IACA,MAAM,YAAY,KAAK,UAAU;IACjC,MAAM,YAAY,KAAK,KAAK,KAAK;IACjC,MAAM,WAAW,IAAI,KAAK;IAC1B,SAAS,QAAQ,CAAC,GAAG,GAAG,GAAG;IAC3B,MAAM,SAAS,IAAI,KAAK,SAAS,OAAO,KAAK;IAE7C,MAAM,SAAS,CAAC;QACd,MAAM,IAAI,IAAI,KAAK;QACnB,OAAO,OAAO,KAAK,CAAC,EAAE,OAAO,MAAM,OAAO;IAC5C;IAEA,MAAM,QAAwB,EAAE;IAChC,MAAM,YAAY,UAAU,MAAM,CAChC,CAAC,KAAK;QACJ,GAAG,CAAC,KAAK,GAAG,CAAC,GAAG;YAAE,GAAG,IAAI;YAAE,OAAO,EAAE;QAAC;QACrC,OAAO;IACT,GACA,CAAC;IAGH,KAAK,MAAM,KAAK,OAAQ;QACtB,MAAM,IAAI,OAAO,EAAE,OAAO;QAC1B,MAAM,IAAI,OAAO,EAAE,KAAK;QACxB,IAAI,CAAC,KAAK,CAAC,GAAG;QACd,MAAM,UAAU,EAAE,OAAO,GAAG,CAAC,MAAM,EAAE,EAAE,OAAO,EAAE,GAAG;QACnD,MAAM,YAAY,EAAE,SAAS,IAAI,CAAC,EAAE,OAAO,GAAG,CAAC,MAAM,EAAE,EAAE,OAAO,EAAE,GAAG,OAAO;QAC5E,MAAM,IAAI,CAAC;YACT,IAAI,CAAC,MAAM,EAAE,EAAE,EAAE,EAAE;YACnB,MAAM;YACN,OAAO,EAAE,KAAK,IAAI;YAClB,OAAO;YACP,KAAK;YACL;YACA;YACA,SAAS,EAAE,OAAO,IAAI;YACtB,SAAS,EAAE,SAAS;YACpB,OAAO;QACT;IACF;IACA,KAAK,MAAM,MAAM,eAAgB;QAC/B,MAAM,IAAI,OAAO,GAAG,OAAO;QAC3B,MAAM,IAAI,OAAO,GAAG,KAAK;QACzB,IAAI,CAAC,KAAK,CAAC,GAAG;QACd,MAAM,UAAU;QAChB,MAAM,YAAY;QAClB,MAAM,IAAI,CAAC;YACT,IAAI,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE;YACjB,MAAM;YACN,OAAO,GAAG,UAAU,IAAI,GAAG,WAAW,IAAI;YAC1C,OAAO;YACP,KAAK;YACL;YACA;YACA,SAAS,GAAG,SAAS;YACrB,OAAO;QACT;IACF;IACA,KAAK,MAAM,KAAK,QAAS;QACvB,MAAM,IAAI,OAAO,EAAE,SAAS,IAAI,EAAE,cAAc;QAChD,IAAI,CAAC,GAAG;QACR,MAAM,aAAa,OAAO,EAAE,YAAY;QACxC,MAAM,kBAAkB,OAAO,QAAQ,CAAC,EAAE,sBAAsB,IAAI,EAAE,sBAAsB,GAAG;QAC/F,MAAM,IAAI,cAAc,IAAI,KAAK,EAAE,OAAO,KAAK,CAAC,mBAAmB,EAAE,IAAI,KAAK,OAAO,8BAA8B;QACnH,MAAM,UAAU,EAAE,OAAO,GAAG,CAAC,MAAM,EAAE,EAAE,OAAO,EAAE,GAAG,EAAE,SAAS,GAAG,CAAC,WAAW,EAAE,EAAE,SAAS,EAAE,GAAG,EAAE,WAAW,GAAG,CAAC,UAAU,EAAE,EAAE,WAAW,EAAE,GAAG;QAC9I,MAAM,YAAY,EAAE,SAAS,IAAI,CAAC,EAAE,WAAW,GAAG,CAAC,MAAM,EAAE,EAAE,WAAW,EAAE,GAAG,EAAE,OAAO,GAAG,CAAC,MAAM,EAAE,EAAE,OAAO,EAAE,GAAG,OAAO;QACvH,MAAM,IAAI,CAAC;YACT,IAAI,CAAC,MAAM,EAAE,EAAE,EAAE,EAAE;YACnB,MAAM;YACN,OAAO,CAAC,MAAM,EAAE,EAAE,EAAE,EAAE;YACtB,OAAO;YACP,KAAK;YACL;YACA;YACA,SAAS,EAAE,OAAO,IAAI;YACtB,SAAS,EAAE,SAAS;YACpB,OAAO;QACT;IACF;IAEA,MAAM,UAAU,MAAM,MAAM,CAAiG,CAAC,KAAK;QACjI,MAAM,WAAW,GAAG,CAAC,KAAK,OAAO,CAAC,IAAI,SAAS,CAAC,KAAK,OAAO,CAAC;QAC7D,IAAI,CAAC,UAAU;YACb,GAAG,CAAC,KAAK,OAAO,CAAC,GAAG;gBAAE,KAAK,KAAK,OAAO;gBAAE,OAAO,KAAK,SAAS;gBAAE,SAAS,KAAK,OAAO;gBAAE,OAAO;oBAAC;iBAAK;YAAC;QACvG,OAAO;YACL,GAAG,CAAC,KAAK,OAAO,CAAC,GAAG;gBAAE,GAAG,QAAQ;gBAAE,OAAO;uBAAK,SAAS,KAAK,IAAI,EAAE;oBAAG;iBAAK;YAAC;QAC9E;QACA,OAAO;IACT,GAAG;IAEH,MAAM,QAAQ,OAAO,MAAM,CAAC,SAAS,GAAG,CAAC,CAAC,OAAS,CAAC;YAClD,OAAO,KAAK,KAAK;YACjB,SAAS,KAAK,OAAO;YACrB,KAAK,KAAK,GAAG;YACb,OAAO,CAAC,KAAK,KAAK,IAAI,EAAE,EAAE,IAAI,CAAC,CAAC,GAAG,IAAM,EAAE,KAAK,CAAC,OAAO,KAAK,EAAE,KAAK,CAAC,OAAO;QAC9E,CAAC;IAED,MAAM,eAAe,CAAC,QAAkB,KAAK,GAAG,CAAC,KAAK,KAAK,GAAG,CAAC,GAAG;IAClE,MAAM,aAAa,CAAC;QAClB,MAAM,UAAU,KAAK,UAAU;QAC/B,MAAM,UAAU,KAAK,KAAK,CAAC,UAAU,eAAe;QACpD,KAAK,UAAU,CAAC,SAAS,GAAG;QAC5B,OAAO;IACT;IAEA,MAAM,aAAa,CAAC,IAClB,IAAI,KAAK,cAAc,CAAC,SAAS;YAAE,MAAM;YAAW,QAAQ;YAAW,UAAU;QAAS,GAAG,MAAM,CAAC;IAEtG,qBACE,6LAAC;QAAI,WAAU;;YACZ,MAAM,MAAM,KAAK,mBAAK,6LAAC;gBAAE,WAAU;0BAA4B;;;;;;YAC/D,MAAM,GAAG,CAAC,CAAC,qBACV,6LAAC;oBAEC,WAAU;oBACV,YAAY,CAAC,IAAM,EAAE,cAAc;oBACnC,QAAQ,CAAC;wBACP,IAAI,CAAC,QAAQ;wBACb,EAAE,cAAc;wBAChB,MAAM,UAAU,EAAE,YAAY,CAAC,OAAO,CAAC;wBACvC,IAAI;4BACI,MAAM,SAAS,KAAK,KAAK,CAAC;4BAC1B,MAAM,WAAW,OAAO,UAAU,IAAI;4BACtC,MAAM,OAAQ,EAAE,aAAa,CAAC,aAAa,CAAC,mBAAmC;4BAC/E,IAAI,CAAC,MAAM;4BACX,MAAM,OAAO,CAAC,EAAE,OAAO,GAAG,KAAK,IAAI,IAAI,KAAK,KAAK;4BACvD,MAAM,WAAW,WAAW,IAAI,KAAK,SAAS,OAAO,KAAK,OAAO,CAAC,OAAO,OAAO,KAAK,SAAS,OAAO,EAAE;4BACvG,MAAM,SAAS,IAAI,KAAK,SAAS,OAAO,KAAK;4BAC7C,OAAO;gCACL,IAAI,OAAO,EAAE;gCACb,MAAM,OAAO,IAAI;gCACjB,OAAO;gCACP,KAAK;gCACL,SAAS,KAAK,OAAO;4BACvB;wBACF,EAAE,OAAM;wBACN,SAAS;wBACX;oBACF;;sCAEA,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAK,WAAU;8CAAiB,KAAK,KAAK;;;;;;8CAC3C,6LAAC;oCAAK,WAAU;8CAAgB;;;;;;;;;;;;sCAElC,6LAAC;4BAAI,WAAU;sCACZ,KAAK,KAAK,CAAC,GAAG,CAAC,CAAC;gCACf,MAAM,OACJ,aAAa,AAAC,CAAC,KAAK,KAAK,CAAC,OAAO,KAAK,SAAS,OAAO,EAAE,IAAI,CAAC,OAAO,OAAO,KAAK,SAAS,OAAO,EAAE,IAAK;gCACzG,MAAM,QACJ,aAAa,AAAC,CAAC,KAAK,GAAG,CAAC,OAAO,KAAK,KAAK,KAAK,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,OAAO,KAAK,SAAS,OAAO,EAAE,IAAK;gCAC3G,qBACE,6LAAC;oCAEC,WAAW,CAAC,8EAA8E,EAAE,KAAK,KAAK,CAAC,kBAAkB,EACvH,KAAK,KAAK,CAAC,MAAM,GAAG,KAAK,KAAK,KAAK,CAAC,IAAI,CAAC,CAAC,QAAU,UAAU,QAAQ,MAAM,OAAO,KAAK,KAAK,OAAO,IAAI,SAAS,MAAM,UACnH,2BACA,GACL,CAAC,EAAE,YAAY,GAAG,CAAC,KAAK,EAAE,GAAG,SAAS,gEAAgE,IAAI;oCAC3G,OAAO;wCAAE,MAAM,GAAG,KAAK,CAAC,CAAC;wCAAE,OAAO,GAAG,KAAK,GAAG,CAAC,OAAO,GAAG,CAAC,CAAC;oCAAC;oCAC3D,OAAO,GAAG,KAAK,KAAK,CAAC,GAAG,EAAE,WAAW,KAAK,KAAK,EAAE,GAAG,EAAE,WAAW,KAAK,GAAG,GAAG;oCAC5E,SAAS;oCACT,aAAa,CAAC;wCACV,EAAE,YAAY,CAAC,OAAO,CACpB,oBACA,KAAK,SAAS,CAAC;4CACb,IAAI,KAAK,EAAE;4CACX,MAAM,KAAK,IAAI;4CACf,YAAY,KAAK,GAAG,CAAC,OAAO,KAAK,KAAK,KAAK,CAAC,OAAO;4CACnD,SAAS,KAAK,OAAO;wCACvB;oCAEN;oCACA,YAAY,CAAC,IAAM,EAAE,cAAc;oCACnC,QAAQ,CAAC;wCACP,IAAI,CAAC,QAAQ;wCACb,EAAE,cAAc;wCAChB,MAAM,UAAU,EAAE,YAAY,CAAC,OAAO,CAAC;wCACvC,IAAI;4CACF,MAAM,SAAS,KAAK,KAAK,CAAC;4CAC1B,IAAI,OAAO,EAAE,KAAK,KAAK,EAAE,EAAE;4CAC3B,qDAAqD;4CACrD,MAAM,OAAO,AAAC,EAAE,aAAa,CAAC,aAAa,CAAiB,qBAAqB;4CACjF,MAAM,OAAO,CAAC,EAAE,OAAO,GAAG,KAAK,IAAI,IAAI,KAAK,KAAK;4CACjD,MAAM,WAAW,WAAW,IAAI,KAAK,SAAS,OAAO,KAAK,OAAO,CAAC,OAAO,OAAO,KAAK,SAAS,OAAO,EAAE;4CACvG,MAAM,WAAW,KAAK,GAAG,CAAC,OAAO,KAAK,KAAK,KAAK,CAAC,OAAO;4CACxD,MAAM,SAAS,IAAI,KAAK,SAAS,OAAO,KAAK;4CAC7C,OAAO;gDACL,IAAI,KAAK,EAAE;gDACX,MAAM,KAAK,IAAI;gDACb,OAAO;gDACP,KAAK;gDACL,SAAS,KAAK,OAAO;4CACvB;wCACF,EAAE,OAAM;wCACN,SAAS;wCACX;oCACF;;sDAEA,6LAAC;4CAAE,WAAU;sDAA+B,KAAK,KAAK;;;;;;sDACtD,6LAAC;4CAAE,WAAU;;gDAAiB,WAAW,KAAK,KAAK;gDAAE;gDAAI,WAAW,KAAK,GAAG;;;;;;;;mCA/CzE,KAAK,EAAE;;;;;4BAkDhB;;;;;;sCAEF,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;8CAAK;;;;;;8CACN,6LAAC;8CAAK;;;;;;8CACN,6LAAC;8CAAK;;;;;;;;;;;;;mBA9FH,KAAK,GAAG,IAAI,KAAK,KAAK;;;;;;;;;;;AAoGrC;MA5OM;AA8ON,MAAM,gBAAgB,CAAC;IACrB,MAAM,OACJ,MACG,SAAS,CAAC,OACV,OAAO,CAAC,oBAAoB,IAC5B,WAAW,GACX,OAAO,CAAC,eAAe,KACvB,OAAO,CAAC,YAAY,OAAO;IAChC,OAAO;AACT;AAEA,MAAM,sBAAsB,CAAC,OAAe,QAAQ,EAAE;IACpD,MAAM,OAAO,cAAc,SAAS;IACpC,MAAM,OAAiB,EAAE;IACzB,IAAK,IAAI,IAAI,GAAG,IAAI,OAAO,KAAK,EAAG;QACjC,KAAK,IAAI,CAAC,MAAM,IAAI,OAAO,GAAG,OAAO,GAAG;IAC1C;IACA,OAAO;AACT;AAEA,MAAM,qBAAqB,OAAO;IAChC,IAAI;QACF,MAAM,MAAM,MAAM,MAAM,CAAC,iBAAiB,EAAE,OAAO,OAAO,CAAC;QAC3D,MAAM,OAAO,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,IAAM;QAC1C,IAAI,IAAI,EAAE,IAAI,MAAM,OAAO,CAAC,MAAM,QAAQ;YACxC,OAAO,KAAK,KAAK;QACnB;IACF,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC,oCAAoC;IACpD;IACA,OAAO,EAAE;AACX;AAEe,SAAS,eAAe,EAAE,WAAW,EAAE,gBAAgB,EAAE,YAAY,EAAE,cAAc,EAAS;;IAC3G,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,eAAe,IAAA,wJAAe;IACpC,MAAM,oBAAoB,cAAc,IAAI,YAAY;IACxD,MAAM,eAAe,cAAc,IAAI,cAAc;IACrD,MAAM,UAAU,gBAAgB,OAAO,QAAQ,CAAC,OAAO,iBAAiB,OAAO,gBAAgB;IAC/F,MAAM,aAAa,WAAW,QAAQ,CAAC,qBAClC,oBACD;IAEJ,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAA8B;IACxE,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAC;IACjD,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAc;IAChD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAW;IACjD,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAC;IACrC,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,yKAAQ,EAAiB;IACnE,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,yKAAQ,EAAiB;IACrE,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,yKAAQ,EAAgB;IAClE,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,yKAAQ,EAAgB;IACtE,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,yKAAQ,EAAgB;IACtE,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAS;IACvD,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAQlC;IACV,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;QACzC,OAAO;QACP,KAAK;QACL,OAAO;QACP,MAAM;IACR;IACA,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,yKAAQ,EAAgB;IACpE,MAAM,CAAC,qBAAqB,uBAAuB,GAAG,IAAA,yKAAQ,EAAgB;IAC9E,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,yKAAQ,EAAC;QACvD,OAAO;QACP,KAAK;QACL,YAAY;QACZ,aAAa;QACb,MAAM;IACR;IACA,MAAM,CAAC,uBAAuB,yBAAyB,GAAG,IAAA,yKAAQ,EAAgB;IAClF,MAAM,CAAC,4BAA4B,8BAA8B,GAAG,IAAA,yKAAQ,EAAgB;IAC5F,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,yKAAQ,EAAC;IAErD,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;IACzC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAgB;IAC1D,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,yKAAQ,EAAC;IACnD,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAC;IAC7C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAgB;IAC1D,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAgB;IAE9D,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAgB,YAAY,CAAC,EAAE,EAAE,MAAM;IACvF,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAmB,EAAE;IACzD,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAmB,EAAE;IACvD,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,yKAAQ,EAAC;IAEnD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAC3C,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAgB;IAChE,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAgB;IAC5D,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAC;IAC/C,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAwD;IAEtG,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAC3C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAA0B;IACpE,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAC;IAC/C,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAgB;IAChE,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAgB;IAC5D,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,yKAAQ,EAAgB;IAC1E,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,yKAAQ,EAAgB;IACtE,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAkD;IAC9F,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,yKAAQ,EAAmB;IAC3E,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,yKAAQ,EAAwB;IAElF,MAAM,EAAE,MAAM,cAAc,EAAE,GAAG,IAAA,4KAAM,EACrC,cAAc,CAAC,mDAAmD,EAAE,aAAa,GAAG,MACpF,SACA;QAAE,mBAAmB;IAAM;IAE7B,MAAM,EAAE,MAAM,YAAY,EAAE,WAAW,iBAAiB,EAAE,QAAQ,cAAc,EAAE,GAAG,IAAA,4KAAM,EACzF,UAAU,CAAC,4BAA4B,EAAE,SAAS,GAAG,MACrD,SACA;QAAE,mBAAmB;IAAM;IAG7B,IAAA,0KAAS;oCAAC;YACR,IAAI,qBAAqB,WAAW,QAAQ,CAAC,sBAA6B,sBAAsB,WAAW;gBACzG,aAAa;gBACb,gBAAgB;YAClB;QACF;mCAAG;QAAC;QAAmB;KAAU;IAEjC,IAAA,0KAAS;oCAAC;YACR,MAAM,QAAQ,eAAe;4CAAW,IAAM,gBAAgB;2CAAQ,OAAO;YAC7E;4CAAO;oBACL,IAAI,OAAO,aAAa;gBAC1B;;QACF;mCAAG;QAAC;KAAa;IAEjB,MAAM,kBAAkB,CAAC;QACvB,gBAAgB;QAChB,aAAa;QACb,MAAM,SAAS,IAAI,gBAAgB,cAAc,cAAc;QAC/D,OAAO,GAAG,CAAC,OAAO;QAClB,OAAO,GAAG,CAAC,WAAW;QACtB,OAAO,GAAG,CAAC,SAAS;QACpB,OAAO,OAAO,CAAC,CAAC,aAAa,EAAE,OAAO,QAAQ,IAAI,EAAE;YAAE,QAAQ;QAAM;QACpE,cAAc;IAChB;IAEA,MAAM,gBAAgB,IAAA,wKAAO;iDAAC,IAAM,MAAM,IAAI;yDAAC,CAAC,IAAM,EAAE,QAAQ;;gDAAG;QAAC;KAAM;IAC1E,MAAM,cAAc,IAAA,wKAAO;+CAAC;YAC1B,OAAO;mBAAI;aAAM,CAAC,IAAI;uDAAC,CAAC,GAAG;oBACzB,IAAI,EAAE,QAAQ,KAAK,EAAE,QAAQ,EAAE,OAAO,EAAE,QAAQ,GAAG,CAAC,IAAI;oBACxD,OAAO,IAAI,KAAK,EAAE,SAAS,EAAE,OAAO,KAAK,IAAI,KAAK,EAAE,SAAS,EAAE,OAAO;gBACxE;;QACF;8CAAG;QAAC;KAAM;IAEV,MAAM,eAAe,IAAA,wKAAO;gDAAC,IAAM,MAAM,IAAI;wDAAC,CAAC,IAAM,EAAE,EAAE,KAAK;0DAAiB;+CAAM;QAAC;QAAO;KAAa;IAE1G,MAAM,kBAAkB,IAAA,wKAAO;mDAAC;YAC9B,MAAM,OAAO,OAAO,IAAI,GAAG,WAAW;YACtC,IAAI,CAAC,MAAM,OAAO;YAClB,OAAO,QAAQ,MAAM;2DAAC,CAAC,IAAM,EAAE,QAAQ,CAAC,WAAW,GAAG,QAAQ,CAAC,SAAS,CAAC,EAAE,KAAK,IAAI,EAAE,EAAE,WAAW,GAAG,QAAQ,CAAC;;QACjH;kDAAG;QAAC;QAAS;KAAO;IAEpB,MAAM,oBAAoB,IAAA,wKAAO;qDAAC,IAAM,OAAO,MAAM;6DAAC,CAAC,IAAM,EAAE,QAAQ;4DAAE,MAAM;oDAAE;QAAC;KAAO;IACzF,MAAM,eAAe,IAAA,wKAAO;gDAAC;YAC3B,MAAM,OAAO,gBAAgB,SAAS,EAAE;YACxC,MAAM,OAAO,YAAY,IAAI,GAAG,WAAW;YAC3C,MAAM,WAAW,OACb,KAAK,MAAM;wDACT,CAAC,IACC,CAAC,EAAE,QAAQ,IAAI,EAAE,EAAE,WAAW,GAAG,QAAQ,CAAC,SAC1C,CAAC,EAAE,KAAK,IAAI,EAAE,EAAE,WAAW,GAAG,QAAQ,CAAC,SACvC,CAAC,EAAE,QAAQ,IAAI,EAAE,EAAE,WAAW,GAAG,QAAQ,CAAC;yDAE9C;YACJ,OAAO;QACT;+CAAG;QAAC,gBAAgB;QAAO;KAAY;IACvC,MAAM,sBAAsB,IAAA,wKAAO;uDAAC,IAAM,MAAM,MAAM;+DAAC,CAAC,IAAM,EAAE,eAAe;8DAAE,MAAM;sDAAE;QAAC;KAAM;IAChG,qDAAqD;IACrD,MAAM,iBAAiB,CAAC,OACtB,KAAK,GAAG,CAAC,CAAC,GAAG,MAAQ,CAAC;gBAAE,GAAG,CAAC;gBAAE,cAAc,MAAM;YAAE,CAAC;IAEvD,MAAM,qBAAqB,CAAC,OAA2B,KAAK,MAAM,CAAC,CAAC,IAAM,EAAE,QAAQ,EAAE,MAAM;IAE5F,MAAM,wBAAwB,CAAC,QAAgB;QAC7C,MAAM,cAAc,mBAAmB;QACvC,SAAS,CAAC,OAAS,KAAK,GAAG,CAAC,CAAC,IAAO,EAAE,EAAE,KAAK,SAAS;oBAAE,GAAG,CAAC;oBAAE,aAAa;gBAAY,IAAI;QAC3F,OAAO;IACT;IAEA,MAAM,sBAAsB,OAAO;QACjC,IAAI,CAAC,SAAS,MAAM,EAAE;QACtB,IAAI;YACF,MAAM,UAAU,MAAM,QAAQ,GAAG,CAC/B,SAAS,GAAG,CAAC,OAAO;gBAClB,MAAM,SAAS,MAAM,mBAAmB,KAAK,EAAE;gBAC/C,OAAO;oBAAE,IAAI,KAAK,EAAE;oBAAE,OAAO,mBAAmB;gBAAQ;YAC1D;YAEF,SAAS,CAAC,OACR,KAAK,GAAG,CAAC,CAAC;oBACR,MAAM,QAAQ,QAAQ,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,KAAK,EAAE;oBAClD,OAAO,QAAQ;wBAAE,GAAG,IAAI;wBAAE,aAAa,MAAM,KAAK;oBAAC,IAAI;gBACzD;QAEJ,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,qCAAqC;QACrD;IACF;IAEA,MAAM,sBAAsB,OAAO,QAAgB,SAAiB,aAAa,CAAC;QAChF,MAAM,UAA4B,EAAE;QACpC,IAAK,IAAI,IAAI,GAAG,IAAI,SAAS,KAAK,EAAG;YACnC,MAAM,MAAM,aAAa;YACzB,IAAI;gBACF,MAAM,MAAM,MAAM,MAAM,CAAC,iBAAiB,EAAE,OAAO,OAAO,CAAC,EAAE;oBAC3D,QAAQ;oBACR,SAAS;wBAAE,gBAAgB;oBAAmB;oBAC9C,MAAM,KAAK,SAAS,CAAC;wBACnB,MAAM,CAAC,MAAM,EAAE,KAAK;wBACpB,aAAa;wBACb,QAAQ;wBACR,UAAU;wBACV,cAAc;wBACd,SAAS;oBACX;gBACF;gBACA,MAAM,OAAO,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,IAAM;gBAC1C,IAAI,IAAI,EAAE,IAAI,MAAM,OAAO;oBACzB,QAAQ,IAAI,CAAC,KAAK,KAAK;gBACzB;YACF,EAAE,OAAO,KAAK;gBACZ,QAAQ,KAAK,CAAC,oCAAoC;YACpD;QACF;QACA,OAAO,eAAe;IACxB;IAEA,IAAA,0KAAS;oCAAC;YACR,IAAI,CAAC,cAAc;gBACjB,UAAU,EAAE;gBACZ,SAAS,EAAE;gBACX;YACF;YACA,mBAAmB;QAErB;mCAAG;QAAC;KAAa;IAEjB,IAAA,0KAAS;oCAAC;YACR,SAAS;QACX;mCAAG;QAAC;KAAa;IAEjB,IAAA,0KAAS;oCAAC;YACR,WAAW;QACb;mCAAG;QAAC;KAAe;IAEnB,IAAA,0KAAS;oCAAC;YACR,IAAI,cAAc;YAClB,IAAI,MAAM,MAAM,KAAK,GAAG;YACxB,MAAM,YAAY,MAAM,IAAI;4CAAC,CAAC,IAAM,EAAE,QAAQ;8CAAK,KAAK,CAAC,EAAE;YAC3D,gBAAgB,UAAU,EAAE;QAC9B;mCAAG;QAAC;QAAO;KAAa;IAExB,IAAA,0KAAS;oCAAC;YACR,IAAI,aAAa,MAAM,EAAE;gBACvB,oBAAoB;YACtB;QACF;mCAAG,EAAE;IAEL,MAAM,oBAAoB,OAAO;QAC/B,IAAI,CAAC,cAAc;QACnB,MAAM,UAAU,eAAe;QAC/B,MAAM,UAAU,QAAQ,GAAG,CAAC,CAAC,IAC3B,MAAM,CAAC,iBAAiB,EAAE,aAAa,EAAE,CAAC,OAAO,CAAC,EAAE;gBAClD,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE,GAAG,CAAC;oBAAE,MAAM,EAAE,IAAI;oBAAE,aAAa,EAAE,WAAW,IAAI;oBAAI,SAAS;gBAAK;YAC7F,GAAG,KAAK,CAAC,CAAC;gBACR,QAAQ,KAAK,CAAC,gCAAgC;gBAC9C,OAAO;YACT;QAEF,MAAM,QAAQ,GAAG,CAAC;IACpB;IAEA,MAAM,gBAAgB,CAAC;QACrB,IAAI,CAAC,mBAAmB,oBAAoB,UAAU,OAAO;QAC7D,MAAM,UAAU;eAAI;SAAO;QAC3B,MAAM,OAAO,QAAQ,SAAS,CAAC,CAAC,KAAO,GAAG,EAAE,KAAK;QACjD,MAAM,KAAK,QAAQ,SAAS,CAAC,CAAC,KAAO,GAAG,EAAE,KAAK;QAC/C,IAAI,SAAS,CAAC,KAAK,OAAO,CAAC,GAAG,OAAO;QACrC,MAAM,CAAC,MAAM,GAAG,QAAQ,MAAM,CAAC,MAAM;QACrC,QAAQ,MAAM,CAAC,IAAI,GAAG;QACtB,MAAM,aAAa,eAAe;QAClC,UAAU;QACV,OAAO;IACT;IAEA,IAAA,0KAAS;oCAAC;YACR,IAAI,UAAU,EAAE,EAAE;YAClB,MAAM,YAAY,KAAK,GAAG,CAAC,GAAG,oBAAoB;YAClD,IAAI,UAAU,YAAY,KAAK,WAAW;gBACxC;gDAAa,CAAC,OAAS,CAAC;4BAAE,GAAG,IAAI;4BAAE,cAAc;wBAAU,CAAC;;YAC9D;QACF;mCAAG;QAAC;QAAmB,UAAU,EAAE;KAAC;IAEpC,MAAM,mBAAmB;QACvB,YAAY;QACZ,aAAa;QACb,eAAe;QACf,aAAa;QACb,iBAAiB;IACnB;IAEA,MAAM,oBAAoB,CAAC;QACzB,YAAY;YACV,IAAI,KAAK,EAAE;YACX,MAAM,KAAK,IAAI;YACf,MAAM,KAAK,IAAI,IAAI;YACnB,SAAS,KAAK,OAAO,IAAI;YACzB,aAAa,KAAK,WAAW,GAAG,OAAO,KAAK,WAAW,IAAI;YAC3D,UAAU,KAAK,QAAQ;YACvB,MAAM,KAAK,IAAI,IAAI;YACnB,WAAW,QAAQ,KAAK,SAAS;QACnC;QACA,aAAa;QACb,eAAe;QACf,aAAa;QACb,iBAAiB;IACnB;IAEA,MAAM,qBAAqB,OAAO;QAChC,iBAAiB;QACjB,gBAAgB;QAChB,cAAc;QACd,gBAAgB;QAChB,cAAc;QACd,IAAI;YACF,MAAM,CAAC,WAAW,SAAS,GAAG,MAAM,QAAQ,GAAG,CAAC;gBAC9C,MAAM,CAAC,iBAAiB,EAAE,OAAO,OAAO,CAAC;gBACzC,MAAM,CAAC,iBAAiB,EAAE,OAAO,MAAM,CAAC;aACzC;YACD,MAAM,aAAa,MAAM,UAAU,IAAI,GAAG,KAAK,CAAC,IAAM;YACtD,MAAM,YAAY,MAAM,SAAS,IAAI,GAAG,KAAK,CAAC,IAAM;YACpD,IAAI,UAAU,EAAE,IAAI,MAAM,OAAO,CAAC,YAAY,QAAQ;gBACpD,MAAM,OAAO,eAAe,WAAW,KAAK;gBAC5C,UAAU;gBACV,sBAAsB,QAAQ;YAChC,OAAO,cAAc,YAAY,SAAS;YAC1C,IAAI,SAAS,EAAE,IAAI,MAAM,OAAO,CAAC,WAAW,QAAQ,SAAS,UAAU,KAAK;iBACvE,cAAc,WAAW,SAAS;QACzC,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,mCAAmC;YACjD,cAAc;YACd,cAAc;QAChB,SAAU;YACR,iBAAiB;QACnB;IACF;IAEA,MAAM,mBAAmB;QACvB,aAAa;QACb,aAAa;QACb,eAAe;QACf,IAAI,CAAC,SAAS,IAAI,CAAC,IAAI,IAAI;YACzB,aAAa;YACb;QACF;QACA,IAAI,CAAC,SAAS,OAAO,CAAC,IAAI,IAAI;YAC5B,aAAa;YACb;QACF;QACA,MAAM,YAAY,OAAO,SAAS,WAAW;QAC7C,MAAM,cAAc,OAAO,QAAQ,CAAC,aAAa,KAAK,GAAG,CAAC,MAAM,KAAK,GAAG,CAAC,GAAG,KAAK,KAAK,CAAC,eAAe;QACtG,cAAc;QACd,MAAM,iBAAiB,oBAAoB,SAAS,IAAI,IAAI,SAAS,IAAI,EAAE;QAC3E,IAAI,YAA8B;QAClC,IAAI,YAA2B;QAC/B,IAAI;YACF,KAAK,MAAM,aAAa,eAAgB;gBACtC,MAAM,MAAM,MAAM,MAAM,oBAAoB;oBAC1C,QAAQ;oBACR,SAAS;wBAAE,gBAAgB;oBAAmB;oBAC9C,MAAM,KAAK,SAAS,CAAC;wBACnB,IAAI,SAAS,EAAE;wBACf;wBACA,MAAM,SAAS,IAAI,CAAC,IAAI;wBACxB,MAAM,SAAS,IAAI,CAAC,IAAI;wBACxB,SAAS,SAAS,OAAO,CAAC,IAAI;wBAC9B;wBACA,UAAU,SAAS,QAAQ;wBAC3B,MAAM;wBACN,WAAW,SAAS,SAAS;oBAC/B;gBACF;gBACA,MAAM,OAAO,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,IAAM;gBAC1C,IAAI,IAAI,EAAE,IAAI,MAAM,MAAM;oBACxB,YAAY,KAAK,IAAI;oBACrB;gBACF;gBACA,MAAM,SAAS,MAAM,SAAS;gBAC9B,YAAY;gBACZ,MAAM,QAAQ,OAAO,WAAW;gBAChC,IAAI,MAAM,QAAQ,CAAC,WAAW,MAAM,QAAQ,CAAC,gBAAgB,MAAM,QAAQ,CAAC,WAAW;oBACrF;gBACF,OAAO;oBACL;gBACF;YACF;YACA,IAAI,CAAC,WAAW;gBACd,aAAa,aAAa;gBAC1B,aAAa,aAAa;gBAC1B;YACF;YACA,MAAM,OAAO;YACb,SAAS,CAAC;gBACR,MAAM,WAAW,KAAK,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,KAAK,EAAE;gBAClD,IAAI,UAAU,OAAO,KAAK,GAAG,CAAC,CAAC,IAAO,EAAE,EAAE,KAAK,KAAK,EAAE,GAAG,OAAO;gBAChE,OAAO;oBAAC;uBAAS;iBAAK;YACxB;YACA,eAAe,SAAS,EAAE,GAAG,sBAAsB;YACnD,iBAAiB;YACjB,YAAY;gBAAE,GAAG,YAAY;gBAAE,aAAa,OAAO;YAAa;YAChE,gBAAgB,KAAK,EAAE;YACvB,IAAA,iIAAU,EAAC,SAAS,EAAE,GAAG,uBAAuB,sBAAsB;gBAAE,QAAQ,KAAK,EAAE;YAAC;YAExF,MAAM,eAAe,MAAM,mBAAmB,KAAK,EAAE;YACrD,MAAM,gBAAgB,aAAa,MAAM;YACzC,IAAI,cAAc,eAAe;gBAC/B,MAAM,UAAU,cAAc;gBAC9B,MAAM,gBAAgB,MAAM,oBAAoB,KAAK,EAAE,EAAE,SAAS,gBAAgB;gBAClF,MAAM,SAAS,eAAe;uBAAI;uBAAiB;iBAAc;gBACjE,IAAI,KAAK,EAAE,KAAK,cAAc,IAAI,UAAU;gBAC5C,gBAAgB,CAAC,QAAQ,EAAE,cAAc,MAAM,CAAC,oBAAoB,CAAC;gBACrE,MAAM,cAAc,sBAAsB,KAAK,EAAE,EAAE;gBACnD,IAAI,KAAK,EAAE,KAAK,cAAc,IAAI;oBAChC,SAAS,CAAC,OAAS,KAAK,GAAG,CAAC,CAAC,IAAO,EAAE,EAAE,KAAK,KAAK,EAAE,GAAG;gCAAE,GAAG,CAAC;gCAAE,aAAa;4BAAY,IAAI;gBAC9F;YACF,OAAO;gBACL,MAAM,aAAa,eAAe;gBAClC,MAAM,cAAc,sBAAsB,KAAK,EAAE,EAAE;gBACnD,IAAI,KAAK,EAAE,KAAK,cAAc,MAAM,gBAAgB,GAAG,UAAU;gBACjE,IAAI,KAAK,EAAE,KAAK,cAAc,IAAI;oBAChC,SAAS,CAAC,OAAS,KAAK,GAAG,CAAC,CAAC,IAAO,EAAE,EAAE,KAAK,KAAK,EAAE,GAAG;gCAAE,GAAG,CAAC;gCAAE,aAAa;4BAAY,IAAI;gBAC9F;YACF;QACF,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,sBAAsB;YACpC,aAAa;QACf,SAAU;YACR,cAAc;QAChB;IACF;IAEA,MAAM,kBAAkB,OAAO;QAC7B,aAAa;QACb,eAAe;QACf,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,oBAAoB;gBAC1C,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBACnB,IAAI,KAAK,EAAE;oBACX;oBACA,MAAM,KAAK,IAAI;oBACf,MAAM,KAAK,IAAI;oBACf,SAAS,KAAK,OAAO;oBACrB,aAAa,KAAK,WAAW;oBAC7B,UAAU,KAAK,QAAQ;oBACvB,MAAM,KAAK,IAAI;oBACf,WAAW;gBACb;YACF;YACA,MAAM,OAAO,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,IAAM;YAC1C,IAAI,CAAC,IAAI,EAAE,IAAI,MAAM,OAAO,OAAO;gBACjC,aAAa,MAAM,SAAS;YAC9B,OAAO;gBACL,MAAM,QAAQ,KAAK,IAAI;gBACvB,SAAS,CAAC,OAAS,KAAK,GAAG,CAAC,CAAC,IAAM,CAAC;4BAAE,GAAG,CAAC;4BAAE,WAAW,EAAE,EAAE,KAAK,MAAM,EAAE;wBAAC,CAAC;gBAC1E,eAAe;gBACf,IAAA,iIAAU,EAAC,6BAA6B;oBAAE,QAAQ,MAAM,EAAE;gBAAC;YAC7D;QACF,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,yBAAyB;YACvC,aAAa;QACf;IACF;IAEA,MAAM,iBAAiB;QACrB,aAAa;QACb,gBAAgB;QAChB,cAAc;IAChB;IAEA,MAAM,kBAAkB,CAAC;QACvB,aAAa;YACX,IAAI,MAAM,EAAE;YACZ,MAAM,MAAM,IAAI;YAChB,aAAa,MAAM,WAAW,IAAI;YAClC,QAAQ,MAAM,MAAM;YACpB,UAAU,MAAM,QAAQ;YACxB,cAAc,MAAM,YAAY;QAClC;IACF;IAEA,MAAM,oBAAoB;QACxB,IAAI,CAAC,cAAc;QACnB,MAAM,eAAe,UAAU,IAAI,CAAC,IAAI,MAAM,CAAC,MAAM,EAAE,OAAO,MAAM,GAAG,GAAG;QAC1E,MAAM,eAAe,OAAO,QAAQ,CAAC,UAAU,YAAY,IAAI,KAAK,GAAG,CAAC,GAAG,KAAK,KAAK,CAAC,UAAU,YAAY,KAAK;QACjH,MAAM,WAAW,KAAK,GAAG,CAAC,GAAG,oBAAoB,CAAC,UAAU,EAAE,GAAG,IAAI,UAAU,QAAQ,GAAG,IAAI,CAAC;QAC/F,MAAM,kBAAkB,KAAK,GAAG,CAAC,UAAU;QAC3C,eAAe;QACf,cAAc;QACd,gBAAgB;QAChB,IAAI;YACA,MAAM,MAAM,MAAM,MAAM,CAAC,iBAAiB,EAAE,aAAa,EAAE,CAAC,OAAO,CAAC,EAAE;gBACpE,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBACnB,GAAG,SAAS;oBACd,MAAM;oBACN,aAAa,UAAU,WAAW,CAAC,IAAI;oBACvC,SAAS;oBACT,cAAc;gBAChB;YACF;YACE,MAAM,OAAO,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,IAAM;YAC1C,IAAI,CAAC,IAAI,EAAE,IAAI,MAAM,OAAO,OAAO;gBACjC,cAAc,MAAM,SAAS;YAC/B,OAAO;gBACL,MAAM,QAAQ,KAAK,KAAK;gBACxB,UAAU,CAAC;oBACT,MAAM,SAAS,KAAK,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,MAAM,EAAE;oBACjD,MAAM,UAAU,SAAS,KAAK,GAAG,CAAC,CAAC,IAAO,EAAE,EAAE,KAAK,MAAM,EAAE,GAAG,QAAQ,KAAM;2BAAI;wBAAM;qBAAM;oBAC5F,MAAM,aAAa,eAAe;oBAClC,sBAAsB,aAAa,EAAE,EAAE;oBACvC,OAAO;gBACT;gBACA,IAAA,iIAAU,EAAC,UAAU,EAAE,GAAG,wBAAwB,uBAAuB;oBACvE,QAAQ,aAAa,EAAE;oBACvB,QAAQ,MAAM,MAAM;gBACtB;gBACF,gBAAgB,UAAU,EAAE,GAAG,sBAAsB;gBACrD;YACF;QACF,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,6BAA6B;YAC3C,cAAc;QAChB,SAAU;YACR,eAAe;QACjB;IACF;IAEA,MAAM,2BAA2B;QAC/B,IAAI,CAAC,eAAe,CAAC,cAAc;QACnC,MAAM,wBAAwB,YAAY,KAAK,EAAE,YAAY,UAAU;QACvE,IAAA,iIAAU,EAAC,YAAY,UAAU,GAAG,4BAA4B,2BAA2B;YACzF,QAAQ,aAAa,EAAE;YACvB,SAAS,YAAY,KAAK,CAAC,EAAE;QAC/B;QACA,eAAe;IACjB;IAEA,MAAM,yBAAyB,OAAO,MAAiB;QACrD,aAAa;QACb,eAAe;QACf,cAAc;QACd,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,oBAAoB;gBAC1C,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBACnB,IAAI,KAAK,EAAE;oBACX;oBACA,MAAM,KAAK,IAAI;oBACf,MAAM,KAAK,IAAI;oBACf,SAAS,KAAK,OAAO;oBACrB,aAAa,KAAK,WAAW;oBAC7B,UAAU;oBACV,MAAM,KAAK,IAAI;oBACf,WAAW,KAAK,SAAS;gBAC3B;YACF;YACA,MAAM,OAAO,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,IAAM;YAC1C,IAAI,CAAC,IAAI,EAAE,IAAI,MAAM,OAAO,OAAO;gBACjC,aAAa,MAAM,SAAS;YAC9B,OAAO;gBACL,MAAM,QAAQ,KAAK,IAAI;gBACvB,SAAS,CAAC,OAAS,KAAK,GAAG,CAAC,CAAC,IAAO,EAAE,EAAE,KAAK,MAAM,EAAE,GAAG,QAAQ;gBAChE,eAAe,MAAM,QAAQ,GAAG,qBAAqB;gBACrD,IAAA,iIAAU,EAAC,MAAM,QAAQ,GAAG,2BAA2B,uBAAuB;oBAAE,QAAQ,MAAM,EAAE;gBAAC;YACnG;QACF,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,+BAA+B;YAC7C,aAAa;QACf,SAAU;YACR,cAAc;QAChB;IACF;IAEA,MAAM,mBAAmB,OAAO;QAC9B,aAAa;QACb,eAAe;QACf,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,CAAC,oBAAoB,EAAE,KAAK,EAAE,EAAE,EAAE;gBAAE,QAAQ;YAAS;YAC7E,MAAM,OAAO,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,IAAM;YAC1C,IAAI,CAAC,IAAI,EAAE,IAAI,MAAM,OAAO,OAAO;gBACjC,aAAa,MAAM,SAAS;YAC9B,OAAO;gBACL,SAAS,CAAC,OAAS,KAAK,MAAM,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,KAAK,EAAE;gBACtD,IAAI,iBAAiB,KAAK,EAAE,EAAE;oBAC5B,gBAAgB;oBAChB,UAAU,EAAE;oBACZ,SAAS,EAAE;gBACb;gBACA,eAAe;YACjB;QACF,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,wBAAwB;YACtC,aAAa;QACf,SAAU;YACR,oBAAoB;QACtB;IACF;IAEA,MAAM,0BAA0B,OAAO,OAAuB;QAC5D,IAAI,CAAC,cAAc;QACnB,eAAe;QACf,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,CAAC,iBAAiB,EAAE,aAAa,EAAE,CAAC,OAAO,CAAC,EAAE;gBACpE,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE,GAAG,KAAK;oBAAE,UAAU;gBAAK;YAClD;YACA,MAAM,OAAO,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,IAAM;YAC1C,IAAI,IAAI,EAAE,IAAI,MAAM,OAAO;gBACzB,MAAM,UAAU,KAAK,KAAK;gBAC1B,UAAU,CAAC;oBACT,MAAM,WAAW,eAAe,KAAK,GAAG,CAAC,CAAC,IAAO,EAAE,EAAE,KAAK,QAAQ,EAAE,GAAG,UAAU;oBACjF,sBAAsB,aAAa,EAAE,EAAE;oBACvC,OAAO;gBACT;YACF;QACF,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,+BAA+B;QAC/C,SAAU;YACR,eAAe;QACjB;IACF;IAEA,MAAM,oBAAoB,OAAO;QAC/B,IAAI,CAAC,cAAc;QACnB,eAAe;QACf,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,CAAC,iBAAiB,EAAE,aAAa,EAAE,CAAC,gBAAgB,EAAE,MAAM,EAAE,EAAE,EAAE;gBACxF,QAAQ;YACV;YACA,MAAM,OAAO,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,IAAM;YAC1C,IAAI,IAAI,EAAE,IAAI,MAAM,OAAO,OAAO;gBAChC,UAAU,CAAC;oBACT,MAAM,WAAW,eAAe,KAAK,MAAM,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,MAAM,EAAE;oBACpE,sBAAsB,aAAa,EAAE,EAAE;oBACvC,OAAO;gBACT;YACF,OAAO;gBACL,cAAc,MAAM,SAAS;YAC/B;QACF,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,+BAA+B;YAC7C,cAAc;QAChB,SAAU;YACR,eAAe;YACf,qBAAqB;QACvB;IACF;IAEA,MAAM,iBAAiB;QACrB,aAAa;QACb,aAAa;QACb,eAAe;QACf,cAAc;QACd,gBAAgB;QAChB,qBAAqB;IACvB;IAEA,MAAM,kBAAkB,CAAC;QACvB,aAAa;YACX,IAAI,OAAO,EAAE;YACb,OAAO,OAAO,KAAK,IAAI;YACvB,eAAe,OAAO,MAAM,IAAI;YAChC,MAAM,OAAO,IAAI;YACjB,iBAAiB,OAAO,eAAe;QACzC;QACA,aAAa,OAAO,MAAM,GAAG,aAAa;IAC5C;IAEA,MAAM,oBAAoB;QACxB,IAAI,CAAC,cAAc;QACnB,MAAM,iBAAiB,cAAc,aAAa,aAAa,IAAI,CAAC,CAAC,IAAM,EAAE,MAAM,KAAK,UAAU,aAAa,IAAI;QACnH,MAAM,cACJ,cAAc,aAAa,gBAAgB,SAAS,KAAK,UAAU,KAAK,CAAC,IAAI;QAC/E,IAAI,cAAc,cAAc,CAAC,gBAAgB;YAC/C,cAAc;YACd;QACF;QACA,IAAI,cAAc,cAAc,CAAC,aAAa;YAC5C,cAAc;YACd;QACF;QACA,MAAM,YACJ,cAAc,aACV,MAAM,IAAI,CAAC,CAAC,IAAM,EAAE,MAAM,IAAI,EAAE,MAAM,KAAK,gBAAgB,UAAU,EAAE,EAAE,KAAK,UAAU,EAAE,IAC1F,MAAM,IAAI,CAAC,CAAC,IAAM,EAAE,KAAK,IAAI,EAAE,KAAK,CAAC,WAAW,OAAO,YAAY,WAAW,MAAM,EAAE,EAAE,KAAK,UAAU,EAAE;QAC/G,IAAI,WAAW;YACb,cAAc;YACd;QACF;QACA,cAAc;QACd,gBAAgB;QAChB,qBAAqB;QACrB,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,CAAC,iBAAiB,EAAE,aAAa,EAAE,CAAC,MAAM,CAAC,EAAE;gBACnE,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBACnB,IAAI,UAAU,EAAE;oBAChB,OAAO;oBACP,QAAQ,cAAc,aAAa,gBAAgB,SAAS;oBAC5D,MAAM,UAAU,IAAI;oBACpB,WAAW,UAAU,IAAI;oBACzB,iBAAiB,UAAU,eAAe;gBAC5C;YACF;YACA,MAAM,OAAO,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,IAAM;YAC1C,IAAI,CAAC,IAAI,EAAE,IAAI,MAAM,OAAO,OAAO;gBACjC,cAAc,MAAM,SAAS;YAC/B,OAAO;gBACL,MAAM,SAAS,KAAK,KAAK;gBACzB,SAAS,CAAC;oBACR,MAAM,SAAS,KAAK,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,OAAO,EAAE;oBAClD,IAAI,QAAQ,OAAO,KAAK,GAAG,CAAC,CAAC,IAAO,EAAE,EAAE,KAAK,OAAO,EAAE,GAAG,SAAS;oBAClE,OAAO;wBAAC;2BAAW;qBAAK;gBAC1B;gBACA,gBAAgB,UAAU,EAAE,GAAG,uBAAuB;gBACtD,IAAI,cAAc,cAAc,eAAe,aAAa;oBAC1D,iEAAiE;oBACjE,MAAM,YAAY,MAAM,MAAM,kDAAkD;wBAC9E,QAAQ;wBACR,SAAS;4BAAE,gBAAgB;wBAAmB;wBAC9C,MAAM,KAAK,SAAS,CAAC;4BACnB;4BACA,YAAY;4BACZ,MAAM;wBACR;oBACF,GAAG,KAAK,CAAC,IAAM;oBACf,IAAI,aAAa,UAAU,EAAE,EAAE;wBAC7B,qBAAqB;oBACvB;gBACF;gBACA;YACF;QACF,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,4BAA4B;YAC1C,cAAc;QAChB;IACF;IAEA,MAAM,iBAAiB,CAAC;QACtB,MAAM,OAAO;YAAC,KAAK,IAAI;YAAE,KAAK,OAAO;SAAC,CAAC,MAAM,CAAC;QAC9C,OAAO,KAAK,IAAI,CAAC,UAAU;IAC7B;IAEA,MAAM,sBAAsB,CAAC;QAC3B,IAAI,CAAC,MAAM,OAAO;QAClB,IAAI,KAAK,EAAE,KAAK,cAAc,MAAM,OAAO,MAAM,GAAG,GAAG,OAAO,mBAAmB;QACjF,OAAO,KAAK,WAAW,IAAI;IAC7B;IAEA,MAAM,oBAAoB,IAAA,wKAAO;qDAAC,IAAM,MAAM,MAAM;6DAAC,CAAC,KAAK,IAAM,MAAM,CAAC,EAAE,WAAW,IAAI,CAAC;4DAAG;oDAAI;QAAC;KAAM;IACxG,MAAM,oBAAoB,cAAc,UAAU,EAAE;IACpD,MAAM,4BAA4B,cAAc,kBAAkB,EAAE;IACpE,MAAM,qBAAqB,cAAc,WAAW,EAAE;IACtD,MAAM,oBAAoB,cAAc,aAAa,EAAE;IACvD,MAAM,mBAAmB,cAAc,iBAAiB;IACxD,MAAM,iBAAiB,cAAc,iBAAiB;IACtD,MAAM,2BAA2B,KAAK;IACtC,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ;mCAAC;YAC7C,MAAM,IAAI,IAAI;YACd,EAAE,QAAQ,CAAC,GAAG,GAAG,GAAG;YACpB,OAAO,EAAE,WAAW,GAAG,KAAK,CAAC,GAAG;QAClC;;IACA,MAAM,aAAa,IAAA,wKAAO;8CAAC;YACzB,MAAM,IAAI,IAAI,KAAK;YACnB,IAAI,OAAO,KAAK,CAAC,EAAE,OAAO,KAAK,OAAO;YACtC,EAAE,QAAQ,CAAC,GAAG,GAAG,GAAG;YACpB,OAAO;QACT;6CAAG;QAAC;KAAY;IAChB,MAAM,WAAW,IAAA,wKAAO;4CAAC;YACvB,IAAI,CAAC,YAAY,OAAO;YACxB,MAAM,IAAI,IAAI,KAAK;YACnB,EAAE,QAAQ,CAAC,IAAI,IAAI,IAAI;YACvB,OAAO;QACT;2CAAG;QAAC;KAAW;IAEf,MAAM,cAAc,CAAC;QACnB,IAAI,CAAC,cAAc,CAAC,UAAU,OAAO;QACrC,MAAM,IAAI,IAAI,KAAK;QACnB,OAAO,KAAK,cAAc,KAAK;IACjC;IAEA,MAAM,iBACJ,kBAAkB,QACd,kBAAkB,MAAM,CAAC,CAAC,IAAM,YAAY,EAAE,OAAO,KACrD;IACN,MAAM,yBACJ,kBAAkB,QACd,0BAA0B,MAAM,CAAC,CAAC,IAAM,YAAY,EAAE,OAAO,KAC7D;IACN,MAAM,uBAAuB,CAAC,IAAW,YAAY,EAAE,SAAS,IAAI,EAAE,cAAc;IACpF,MAAM,kBACJ,kBAAkB,QAAQ,mBAAmB,MAAM,CAAC,CAAC,IAAM,qBAAqB,MAAM;IACxF,MAAM,cAAc,IAAA,wKAAO;+CAAC;YAC1B,MAAM,MAAM,IAAI;YAChB,mBAAmB,OAAO;uDAAC,CAAC,IAAM,IAAI,GAAG,CAAC,EAAE,EAAE,EAAE;;YAChD,OAAO;QACT;8CAAG;QAAC;KAAmB;IACvB,MAAM,iBAAiB,CAAC,MAA0C;QAChE,IAAI,SAAS,SAAS,OAAO,eAAe,IAAI,CAAC,CAAC,IAAW,EAAE,EAAE,KAAK,KAAK;QAC3E,IAAI,SAAS,gBAAgB,OAAO,uBAAuB,IAAI,CAAC,CAAC,IAAW,EAAE,EAAE,KAAK,KAAK;QAC1F,OAAO,mBAAmB,IAAI,CAAC,CAAC,IAAW,EAAE,EAAE,KAAK,KAAK;IAC3D;IAEA,MAAM,qBAAqB;QACzB,aAAa;YAAE,OAAO;YAAI,KAAK;YAAI,OAAO;YAAI,MAAM;QAAG;QACvD,oBAAoB;YAAE,OAAO;YAAI,KAAK;YAAI,YAAY;YAAI,aAAa;YAAI,MAAM;QAAG;QACpF,kBAAkB;QAClB,yBAAyB;QACzB,uBAAuB;QACvB,8BAA8B;QAC9B,mBAAmB;IACrB;IAEA,MAAM,mBAAmB,OAAO;QAC9B,IAAI,CAAC,SAAS;YACZ,iBAAiB;YACjB;QACF;QACA,MAAM,UAAU,SAAS;QACzB,MAAM,YAAY,UAAU,iBAAiB;QAC7C,MAAM,QAAQ,UAAU,UAAU,KAAK,GAAG,iBAAiB,KAAK;QAChE,MAAM,MAAM,UAAU,UAAU,GAAG,GAAG,iBAAiB,GAAG;QAC1D,IAAI,CAAC,SAAS,CAAC,KAAK;YAClB,iBAAiB;YACjB;QACF;QACA,kBAAkB;QAClB,iBAAiB;QACjB,mBAAmB;QACnB,mBAAmB;QACnB,IAAI;YACF,MAAM,UACJ,SAAS,UACL;gBACE,MAAM;gBACN,IAAI,aAAa;gBACjB;gBACA,SAAS,UAAU,KAAK;gBACxB,OAAO,UAAU,GAAG;gBACpB,OAAO,UAAU,KAAK,IAAI;gBAC1B,MAAM,UAAU,IAAI,IAAI;gBACxB,GAAI,sBAAsB;oBAAE,SAAS;gBAAoB,IAAI,CAAC,CAAC;YACjE,IACA;gBACE,MAAM;gBACN,IAAI,aAAa;gBACjB;gBACA,SAAS,iBAAiB,KAAK;gBAC/B,OAAO,iBAAiB,GAAG;gBAC3B,YAAY,iBAAiB,UAAU,IAAI;gBAC3C,aAAa,iBAAiB,WAAW,IAAI;gBAC7C,MAAM,iBAAiB,IAAI,IAAI;gBAC/B,GAAI,6BAA6B;oBAAE,SAAS;gBAA2B,IAAI,CAAC,CAAC;YAC/E;YAEN,MAAM,MAAM,MAAM,MAAM,uBAAuB;gBAC7C,QAAQ,YAAY,UAAU;gBAC9B,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;YACvB;YACA,MAAM,OAAO,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,IAAM;YAC1C,IAAI,CAAC,IAAI,EAAE,IAAI,MAAM,OAAO,OAAO;gBACjC,iBAAiB,MAAM,SAAS;YAClC,OAAO;gBACL,MAAM,OACJ,SAAS,UACL,eAAe,IAAI,CAAC,CAAC,IAAW,EAAE,EAAE,KAAK,aACzC,uBAAuB,IAAI,CAAC,CAAC,IAAW,EAAE,EAAE,KAAK;gBACvD,IAAI,QAAQ,WAAW;oBACrB,cAAc;wBACZ;wBACA,IAAI;wBACJ,WAAW,KAAK,OAAO;wBACvB,SAAS,KAAK,KAAK;wBACnB,aAAa,KAAK,OAAO,IAAI;wBAC7B,SAAS,KAAK,SAAS,IAAI;oBAC7B;gBACF,OAAO;oBACL,cAAc;gBAChB;gBACA,mBAAmB,YAAY,gBAAgB;gBAC/C,MAAM,YAAY,eAAe,YAAY;gBAC7C;gBACA;YACF;QACF,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,yBAAyB;YACvC,iBAAiB;QACnB,SAAU;YACR,kBAAkB;QACpB;IACF;IAEA,MAAM,kBAAkB,CAAC;QACvB,yBAAyB;QACzB,kBAAkB,MAAM,EAAE;QAC1B,uBAAuB,MAAM,SAAS,IAAI;QAC1C,aAAa;YACX,OAAO,oBAAoB,MAAM,OAAO;YACxC,KAAK,oBAAoB,MAAM,KAAK;YACpC,OAAO,MAAM,KAAK,IAAI;YACtB,MAAM,MAAM,IAAI,IAAI;QACtB;IACF;IAEA,MAAM,yBAAyB,CAAC;QAC9B,kBAAkB;QAClB,yBAAyB,GAAG,EAAE;QAC9B,8BAA8B,GAAG,SAAS,IAAI;QAC9C,oBAAoB;YAClB,OAAO,oBAAoB,GAAG,OAAO;YACrC,KAAK,oBAAoB,GAAG,KAAK;YACjC,YAAY,GAAG,UAAU,IAAI;YAC7B,aAAa,GAAG,WAAW,IAAI;YAC/B,MAAM,GAAG,IAAI,IAAI;QACnB;IACF;IAEA,MAAM,2BAA2B,OAAO,MAAgC;QACtE,IAAI,CAAC,WAAW,CAAC,OAAO,QAAQ,CAAC,KAAK;QACtC,MAAM,OAAO,OAAO,OAAO,CAAC;QAC5B,IAAI,CAAC,MAAM;QACX,kBAAkB;QAClB,iBAAiB;QACjB,mBAAmB;QACnB,mBAAmB;QACnB,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,CAAC,yBAAyB,EAAE,KAAK,IAAI,EAAE,IAAI,EAAE;gBAAE,QAAQ;YAAS;YACxF,MAAM,OAAO,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,IAAM;YAC1C,IAAI,CAAC,IAAI,EAAE,IAAI,MAAM,OAAO,OAAO;gBACjC,iBAAiB,MAAM,SAAS;YAClC,OAAO;gBACL,mBAAmB;gBACnB;gBACA;gBACA,cAAc;YAChB;QACF,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,2BAA2B;YACzC,iBAAiB;QACnB,SAAU;YACR,kBAAkB;QACpB;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAO,WAAU;0BAChB,cAAA,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAI,WAAU;sCAAsL;;;;;;sCAGrM,6LAAC;4BAAG,WAAU;sCAA+E;;;;;;sCAC7F,6LAAC;4BAAE,WAAU;sCAAwB;;;;;;;;;;;;;;;;;0BAIzC,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;;0CACC,6LAAC;gCAAE,WAAU;0CAAuD;;;;;;0CACpE,6LAAC;gCAAE,WAAU;0CAAyB;;;;;;0CACtC,6LAAC;gCAAE,WAAU;0CAA4B;;;;;;;;;;;;kCAE3C,6LAAC;;0CACC,6LAAC;gCAAE,WAAU;0CAAuD;;;;;;0CACpE,6LAAC;gCAAE,WAAU;0CAA0B,MAAM,MAAM;;;;;;0CACnD,6LAAC;gCAAE,WAAU;0CAA6B,gBAAgB,6BAA6B;;;;;;;;;;;;kCAEzF,6LAAC;;0CACC,6LAAC;gCAAE,WAAU;0CAAuD;;;;;;0CACpE,6LAAC;gCAAE,WAAU;0CAA0B,OAAO,QAAQ,CAAC,qBAAqB,oBAAoB;;;;;;0CAChG,6LAAC;gCAAE,WAAU;0CAA4B;;;;;;;;;;;;kCAE3C,6LAAC;;0CACC,6LAAC;gCAAE,WAAU;0CAAuD;;;;;;0CACpE,6LAAC;gCAAE,WAAU;0CAA0B,QAAQ,MAAM;;;;;;0CACrD,6LAAC;gCAAE,WAAU;0CAA4B;;;;;;;;;;;;;;;;;;0BAI7C,6LAAC;gBAAI,WAAU;0BACZ;oBACC;wBAAE,KAAK;wBAAY,OAAO;oBAAa;oBACvC;wBAAE,KAAK;wBAAS,OAAO;oBAAS;oBAChC;wBAAE,KAAK;wBAAW,OAAO;oBAAY;oBACrC;wBAAE,KAAK;wBAAY,OAAO;oBAAsB;iBACjD,CAAC,GAAG,CAAC,CAAC,oBACL,6LAAC;wBAEC,WAAW,CAAC,0CAA0C,EACpD,cAAc,IAAI,GAAG,GAAG,wCAAwC,kEAChE;wBACF,SAAS,IAAM,gBAAgB,IAAI,GAAG;kCAErC,IAAI,KAAK;uBANL,IAAI,GAAG;;;;;;;;;;YAWjB,8BAAgB,6LAAC;;;;;YAEjB,CAAC,gBAAgB,cAAc,4BAC9B,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAE,WAAU;kDAAuD;;;;;;kDACpE,6LAAC;wCAAE,WAAU;kDAAwB;;;;;;;;;;;;0CAEvC,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAK,WAAU;;4CAAqF;4CAC5F;;;;;;;kDAET,6LAAC;wCAAK,WAAU;;4CAAqF;4CAC1F;4CAAe;;;;;;;kDAE1B,6LAAC;wCAAI,WAAU;kDACZ;4CAAC;4CAAQ;yCAAM,CAAC,GAAG,CAAC,CAAC,sBACpB,6LAAC;gDAEC,SAAS,IAAM,iBAAiB;gDAChC,WAAW,CAAC,gDAAgD,EAC1D,kBAAkB,QAAQ,+BAA+B,iBACzD;gDACF,UAAU;0DAET,UAAU,SAAS,WAAW;+CAP1B;;;;;;;;;;oCAWV,kBAAkB,uBACjB,6LAAC;wCACC,MAAK;wCACL,OAAO;wCACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;wCAC9C,WAAU;;;;;;kDAGd,6LAAC;wCAAI,WAAU;kDACZ;4CACC;gDAAE,KAAK;gDAAO,OAAO;4CAAkB;4CACvC;gDAAE,KAAK;gDAAQ,OAAO;4CAAc;yCACrC,CAAC,GAAG,CAAC,CAAC,oBACL,6LAAC;gDAEC,SAAS,IAAM,kBAAkB,IAAI,GAAG;gDACxC,WAAW,CAAC,gDAAgD,EAC1D,mBAAmB,IAAI,GAAG,GAAG,+BAA+B,iBAC5D;gDACF,UAAU;0DAET,IAAI,KAAK;+CAPL,IAAI,GAAG;;;;;;;;;;kDAWlB,6LAAC;wCAAI,WAAU;kDACZ;4CAAC;4CAAI;yCAAG,CAAC,GAAG,CAAC,CAAC,qBACb,6LAAC;gDAEC,SAAS,IAAM,eAAe;gDAC9B,WAAW,CAAC,gDAAgD,EAC1D,gBAAgB,OAAO,+BAA+B,iBACtD;gDACF,UAAU;;oDACX;oDACO;oDAAK;;+CAPN;;;;;;;;;;;;;;;;;;;;;;kCAcf,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAE,WAAU;0DAAmC;;;;;;4CAC/C,mCAAqB,6LAAC;gDAAK,WAAU;0DAA0C;;;;;;;;;;;;oCAEjF,CAAC,yBACA,6LAAC;wCAAE,WAAU;kDAAiC;;;;;;oCAI/C,WAAW,CAAC,qBAAqB,+BAChC,6LAAC;wCAAE,WAAU;kDAAiC;;;;;;oCAE/C,WAAW,CAAC,qBAAqB,iCAChC,6LAAC;wCAAE,WAAU;kDAAmC;;;;;;oCAEjD,WAAW,CAAC,qBAAqB,iCAChC,6LAAC;wCAAE,WAAU;kDAAqC;;;;;;oCAEnD,WAAW,kBAAkB,SAAS,CAAC,qBAAqB,CAAC,iBAAiB,4BAC7E,6LAAC;wCAAE,WAAU;;4CAAiC;4CACrB;4CAAY;4CAAG,YAAY,YAAY;4CAAkB;;;;;;;oCAGjF,WAAW,CAAC,qBAAqB,CAAC,+BACjC,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDAAE,WAAU;kEAA6D;;;;;;kEAC1E,6LAAC;wDACC,QAAQ;wDACR,gBAAgB;wDAChB,SAAS;wDACT,UAAU;wDACV,UAAU;wDACV,aAAa,IAAI,IACf,kBAAkB,GAAG,CAAC,CAAC,IAAM;gEAAC,GAAG,EAAE,IAAI,KAAK,iBAAiB,EAAE,IAAI,KAAK,gBAAgB,UAAU,EAAE,IAAI,KAAK,uBAAuB,iBAAiB,QAAQ,CAAC,EAAE,EAAE,GAAG,EAAE;gEAAE;oEAAC,EAAE,IAAI;iEAAC;6DAAC;wDAEpL,aAAa;wDACb,QAAQ,OAAO;4DACb,0EAA0E;4DAC1E,IAAI,CAAC,SAAS;4DACd,MAAM,CAAC,MAAM,MAAM,GAAG,QAAQ,EAAE,CAAC,KAAK,CAAC;4DACvC,MAAM,WAAW,OAAO;4DACxB,IAAI,CAAC,OAAO,QAAQ,CAAC,WAAW;4DAChC,IAAI,SAAS,SAAS;gEACpB,MAAM,QAAQ,YAAY,GAAG,CAAC;gEAC9B,IAAI,CAAC,OAAO,SAAS;oEACnB,mBAAmB;oEACnB,MAAM,yCAAyC;oEAC/C;gEACF;4DACF;4DACA,kBAAkB;4DAClB,iBAAiB;4DACjB,mBAAmB;4DACnB,mBAAmB;4DACnB,IAAI;gEACF,MAAM,iBAAiB,eAAe,MAAa;gEACnD,MAAM,YAAY,SAAS,UAAU,YAAY,GAAG,CAAC,YAAY;gEACjE,MAAM,MAAM,MAAM,MAAM,uBAAuB;oEAC7C,QAAQ;oEACR,SAAS;wEAAE,gBAAgB;oEAAmB;oEAC9C,MAAM,KAAK,SAAS,CAAC;wEACnB,MAAM,SAAS,UAAU,UAAU,SAAS,iBAAiB,iBAAiB,SAAS,UAAU,UAAU;wEAC3G,IAAI;wEACJ,SAAS,QAAQ,KAAK,CAAC,WAAW;wEAClC,OAAO,QAAQ,GAAG,CAAC,WAAW;wEAC9B,GAAI,iBAAiB;4EAAE,SAAS;wEAAe,IAAI,CAAC,CAAC;wEACrD,GAAI,QAAQ,OAAO,GAAG;4EAAE,SAAS,QAAQ,OAAO;wEAAC,IAAI,CAAC,CAAC;oEACzD;gEACF;gEACA,MAAM,OAAO,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,IAAM;gEAC1C,IAAI,CAAC,IAAI,EAAE,IAAI,MAAM,OAAO,OAAO;oEACjC,MAAM,SAAS,MAAM,SAAS;oEAC9B,IAAI,IAAI,MAAM,KAAK,OAAO,OAAO,WAAW,GAAG,QAAQ,CAAC,aAAa;wEACnE,mBAAmB;wEACnB,MAAM,QAAQ;oEAChB,OAAO,IAAI,IAAI,MAAM,KAAK,OAAO,OAAO,WAAW,GAAG,QAAQ,CAAC,SAAS;wEACtE,mBAAmB;wEACnB,MAAM,mCAAmC;oEAC3C,OAAO,IAAI,IAAI,MAAM,KAAK,OAAO,OAAO,WAAW,GAAG,QAAQ,CAAC,UAAU;wEACvE,mBAAmB;wEACnB,MAAM,4CAA4C;oEACpD,OAAO;wEACL,iBAAiB;wEACjB,MAAM,QAAQ;oEAChB;gEACF,OAAO;oEACL,mBAAmB;oEACnB,MAAM,8BAA8B;oEACpC,IAAI,SAAS,SAAS;wEACpB,MAAM,OAAO,eAAe,IAAI,CAAC,CAAC,IAAW,EAAE,EAAE,KAAK;wEACtD,IAAI,MAAM;4EACR,cAAc;gFACZ,MAAM;gFACN,IAAI;gFACJ,WAAW,KAAK,OAAO;gFACvB,SAAS,KAAK,KAAK;gFACnB,aAAa,KAAK,OAAO,IAAI;gFAC7B,SAAS,KAAK,SAAS,IAAI;4EAC7B;wEACF;oEACF,OAAO,IAAI,SAAS,gBAAgB;wEAClC,MAAM,OAAO,uBAAuB,IAAI,CAAC,CAAC,IAAW,EAAE,EAAE,KAAK;wEAC9D,IAAI,MAAM;4EACR,cAAc;gFACZ,MAAM;gFACN,IAAI;gFACJ,WAAW,KAAK,OAAO;gFACvB,SAAS,KAAK,KAAK;gFACnB,SAAS,KAAK,SAAS,IAAI;4EAC7B;wEACF;oEACF,OAAO,IAAI,SAAS,WAAW,WAAW;wEACxC,MAAM,QAAQ,UAAU,SAAS,IAAI,UAAU,cAAc;wEAC7D,MAAM,MACJ,UAAU,YAAY,IACtB,CAAC,SAAS,UAAU,sBAAsB,GACtC,IAAI,KAAK,IAAI,KAAK,OAAO,OAAO,KAAK,UAAU,sBAAsB,GAAG,KAAK,MAAM,WAAW,KAC9F,UAAU,SAAS;wEACzB,cAAc;4EACZ,MAAM;4EACN,IAAI;4EACJ,WAAW;4EACX,SAAS;4EACT,aAAa,UAAU,OAAO,IAAI;4EAClC,cAAc,UAAU,sBAAsB,IAAI;4EAClD,SAAS,UAAU,SAAS,IAAI;wEAClC;oEACF;oEACA;gEACF;4DACF,EAAE,OAAO,KAAK;gEACZ,QAAQ,KAAK,CAAC,qCAAqC;gEACnD,iBAAiB;gEACjB,MAAM,iBAAiB;4DACzB,SAAU;gEACR,kBAAkB;4DACpB;wDACF;;;;;;;;;;;;0DAGJ,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDAAI,WAAU;;0EACb,6LAAC;gEAAE,WAAU;0EAAwD;;;;;;4DACpE,eAAe,MAAM,KAAK,mBACzB,6LAAC;gEAAE,WAAU;0EAA4B;;;;;;4DAE1C;mEAAI;6DAAe,CACjB,IAAI,CAAC,CAAC,GAAG,IAAM,IAAI,KAAK,EAAE,OAAO,EAAE,OAAO,KAAK,IAAI,KAAK,EAAE,OAAO,EAAE,OAAO,IAC1E,KAAK,CAAC,GAAG,GACT,GAAG,CAAC,CAAC,sBACJ,6LAAC;oEAEC,WAAU;;sFAEV,6LAAC;4EAAE,WAAU;;gFAA2B;gFAAU,MAAM,KAAK,IAAI,CAAC,CAAC,EAAE,MAAM,EAAE,EAAE;;;;;;;sFAC/E,6LAAC;4EAAE,WAAU;;gFACV,YAAY,MAAM,OAAO,EAAE;gFAAkB;gFAAI,YAAY,MAAM,KAAK,EAAE;;;;;;;wEAE5E,MAAM,IAAI,kBAAI,6LAAC;4EAAE,WAAU;;gFAAgB;gFAAO,MAAM,IAAI;;;;;;;sFAC7D,6LAAC;4EAAI,WAAU;;8FACb,6LAAC;oFACC,MAAK;oFACL,SAAS,IAAM,gBAAgB;oFAC/B,WAAU;8FACX;;;;;;8FAGD,6LAAC;oFACC,MAAK;oFACL,SAAS,IAAM,yBAAyB,SAAS,MAAM,EAAE;oFACzD,WAAU;8FACX;;;;;;;;;;;;;mEApBE,CAAC,MAAM,EAAE,MAAM,EAAE,EAAE;;;;;;;;;;;kEA2BhC,6LAAC;wDAAI,WAAU;;0EACb,6LAAC;gEAAE,WAAU;0EAAwD;;;;;;4DACpE,uBAAuB,MAAM,KAAK,mBACjC,6LAAC;gEAAE,WAAU;0EAA4B;;;;;;4DAE1C;mEAAI;6DAAuB,CACzB,IAAI,CAAC,CAAC,GAAG,IAAM,IAAI,KAAK,EAAE,OAAO,EAAE,OAAO,KAAK,IAAI,KAAK,EAAE,OAAO,EAAE,OAAO,IAC1E,KAAK,CAAC,GAAG,GACT,GAAG,CAAC,CAAC,mBACJ,6LAAC;oEAEC,WAAU;;sFAEV,6LAAC;4EAAE,WAAU;sFAAiB,GAAG,UAAU,IAAI,GAAG,WAAW,IAAI;;;;;;sFACjE,6LAAC;4EAAE,WAAU;;gFACV,YAAY,GAAG,OAAO,EAAE;gFAAkB;gFAAI,YAAY,GAAG,KAAK,EAAE;;;;;;;wEAEtE,GAAG,IAAI,kBAAI,6LAAC;4EAAE,WAAU;;gFAAgB;gFAAO,GAAG,IAAI;;;;;;;sFACvD,6LAAC;4EAAI,WAAU;;8FACb,6LAAC;oFACC,MAAK;oFACL,SAAS,IAAM,uBAAuB;oFACtC,WAAU;8FACX;;;;;;8FAGD,6LAAC;oFACC,MAAK;oFACL,SAAS,IAAM,yBAAyB,gBAAgB,GAAG,EAAE;oFAC7D,WAAU;8FACX;;;;;;;;;;;;;mEApBE,CAAC,GAAG,EAAE,GAAG,EAAE,EAAE;;;;;;;;;;;kEA2BlC,6LAAC;wDAAI,WAAU;;0EACb,6LAAC;gEAAE,WAAU;0EAAwD;;;;;;4DACpE,gBAAgB,MAAM,KAAK,mBAC1B,6LAAC;gEAAE,WAAU;0EAA4B;;;;;;4DAE1C;mEAAI;6DAAgB,CAClB,IAAI,CACH,CAAC,GAAG,IACF,IAAI,KAAK,EAAE,SAAS,IAAI,EAAE,cAAc,IAAI,GAAG,OAAO,KACtD,IAAI,KAAK,EAAE,SAAS,IAAI,EAAE,cAAc,IAAI,GAAG,OAAO,IAEzD,KAAK,CAAC,GAAG,GACT,GAAG,CAAC,CAAC,kBACJ,6LAAC;oEAEC,WAAW,CAAC,2IAA2I,EACrJ,kBAAkB,IAAI,CAAC,CAAC,IAAM,EAAE,GAAG,KAAK,EAAE,EAAE,IAAI,EAAE,IAAI,KAAK,0BACvD,oCACA,kBAAkB,IAAI,CAAC,CAAC,IAAM,EAAE,GAAG,KAAK,EAAE,EAAE,IAAI,EAAE,IAAI,KAAK,0BACzD,wCACA,kFACN;;sFAEF,6LAAC;4EAAI,WAAU;;8FACb,6LAAC;oFAAE,WAAU;;wFAAgB;wFAAO,EAAE,EAAE;;;;;;;8FACxC,6LAAC;oFAAE,WAAU;;wFACV,YAAY,EAAE,SAAS,IAAI,EAAE,cAAc,EAAE;wFAAkB;wFAAU,EAAE,SAAS,IAAI,EAAE,WAAW,IAAI,EAAE,OAAO,IAAI;;;;;;;8FAEzH,6LAAC;oFAAE,WAAU;8FAAiB,EAAE,UAAU,IAAI,EAAE,UAAU,IAAI;;;;;;8FAC9D,6LAAC;oFAAI,WAAU;;sGACb,6LAAC;4FACC,MAAK;4FACL,SAAS;gGACP,MAAM,QAAQ,EAAE,SAAS,IAAI,EAAE,cAAc;gGAC7C,MAAM,MACJ,EAAE,YAAY,IACd,CAAC,SAAS,EAAE,sBAAsB,GAC9B,IAAI,KAAK,IAAI,KAAK,OAAO,OAAO,KAAK,EAAE,sBAAsB,GAAG,KAAK,MAAM,WAAW,KACtF,IAAI;gGACV,IAAI,CAAC,SAAS,CAAC,KAAK;gGACpB,MAAM,SAAS,IAAI,KAAK,IAAI,KAAK,KAAK,OAAO,KAAK,cAAc,KAAK;gGACrE,kBAAkB;gGAClB,IAAI;oGACF,MAAM,MAAM,MAAM,MAAM,uBAAuB;wGAC7C,QAAQ;wGACR,SAAS;4GAAE,gBAAgB;wGAAmB;wGAC9C,MAAM,KAAK,SAAS,CAAC;4GACnB,MAAM;4GACN,IAAI,EAAE,EAAE;4GACR,SAAS;4GACT,OAAO,OAAO,WAAW;4GACzB,SAAS,EAAE,SAAS;wGACtB;oGACF;oGACA,MAAM,OAAO,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,IAAM;oGAC1C,IAAI,CAAC,IAAI,EAAE,IAAI,MAAM,OAAO,OAAO;wGACjC,iBAAiB,MAAM,SAAS;wGAChC,MAAM,MAAM,SAAS,6BAA6B;oGACpD,OAAO;wGACL,cAAc;4GACZ,MAAM;4GACN,IAAI,EAAE,EAAE;4GACR,WAAW;4GACX,SAAS;4GACT,aAAa,EAAE,OAAO,IAAI;4GAC1B,cAAc,EAAE,sBAAsB,IAAI;4GAC1C,SAAS,EAAE,SAAS,IAAI;wGAC1B;wGACA,MAAM,oBAAoB;wGAC1B;oGACF;gGACF,SAAU;oGACR,kBAAkB;gGACpB;4FACF;4FACA,WAAU;;gGACX;gGACG;gGAAY;;;;;;;sGAEhB,6LAAC;4FACC,MAAK;4FACL,SAAS;gGACP,MAAM,QAAQ,EAAE,SAAS,IAAI,EAAE,cAAc;gGAC7C,MAAM,MACJ,EAAE,YAAY,IACd,CAAC,SAAS,EAAE,sBAAsB,GAC9B,IAAI,KAAK,IAAI,KAAK,OAAO,OAAO,KAAK,EAAE,sBAAsB,GAAG,KAAK,MAAM,WAAW,KACtF,IAAI;gGACV,IAAI,CAAC,SAAS,CAAC,KAAK;gGACpB,MAAM,SAAS,IAAI,KAAK,IAAI,KAAK,KAAK,OAAO,KAAK,cAAc,KAAK;gGACrE,kBAAkB;gGAClB,IAAI;oGACF,MAAM,MAAM,MAAM,MAAM,uBAAuB;wGAC7C,QAAQ;wGACR,SAAS;4GAAE,gBAAgB;wGAAmB;wGAC9C,MAAM,KAAK,SAAS,CAAC;4GACnB,MAAM;4GACN,IAAI,EAAE,EAAE;4GACR,SAAS;4GACT,OAAO,OAAO,WAAW;4GACzB,SAAS,EAAE,SAAS;wGACtB;oGACF;oGACA,MAAM,OAAO,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,IAAM;oGAC1C,IAAI,CAAC,IAAI,EAAE,IAAI,MAAM,OAAO,OAAO;wGACjC,iBAAiB,MAAM,SAAS;wGAChC,MAAM,MAAM,SAAS,6BAA6B;oGACpD,OAAO;wGACL,cAAc;4GACZ,MAAM;4GACN,IAAI,EAAE,EAAE;4GACR,WAAW;4GACX,SAAS;4GACT,aAAa,EAAE,OAAO,IAAI;4GAC1B,cAAc,EAAE,sBAAsB,IAAI;4GAC1C,SAAS,EAAE,SAAS,IAAI;wGAC1B;wGACA,MAAM,oBAAoB;wGAC1B;oGACF;gGACF,SAAU;oGACR,kBAAkB;gGACpB;4FACF;4FACA,WAAU;;gGACX;gGACG;gGAAY;;;;;;;;;;;;;;;;;;;sFAIpB,6LAAC;4EAAK,WAAU;sFACb,EAAE,MAAM;;;;;;;mEArHN,CAAC,MAAM,EAAE,EAAE,EAAE,EAAE;;;;;;;;;;;kEA0HtB,6LAAC;wDAAI,WAAU;;0EACb,6LAAC;gEAAE,WAAU;0EAAwD;;;;;;4DACpE,kBAAkB,MAAM,KAAK,mBAC5B,6LAAC;gEAAE,WAAU;0EAAkC;;;;;;4DAEhD,kBAAkB,KAAK,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,kBAClC,6LAAC;oEAEC,WAAW,CAAC,yGAAyG,EACnH,EAAE,IAAI,KAAK,0BAA0B,EAAE,IAAI,KAAK,uBAC5C,6DACA,sDACJ;;sFAEF,6LAAC;4EAAI,WAAU;;8FACb,6LAAC;oFAAE,WAAU;8FAAiB,EAAE,OAAO;;;;;;8FACvC,6LAAC;oFAAE,WAAU;;wFAAkB;wFAAW,EAAE,GAAG;wFAAC;wFAAK,EAAE,GAAG;;;;;;;gFACzD,EAAE,IAAI,KAAK,gCACV,6LAAC;oFAAE,WAAU;8FAA8B;;;;;;gFAE5C,EAAE,IAAI,KAAK,wCACV,6LAAC;oFAAE,WAAU;8FAAgC;;;;;;;;;;;;sFAGjD,6LAAC;4EAAK,WAAU;sFACb,EAAE,IAAI;;;;;;;mEAlBJ,GAAG,EAAE,IAAI,CAAC,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC,EAAE,EAAE,GAAG,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0CA2BhD,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAE,WAAU;kDAAmC;;;;;;kDAChD,6LAAC;wCAAG,WAAU;;0DACZ,6LAAC;0DAAG;;;;;;0DACJ,6LAAC;0DAAG;;;;;;0DACJ,6LAAC;0DAAG;;;;;;0DACJ,6LAAC;;oDAAG;oDAAY;oDAAiB;oDAAgB;oDAAe;;;;;;;;;;;;;kDAElE,6LAAC;wCAAI,WAAU;kDAAkI;;;;;;;;;;;;0CAInJ,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAE,WAAU;kDAAmC;;;;;;kDAChD,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDACC,MAAK;gDACL,OAAO,UAAU,KAAK;gDACtB,UAAU,CAAC,IAAM,aAAa,CAAC,IAAM,CAAC;4DAAE,GAAG,CAAC;4DAAE,OAAO,EAAE,MAAM,CAAC,KAAK;wDAAC,CAAC;gDACrE,WAAU;gDACV,aAAY;gDACZ,UAAU,CAAC,WAAW;;;;;;0DAExB,6LAAC;gDACC,MAAK;gDACL,OAAO,UAAU,GAAG;gDACpB,UAAU,CAAC,IAAM,aAAa,CAAC,IAAM,CAAC;4DAAE,GAAG,CAAC;4DAAE,KAAK,EAAE,MAAM,CAAC,KAAK;wDAAC,CAAC;gDACnE,WAAU;gDACV,aAAY;gDACZ,UAAU,CAAC,WAAW;;;;;;;;;;;;kDAG1B,6LAAC;wCACC,MAAK;wCACL,OAAO,UAAU,KAAK;wCACtB,UAAU,CAAC,IAAM,aAAa,CAAC,IAAM,CAAC;oDAAE,GAAG,CAAC;oDAAE,OAAO,EAAE,MAAM,CAAC,KAAK;gDAAC,CAAC;wCACrE,WAAU;wCACV,aAAY;wCACZ,UAAU,CAAC,WAAW;;;;;;kDAExB,6LAAC;wCACC,MAAK;wCACL,OAAO,UAAU,IAAI;wCACrB,UAAU,CAAC,IAAM,aAAa,CAAC,IAAM,CAAC;oDAAE,GAAG,CAAC;oDAAE,MAAM,EAAE,MAAM,CAAC,KAAK;gDAAC,CAAC;wCACpE,WAAU;wCACV,aAAY;wCACZ,UAAU,CAAC,WAAW;;;;;;kDAExB,6LAAC;wCACC,MAAK;wCACL,SAAS,IAAM,iBAAiB;wCAChC,UAAU,CAAC,WAAW;wCACtB,WAAU;kDAET,iBAAiB,eAAe,iBAAiB,uBAAuB;;;;;;oCAE1E,cAAc,WAAW,IAAI,KAAK,yBACjC,6LAAC;wCACC,MAAK;wCACL,SAAS;4CACP,IAAI,CAAC,YAAY;4CACjB,mBAAmB;4CACnB,mBAAmB;4CACnB,iBAAiB;4CACjB,kBAAkB;4CAClB,MAAM,uBAAuB;gDAC3B,QAAQ;gDACR,SAAS;oDAAE,gBAAgB;gDAAmB;gDAC9C,MAAM,KAAK,SAAS,CAAC;oDACnB,MAAM;oDACN,IAAI,WAAW,EAAE;oDACjB,SAAS,WAAW,SAAS;oDAC7B,OAAO,WAAW,OAAO;oDACzB,SAAS,WAAW,WAAW,IAAI;oDACnC,SAAS,WAAW,OAAO,IAAI;gDACjC;4CACF,GACG,IAAI,CAAC,CAAC,MAAQ,IAAI,IAAI,GAAG,IAAI,CAAC,CAAC,OAAS,CAAC;wDAAE;wDAAK;oDAAK,CAAC,IACtD,IAAI,CAAC,CAAC,EAAE,GAAG,EAAE,IAAI,EAAE;gDAClB,IAAI,CAAC,IAAI,EAAE,IAAI,MAAM,OAAO,OAAO;oDACjC,iBAAiB,MAAM,SAAS;oDAChC,MAAM,MAAM,SAAS,8BAA8B;gDACrD,OAAO;oDACL,mBAAmB;oDACnB,MAAM,YAAY;oDAClB,cAAc;oDACd;gDACF;4CACF,GACC,KAAK,CAAC;gDACL,iBAAiB;4CACnB,GACC,OAAO,CAAC,IAAM,kBAAkB;wCACrC;wCACA,WAAU;kDACX;;;;;;oCAIF,gCACC,6LAAC;wCACC,MAAK;wCACL,SAAS;wCACT,WAAU;kDACX;;;;;;oCAIF,CAAC,yBAAW,6LAAC;wCAAE,WAAU;kDAA4B;;;;;;;;;;;;0CAExD,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAE,WAAU;kDAAmC;;;;;;kDAChD,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDACC,MAAK;gDACL,OAAO,iBAAiB,KAAK;gDAC7B,UAAU,CAAC,IAAM,oBAAoB,CAAC,IAAM,CAAC;4DAAE,GAAG,CAAC;4DAAE,OAAO,EAAE,MAAM,CAAC,KAAK;wDAAC,CAAC;gDAC5E,WAAU;gDACV,aAAY;gDACZ,UAAU,CAAC,WAAW;;;;;;0DAExB,6LAAC;gDACC,MAAK;gDACL,OAAO,iBAAiB,GAAG;gDAC3B,UAAU,CAAC,IAAM,oBAAoB,CAAC,IAAM,CAAC;4DAAE,GAAG,CAAC;4DAAE,KAAK,EAAE,MAAM,CAAC,KAAK;wDAAC,CAAC;gDAC1E,WAAU;gDACV,aAAY;gDACZ,UAAU,CAAC,WAAW;;;;;;;;;;;;kDAG1B,6LAAC;wCACC,MAAK;wCACL,OAAO,iBAAiB,UAAU;wCAClC,UAAU,CAAC,IAAM,oBAAoB,CAAC,IAAM,CAAC;oDAAE,GAAG,CAAC;oDAAE,YAAY,EAAE,MAAM,CAAC,KAAK;gDAAC,CAAC;wCACjF,WAAU;wCACV,aAAY;wCACZ,UAAU,CAAC,WAAW;;;;;;kDAExB,6LAAC;wCACC,MAAK;wCACL,OAAO,iBAAiB,WAAW;wCACnC,UAAU,CAAC,IAAM,oBAAoB,CAAC,IAAM,CAAC;oDAAE,GAAG,CAAC;oDAAE,aAAa,EAAE,MAAM,CAAC,KAAK;gDAAC,CAAC;wCAClF,WAAU;wCACV,aAAY;wCACZ,UAAU,CAAC,WAAW;;;;;;kDAExB,6LAAC;wCACC,MAAK;wCACL,OAAO,iBAAiB,IAAI;wCAC5B,UAAU,CAAC,IAAM,oBAAoB,CAAC,IAAM,CAAC;oDAAE,GAAG,CAAC;oDAAE,MAAM,EAAE,MAAM,CAAC,KAAK;gDAAC,CAAC;wCAC3E,WAAU;wCACV,aAAY;wCACZ,UAAU,CAAC,WAAW;;;;;;kDAExB,6LAAC;wCACC,MAAK;wCACL,SAAS,IAAM,iBAAiB;wCAChC,UAAU,CAAC,WAAW;wCACtB,WAAU;kDAET,iBAAiB,eAAe,wBAAwB,gCAAgC;;;;;;oCAE1F,cAAc,WAAW,IAAI,KAAK,gCACjC,6LAAC;wCACC,MAAK;wCACL,SAAS;4CACP,IAAI,CAAC,YAAY;4CACjB,mBAAmB;4CACnB,mBAAmB;4CACnB,iBAAiB;4CACjB,kBAAkB;4CAClB,MAAM,uBAAuB;gDAC3B,QAAQ;gDACR,SAAS;oDAAE,gBAAgB;gDAAmB;gDAC9C,MAAM,KAAK,SAAS,CAAC;oDACnB,MAAM;oDACN,IAAI,WAAW,EAAE;oDACjB,SAAS,WAAW,SAAS;oDAC7B,OAAO,WAAW,OAAO;oDACzB,SAAS,WAAW,OAAO,IAAI;gDACjC;4CACF,GACG,IAAI,CAAC,CAAC,MAAQ,IAAI,IAAI,GAAG,IAAI,CAAC,CAAC,OAAS,CAAC;wDAAE;wDAAK;oDAAK,CAAC,IACtD,IAAI,CAAC,CAAC,EAAE,GAAG,EAAE,IAAI,EAAE;gDAClB,IAAI,CAAC,IAAI,EAAE,IAAI,MAAM,OAAO,OAAO;oDACjC,iBAAiB,MAAM,SAAS;oDAChC,MAAM,MAAM,SAAS,8BAA8B;gDACrD,OAAO;oDACL,mBAAmB;oDACnB,MAAM,YAAY;oDAClB,cAAc;oDACd;gDACF;4CACF,GACC,KAAK,CAAC;gDACL,iBAAiB;4CACnB,GACC,OAAO,CAAC,IAAM,kBAAkB;wCACrC;wCACA,WAAU;kDACX;;;;;;oCAIF,uCACC,6LAAC;wCACC,MAAK;wCACL,SAAS;wCACT,WAAU;kDACX;;;;;;oCAIF,CAAC,yBAAW,6LAAC;wCAAE,WAAU;kDAA4B;;;;;;;;;;;;;;;;;;;;;;;;YAM7D,CAAC,gBAAgB,cAAc,yBAC9B,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;;kDACC,6LAAC;wCAAG,WAAU;kDAAmC;;;;;;kDACjD,6LAAC;wCAAE,WAAU;kDAA4B;;;;;;;;;;;;0CAE3C,6LAAC;gCACC,MAAK;gCACL,SAAS;gCACT,WAAU;0CACX;;;;;;;;;;;;oBAIF,YAAY,MAAM,KAAK,kBACtB,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAE,WAAU;0CAAwB;;;;;;0CACrC,6LAAC;gCAAE,WAAU;0CAAwB;;;;;;0CACrC,6LAAC;gCAAI,WAAU;0CACb,cAAA,6LAAC;oCACC,MAAK;oCACL,SAAS;oCACT,WAAU;8CACX;;;;;;;;;;;;;;;;6CAML,6LAAC;wBAAI,WAAU;kCACZ,YAAY,GAAG,CAAC,CAAC;4BAChB,qBACE,6LAAC;gCAEC,WAAW,CAAC,sDAAsD,EAChE,KAAK,QAAQ,GACT,kDACA,wCACL,CAAC,EAAE,iBAAiB,KAAK,EAAE,GAAG,4BAA4B,IAAI;gCAC/D,MAAK;gCACL,UAAU;gCACV,SAAS;oCACP,gBAAgB,KAAK,EAAE;oCACvB,mBAAmB,KAAK,EAAE;gCAC5B;gCACA,WAAW,CAAC;oCACV,IAAI,EAAE,GAAG,KAAK,WAAW,EAAE,GAAG,KAAK,KAAK;wCACtC,EAAE,cAAc;wCAChB,gBAAgB,KAAK,EAAE;wCACvB,mBAAmB,KAAK,EAAE;oCAC5B;gCACF;;kDAEA,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDAAE,WAAU;kEAAsC,KAAK,IAAI;;;;;;kEAChE,6LAAC;wDAAE,WAAU;kEAA6B,eAAe;;;;;;kEACzD,6LAAC;wDAAE,WAAU;;4DAA4B;4DAAgB,oBAAoB;;;;;;;;;;;;;0DAE3E,6LAAC;gDACC,WACE,KAAK,QAAQ,GACT,MAAM,WACN;0DAGL,KAAK,QAAQ,GAAG,UAAU;;;;;;;;;;;;kDAG/B,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDACC,MAAK;gDACL,SAAS,CAAC;oDACR,EAAE,eAAe;oDACjB,gBAAgB,KAAK,EAAE;oDACvB,mBAAmB,KAAK,EAAE;gDAC5B;gDACA,WAAU;0DACX;;;;;;0DAGD,6LAAC;gDACC,MAAK;gDACL,SAAS,IAAM,kBAAkB;gDACjC,WAAU;0DACX;;;;;;4CAGA,CAAC,KAAK,SAAS,kBACd,6LAAC;gDACC,MAAK;gDACL,SAAS,IAAM,gBAAgB;gDAC/B,WAAU;0DACX;;;;;;0DAIH,6LAAC;gDACC,MAAK;gDACL,SAAS,IAAM,cAAc;wDAAE;wDAAM,YAAY,CAAC,KAAK,QAAQ;oDAAC;gDAChE,WAAW,CAAC,4CAA4C,EACtD,KAAK,QAAQ,GACT,gFACA,uFACJ;0DAED,KAAK,QAAQ,GAAG,aAAa;;;;;;4CAE/B,CAAC,KAAK,QAAQ,kBACb,6LAAC;gDACC,MAAK;gDACL,SAAS,IAAM,oBAAoB;gDACnC,WAAU;0DACX;;;;;;;;;;;;;+BAhFA,KAAK,EAAE;;;;;wBAuFlB;;;;;;oBAIH,gBAAgB,8BACf,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;;0DACC,6LAAC;gDAAE,WAAU;0DAAwD;;;;;;0DACrE,6LAAC;gDAAE,WAAU;0DAAwB;;;;;;;;;;;;kDAEvC,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAM,WAAU;gDAAU,SAAQ;0DAAgB;;;;;;0DAGnD,6LAAC;gDACC,IAAG;gDACH,OAAO,gBAAgB;gDACvB,UAAU,CAAC;oDACT,MAAM,SAAS,OAAO,EAAE,MAAM,CAAC,KAAK;oDACpC,IAAI,OAAO,QAAQ,CAAC,SAAS;wDAC3B,gBAAgB;oDAClB;gDACF;gDACA,WAAU;0DAET,YAAY,GAAG,CAAC,CAAC,qBAChB,6LAAC;wDAAqB,OAAO,KAAK,EAAE;kEACjC,KAAK,IAAI;uDADC,KAAK,EAAE;;;;;;;;;;0DAKxB,6LAAC;gDAAK,WAAW,MAAM;0DAAW,aAAa,IAAI;;;;;;0DACnD,6LAAC;gDACC,MAAK;gDACL,SAAS,IAAM,gBAAgB;gDAC/B,WAAU;0DACX;;;;;;;;;;;;;;;;;;4BAMJ,+BACC,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAI,WAAU;;;;;;kDACf,6LAAC;wCAAI,WAAU;kDACZ;+CAAI,MAAM;yCAAG,CAAC,GAAG,CAAC,CAAC,GAAG,oBACrB,6LAAC;gDAAc,WAAU;;kEACvB,6LAAC;wDAAI,WAAU;;;;;;kEACf,6LAAC;wDAAI,WAAU;;;;;;kEACf,6LAAC;wDAAI,WAAU;;;;;;kEACf,6LAAC;wDAAI,WAAU;;;;;;;+CAJP;;;;;;;;;;;;;;;;0CAWlB,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDAAE,WAAU;kEAAmC;;;;;;kEAChD,6LAAC;wDAAK,WAAW,MAAM;;4DAAW,OAAO,MAAM,CAAC,CAAC,IAAM,EAAE,QAAQ,EAAE,MAAM;4DAAC;;;;;;;;;;;;;0DAE5E,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDACC,OAAO,UAAU,IAAI;wDACrB,UAAU,CAAC,IAAM,aAAa,CAAC,IAAM,CAAC;oEAAE,GAAG,CAAC;oEAAE,MAAM,EAAE,MAAM,CAAC,KAAK;gEAAC,CAAC;wDACpE,WAAU;wDACV,aAAY;;;;;;kEAEd,6LAAC;wDACC,OAAO,UAAU,WAAW;wDAC5B,UAAU,CAAC,IAAM,aAAa,CAAC,IAAM,CAAC;oEAAE,GAAG,CAAC;oEAAE,aAAa,EAAE,MAAM,CAAC,KAAK;gEAAC,CAAC;wDAC3E,WAAU;wDACV,aAAY;;;;;;kEAEd,6LAAC;wDAAI,WAAU;;0EACb,6LAAC;gEAAK,WAAU;0EAAuD;;;;;;0EACvE,6LAAC;gEAAI,WAAU;0EACZ;oEACC;wEAAE,KAAK;wEAAO,OAAO;oEAAU;oEAC/B;wEAAE,KAAK;wEAAM,OAAO;oEAAS;iEAC9B,CAAC,GAAG,CAAC,CAAC,oBACL,6LAAC;wEAEC,MAAK;wEACL,SAAS,IAAM,aAAa,CAAC,IAAM,CAAC;oFAAE,GAAG,CAAC;oFAAE,QAAQ,IAAI,GAAG;gFAAY,CAAC;wEACxE,WAAW,CAAC,kCAAkC,EAC5C,UAAU,MAAM,KAAK,IAAI,GAAG,GACxB,6CACA,kCACJ;kFAED,IAAI,KAAK;uEATL,OAAO,IAAI,GAAG;;;;;;;;;;0EAa3B,6LAAC;gEAAI,WAAU;0EACZ;oEACC;wEAAE,KAAK;wEAAM,OAAO;oEAAQ;oEAC5B;wEAAE,KAAK;wEAAO,OAAO;oEAAU;iEAChC,CAAC,GAAG,CAAC,CAAC,oBACH,6LAAC;wEAEC,MAAK;wEACL,SAAS,IAAM,aAAa,CAAC,IAAM,CAAC;oFAAE,GAAG,CAAC;oFAAE,UAAU,IAAI,GAAG;gFAAY,CAAC;wEAC1E,WAAW,CAAC,kCAAkC,EAC5C,UAAU,QAAQ,KAAK,IAAI,GAAG,GAC1B,IAAI,GAAG,GACL,4CACA,sCACF,kCACJ;kFAED,IAAI,KAAK;uEAXL,OAAO,IAAI,GAAG;;;;;;;;;;;;;;;;;;;;;;0DAiB7B,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDACC,MAAK;wDACL,SAAS;wDACT,UAAU;wDACV,WAAU;kEAET,cAAc,eAAe,UAAU,EAAE,GAAG,oBAAoB;;;;;;oDAElE,UAAU,EAAE,kBACX,6LAAC;wDACC,MAAK;wDACL,SAAS;wDACT,WAAU;kEACX;;;;;;oDAIN,CAAC,cAAc,YAAY,mBAC1B,6LAAC;wDAAK,WAAU;kEAA6B,cAAc;;;;;;;;;;;;0DAG/D,6LAAC;gDAAI,WAAU;;oDACZ,OAAO,MAAM,KAAK,mBAAK,6LAAC;wDAAE,WAAU;kEAAgB;;;;;;oDACpD,OAAO,GAAG,CAAC,CAAC,GAAG,oBACd,6LAAC;4DAEC,SAAS;4DACT,aAAa,IAAM,mBAAmB,EAAE,EAAE;4DAC1C,YAAY,CAAC,IAAM,EAAE,cAAc;4DACnC,QAAQ,CAAC;gEACP,EAAE,cAAc;gEAChB,MAAM,UAAU,cAAc,EAAE,EAAE;gEAClC,IAAI,SAAS;oEACX,kBAAkB;gEACpB;gEACA,mBAAmB;4DACrB;4DACA,WAAW,IAAM,mBAAmB;4DACpC,WAAW,CAAC,wEAAwE,EAClF,EAAE,QAAQ,GACN,kDACA,wCACL,CAAC,EAAE,oBAAoB,EAAE,EAAE,GAAG,eAAe,eAAe;;8EAE7D,6LAAC;oEAAI,WAAU;;sFACb,6LAAC;4EACC,WAAW,CAAC,iFAAiF,EAC3F,EAAE,QAAQ,GACN,4DACA,gDACJ;sFAED,MAAM;;;;;;sFAET,6LAAC;;8FACC,6LAAC;oFAAE,WAAU;8FAAoC,EAAE,IAAI;;;;;;8FACvD,6LAAC;oFAAE,WAAW,CAAC,YAAY,EAAE,EAAE,QAAQ,GAAG,wBAAwB,mBAAmB;;wFAClF,EAAE,MAAM,GAAG,WAAW;wFAAU;wFAAU,EAAE,YAAY;wFAAC;wFAAI,EAAE,QAAQ,GAAG,UAAU;;;;;;;;;;;;;;;;;;;8EAI3F,6LAAC;oEAAI,WAAU;;sFACb,6LAAC;4EACC,MAAK;4EACL,SAAS,IAAM,gBAAgB;4EAC/B,WAAU;sFACX;;;;;;sFAGD,6LAAC;4EACC,MAAK;4EACL,SAAS,IAAM,eAAe;oFAAE,OAAO;oFAAG,YAAY,CAAC,EAAE,QAAQ;gFAAC;4EAClE,WAAW,CAAC,0CAA0C,EACpD,EAAE,QAAQ,GACN,gFACA,uFACJ;sFAED,EAAE,QAAQ,GAAG,cAAc;;;;;;wEAE7B,CAAC,EAAE,QAAQ,kBACV,6LAAC;4EACC,MAAK;4EACL,SAAS,IAAM,qBAAqB;4EACpC,WAAU;sFACX;;;;;;;;;;;;;2DA5DA,EAAE,EAAE;;;;;;;;;;;;;;;;;kDAsEb,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDAAI,WAAU;;0EACb,6LAAC;gEAAE,WAAU;0EAAmC;;;;;;0EAChD,6LAAC;gEAAE,WAAU;;oEACV,MAAM,MAAM;oEAAC;oEAAY;oEAAoB;;;;;;;;;;;;;kEAGlD,6LAAC;wDAAK,WAAW,MAAM;;4DAAU;4DAAS;;;;;;;;;;;;;0DAG5C,6LAAC;gDAAI,WAAU;0DACZ;oDACC;wDACE,KAAK;wDACL,OAAO;wDACP,MAAM;oDACR;oDACA;wDACE,KAAK;wDACL,OAAO;wDACP,MAAM;oDACR;iDACD,CAAC,GAAG,CAAC,CAAC,oBACL,6LAAC;wDAEC,MAAK;wDACL,SAAS,IAAM,aAAa,IAAI,GAAG;wDACnC,WAAW,CAAC,2CAA2C,EACrD,cAAc,IAAI,GAAG,GACjB,sEACA,oDACJ;;0EAEF,6LAAC;gEAAE,WAAU;0EAA4B,IAAI,KAAK;;;;;;0EAClD,6LAAC;gEAAE,WAAU;0EAA6B,IAAI,IAAI;;;;;;;uDAV7C,IAAI,GAAG;;;;;;;;;;4CAejB,cAAc,2BACb,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDAAI,WAAU;;0EACb,6LAAC;gEACC,OAAO;gEACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;gEAC9C,WAAU;gEACV,aAAY;;;;;;0EAEd,6LAAC;gEACC,OAAO,UAAU,aAAa;gEAC9B,UAAU,CAAC,IAAM,aAAa,CAAC,IAAM,CAAC;4EAAE,GAAG,CAAC;4EAAE,eAAe,EAAE,MAAM,CAAC,KAAK;wEAAC,CAAC;gEAC7E,WAAU;;kFAEV,6LAAC;wEAAO,OAAM;kFAAG;;;;;;oEAChB,aAAa,GAAG,CAAC,CAAC,kBACjB,6LAAC;4EAAsB,OAAO,EAAE,MAAM;;gFACnC,CAAC,EAAE,QAAQ,IAAI,EAAE,QAAQ,IAAI,EAAE,KAAK,IAAI,QAAQ,EAAE,IAAI;gFAAG;gFAAE,EAAE,KAAK,GAAG,CAAC,EAAE,EAAE,EAAE,KAAK,EAAE,GAAG;;2EAD5E,EAAE,MAAM;;;;;;;;;;;;;;;;;oDAM1B,UAAU,aAAa,kBACtB,6LAAC;wDAAI,WAAU;;0EACb,6LAAC;gEAAE,WAAU;0EAA8B;;;;;;0EAC3C,6LAAC;gEAAE,WAAU;0EAAgB;;;;;;;;;;;;;;;;;qEAOnC,6LAAC;gDAAI,WAAU;0DACb,cAAA,6LAAC;oDAAI,WAAU;;sEACb,6LAAC;4DACC,OAAO,UAAU,KAAK;4DACtB,UAAU,CAAC,IAAM,aAAa,CAAC,IAAM,CAAC;wEAAE,GAAG,CAAC;wEAAE,OAAO,EAAE,MAAM,CAAC,KAAK;oEAAC,CAAC;4DACrE,WAAU;4DACV,aAAY;;;;;;sEAEd,6LAAC;4DAAI,WAAU;sEAAoF;;;;;;;;;;;;;;;;;0DAOzG,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDACC,OAAO,UAAU,IAAI;wDACrB,UAAU,CAAC,IAAM,aAAa,CAAC,IAAM,CAAC;oEAAE,GAAG,CAAC;oEAAE,MAAM,EAAE,MAAM,CAAC,KAAK;gEAAC,CAAC;wDACpE,WAAU;;0EAEV,6LAAC;gEAAO,OAAM;0EAAc;;;;;;0EAC5B,6LAAC;gEAAO,OAAM;0EAAgB;;;;;;0EAC9B,6LAAC;gEAAO,OAAM;0EAAQ;;;;;;;;;;;;kEAExB,6LAAC;wDAAI,WAAU;kEACZ;4DACC;gEAAE,KAAK;gEAAM,OAAO;4DAAuB;4DAC3C;gEAAE,KAAK;gEAAO,OAAO;4DAAiB;yDACvC,CAAC,GAAG,CAAC,CAAC,oBACL,6LAAC;gEAEC,MAAK;gEACL,SAAS,IAAM,aAAa,CAAC,IAAM,CAAC;4EAAE,GAAG,CAAC;4EAAE,iBAAiB,IAAI,GAAG;wEAAY,CAAC;gEACjF,WAAW,CAAC,kCAAkC,EAC5C,UAAU,eAAe,KAAK,IAAI,GAAG,GACjC,6CACA,kCACJ;0EAED,IAAI,KAAK;+DATL,OAAO,IAAI,GAAG;;;;;;;;;;;;;;;;0DAe3B,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDACC,MAAK;wDACL,SAAS;wDACT,WAAU;kEAET,UAAU,EAAE,GAAG,cAAc;;;;;;oDAE/B,UAAU,EAAE,kBACX,6LAAC;wDACC,MAAK;wDACL,SAAS;wDACT,WAAU;kEACX;;;;;;oDAIF,CAAC,cAAc,gBAAgB,iBAAiB,mBAC/C,6LAAC;wDAAK,WAAU;kEACb,cAAc,gBAAgB;;;;;;;;;;;;0DAKrC,6LAAC;gDAAI,WAAU;;oDACZ,MAAM,MAAM,KAAK,mBAAK,6LAAC;wDAAE,WAAU;kEAAgB;;;;;;oDACnD,MAAM,GAAG,CAAC,CAAC,kBACV,6LAAC;4DAAe,WAAU;;8EACxB,6LAAC;oEAAI,WAAU;;sFACb,6LAAC;4EAAE,WAAU;sFAAsB,EAAE,KAAK,IAAI,EAAE,MAAM,IAAI;;;;;;sFAC1D,6LAAC;4EAAI,WAAU;;8FACb,6LAAC;oFAAK,WAAU;8FAAgE,EAAE,IAAI;;;;;;8FACtF,6LAAC;oFACC,WAAW,CAAC,kCAAkC,EAC5C,EAAE,eAAe,GACb,6DACA,4CACJ;8FAED,EAAE,eAAe,GAAG,wBAAwB;;;;;;8FAE/C,6LAAC;oFAAK,WAAU;8FACb,EAAE,MAAM,GAAG,iBAAiB;;;;;;gFAE9B,CAAC,EAAE,MAAM,kBAAI,6LAAC;oFAAK,WAAU;8FAAsF;;;;;;;;;;;;;;;;;;8EAGxH,6LAAC;oEACC,MAAK;oEACL,SAAS,IAAM,gBAAgB;oEAC/B,WAAU;8EACX;;;;;;;2DAxBO,EAAE,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;YAqC7B,CAAC,gBAAgB,cAAc,2BAC9B,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;;kDACC,6LAAC;wCAAE,WAAU;kDAAuD;;;;;;kDACpE,6LAAC;wCAAE,WAAU;kDAAwB;;;;;;;;;;;;0CAEvC,6LAAC;gCACC,OAAO;gCACP,UAAU,CAAC,IAAM,UAAU,EAAE,MAAM,CAAC,KAAK;gCACzC,aAAY;gCACZ,WAAU;;;;;;;;;;;;kCAGd,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BAAM,WAAU;;8CACf,6LAAC;oCAAM,WAAU;8CACf,cAAA,6LAAC;;0DACC,6LAAC;gDAAG,WAAU;0DAAY;;;;;;0DAC1B,6LAAC;gDAAG,WAAU;0DAAY;;;;;;0DAC1B,6LAAC;gDAAG,WAAU;0DAAY;;;;;;0DAC1B,6LAAC;gDAAG,WAAU;0DAAY;;;;;;;;;;;;;;;;;8CAG9B,6LAAC;;wCACE,gBAAgB,MAAM,KAAK,mBAC1B,6LAAC;sDACC,cAAA,6LAAC;gDAAG,WAAU;gDAAsC,SAAS;0DAAG;;;;;;;;;;;wCAKnE,gBAAgB,GAAG,CAAC,CAAC,kBACpB,6LAAC;gDAAc,WAAU;;kEACvB,6LAAC;wDAAG,WAAU;;0EACZ,6LAAC;0EAAK,EAAE,QAAQ;;;;;;0EAChB,6LAAC;gEAAE,WAAU;0EAA6B,EAAE,KAAK,IAAI;;;;;;;;;;;;kEAEvD,6LAAC;wDAAG,WAAU;kEAAa,EAAE,KAAK,IAAI;;;;;;kEACtC,6LAAC;wDAAG,WAAU;kEAAa,EAAE,KAAK,IAAI;;;;;;kEACtC,6LAAC;wDAAG,WAAU;kEACd,cAAA,6LAAC;4DAAK,WAAW,MAAM;;gEAAW,EAAE,gBAAgB,IAAI;gEAAE;;;;;;;;;;;;;+CARnD,EAAE,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;YAkBxB,CAAC,gBAAgB,cAAc,4BAC9B,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAE,WAAU;kCAAuD;;;;;;kCACpE,6LAAC;kCAAE;;;;;;;;;;;;YAIN,qBAAqB,+BACpB,6LAAC;gBAAI,WAAU;0BAAyK;;;;;;YAKzL,+BACC,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;;sDACC,6LAAC;4CAAE,WAAU;sDACV,SAAS,EAAE,GAAG,iBAAiB;;;;;;sDAElC,6LAAC;4CAAG,WAAU;sDAAmC;;;;;;;;;;;;8CAEnD,6LAAC;oCACC,MAAK;oCACL,SAAS,IAAM,iBAAiB;oCAChC,WAAU;8CACX;;;;;;;;;;;;sCAKH,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCACC,OAAO,SAAS,IAAI;oCACpB,UAAU,CAAC,IAAM,YAAY,CAAC,IAAM,CAAC;gDAAE,GAAG,CAAC;gDAAE,MAAM,EAAE,MAAM,CAAC,KAAK;4CAAC,CAAC;oCACnE,aAAY;oCACZ,WAAU;;;;;;8CAEZ,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAI,WAAU;;8DACb,6LAAC;oDACC,MAAK;oDACL,OAAO,SAAS,IAAI;oDACpB,UAAU,CAAC,IAAM,YAAY,CAAC,IAAM,CAAC;gEAAE,GAAG,CAAC;gEAAE,MAAM,EAAE,MAAM,CAAC,KAAK;4DAAC,CAAC;oDACnE,aAAY;oDACZ,WAAU;;;;;;8DAEZ,6LAAC;oDAAS,IAAG;8DACV,sIAAe,CAAC,GAAG,CAAC,CAAC,qBACpB,6LAAC;4DAAkB,OAAO;2DAAb;;;;;;;;;;;;;;;;sDAInB,6LAAC;4CACC,OAAO,SAAS,OAAO;4CACvB,UAAU,CAAC,IAAM,YAAY,CAAC,IAAM,CAAC;wDAAE,GAAG,CAAC;wDAAE,SAAS,EAAE,MAAM,CAAC,KAAK;oDAAC,CAAC;4CACtE,aAAY;4CACZ,WAAU;;;;;;;;;;;;8CAGd,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CACC,OAAO,AAAC,SAAiB,IAAI,IAAI;4CACjC,UAAU,CAAC;gDACT,aAAa;gDACb,YAAY,CAAC,IAAW,CAAC;wDAAE,GAAG,CAAC;wDAAE,MAAM,EAAE,MAAM,CAAC,KAAK;oDAAC,CAAC;4CACzD;4CACA,aAAY;4CACZ,WAAU;;;;;;wCAEX,2BAAa,6LAAC;4CAAE,WAAU;sDAA+C;;;;;;sDAC1E,6LAAC;4CACC,MAAK;4CACL,KAAK;4CACL,KAAK;4CACL,OAAO,SAAS,WAAW;4CAC3B,UAAU,CAAC,IAAM,YAAY,CAAC,IAAM,CAAC;wDAAE,GAAG,CAAC;wDAAE,aAAa,EAAE,MAAM,CAAC,KAAK;oDAAC,CAAC;4CAC1E,aAAY;4CACZ,WAAU;;;;;;;;;;;;8CAGd,6LAAC;oCAAM,WAAU;;sDACf,6LAAC;4CACC,MAAK;4CACL,SAAS,SAAS,QAAQ;4CAC1B,UAAU,CAAC,IAAM,YAAY,CAAC,IAAM,CAAC;wDAAE,GAAG,CAAC;wDAAE,UAAU,EAAE,MAAM,CAAC,OAAO;oDAAC,CAAC;4CACzE,WAAU;;;;;;wCACV;;;;;;;8CAGJ,6LAAC;oCAAI,WAAU;;wCACZ,2BAAa,6LAAC;4CAAK,WAAU;sDAAgB;;;;;;wCAC7C,6BAAe,6LAAC;sDAAM;;;;;;;;;;;;8CAEzB,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CACC,MAAK;4CACL,SAAS;4CACT,UAAU;4CACV,WAAU;sDAET,aAAa,eAAe,SAAS,EAAE,GAAG,uBAAuB;;;;;;sDAEpE,6LAAC;4CACC,MAAK;4CACL,SAAS,IAAM,iBAAiB;4CAChC,WAAU;sDACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;YASV,4BACC,6LAAC,yLAA8B;gBAC7B,IAAI;gBACJ,OAAO,WAAW,UAAU,GAAG,oBAAoB;gBACnD,aACE,WAAW,UAAU,GACjB,oDACA;gBAEN,cACE,WAAW,UAAU,GACjB;oBAAC;iBAAuC,GACxC;oBAAC;oBAAoC;iBAA6B;gBAExE,cAAc,WAAW,UAAU,GAAG,aAAa;gBACnD,aAAY;gBACZ,SAAS,IAAM,cAAc;gBAC7B,WAAW,IAAM,uBAAuB,WAAW,IAAI,EAAE,WAAW,UAAU;;;;;;YAIjF,kCACC,6LAAC,yLAA8B;gBAC7B,IAAI;gBACJ,OAAM;gBACN,aAAY;gBACZ,cAAc;oBAAC;oBAAoB;iBAAwD;gBAC3F,cAAa;gBACb,aAAY;gBACZ,SAAS,IAAM,oBAAoB;gBACnC,WAAW,IAAM,iBAAiB;;;;;;YAIrC,6BACC,6LAAC,yLAA8B;gBAC7B,IAAI;gBACJ,OAAO,YAAY,UAAU,GAAG,oBAAoB;gBACpD,aACE,YAAY,UAAU,GAClB,4CACA;gBAEN,cACE,YAAY,UAAU,GAClB;oBAAC;iBAA8B,GAC/B;oBAAC;oBAAgC;iBAA6B;gBAEpE,cAAc,YAAY,UAAU,GAAG,aAAa;gBACpD,aAAY;gBACZ,SAAS,IAAM,eAAe;gBAC9B,WAAW;;;;;;YAId,mCACC,6LAAC,yLAA8B;gBAC7B,IAAI;gBACJ,OAAM;gBACN,aAAY;gBACZ,cAAc;oBAAC;oBAAoB;iBAAgC;gBACnE,cAAa;gBACb,aAAY;gBACZ,SAAS,IAAM,qBAAqB;gBACpC,WAAW,IAAM,kBAAkB;;;;;;;;;;;;AAK7C;GAh4EwB;;QACP,kJAAS;QACH,wJAAe;QA4EH,4KAAM;QAK8C,4KAAM;;;MAnFrE"}},
    {"offset": {"line": 5550, "column": 0}, "map": {"version":3,"sources":["file:///Users/nuno/orya/ORYA-WebApp/app/organizador/%28dashboard%29/padel/PadelHubSection.tsx"],"sourcesContent":["\"use client\";\n\nimport useSWR from \"swr\";\nimport { CTA_SECONDARY } from \"@/app/organizador/dashboardUi\";\nimport PadelHubClient from \"./PadelHubClient\";\n\ntype PadelClub = {\n  id: number;\n  name: string;\n  city: string | null;\n  address: string | null;\n  courtsCount: number;\n  slug?: string | null;\n  isActive: boolean;\n  isDefault?: boolean;\n  createdAt: string | Date;\n};\n\ntype Player = {\n  id: number;\n  fullName: string;\n  email: string | null;\n  phone: string | null;\n  level: string | null;\n  isActive: boolean;\n  createdAt: string | Date;\n  tournamentsCount?: number;\n};\n\ntype PadelHubResponse<T> = {\n  ok: boolean;\n  items?: T[];\n};\n\ntype Props = {\n  organizerId: number;\n  organizationKind: string | null;\n};\n\nconst fetcher = (url: string) => fetch(url).then((res) => res.json());\n\nexport default function PadelHubSection({ organizerId, organizationKind }: Props) {\n  const clubsUrl = organizerId ? `/api/padel/clubs?includeInactive=1&organizerId=${organizerId}` : null;\n  const playersUrl = organizerId ? `/api/padel/players?organizerId=${organizerId}` : null;\n\n  const {\n    data: clubsRes,\n    isLoading: clubsLoading,\n    error: clubsError,\n    mutate: mutateClubs,\n  } = useSWR<PadelHubResponse<PadelClub>>(clubsUrl, fetcher);\n\n  const {\n    data: playersRes,\n    isLoading: playersLoading,\n    error: playersError,\n    mutate: mutatePlayers,\n  } = useSWR<PadelHubResponse<Player>>(playersUrl, fetcher);\n\n  const clubs = Array.isArray(clubsRes?.items) ? clubsRes.items : [];\n  const players = Array.isArray(playersRes?.items) ? playersRes.items : [];\n  const isLoading = clubsLoading || playersLoading;\n  const hasError = Boolean(clubsError || playersError || clubsRes?.ok === false || playersRes?.ok === false);\n\n  if (isLoading) {\n    return (\n      <div className=\"rounded-3xl border border-white/12 bg-white/5 p-6 shadow-[0_24px_70px_rgba(0,0,0,0.55)] animate-pulse space-y-3\">\n        <div className=\"h-4 w-44 rounded-full bg-white/10\" />\n        <div className=\"h-8 w-72 rounded-2xl bg-white/10\" />\n        <div className=\"h-40 rounded-2xl bg-white/5\" />\n      </div>\n    );\n  }\n\n  if (hasError) {\n    return (\n      <div className=\"rounded-2xl border border-red-500/40 bg-red-500/10 px-4 py-4 text-sm text-red-100 flex flex-wrap items-center justify-between gap-3\">\n        <div>\n          <p className=\"font-semibold\">Não foi possível carregar o Hub Padel.</p>\n          <p className=\"text-[12px] text-red-100/80\">Tenta novamente ou recarrega a página.</p>\n        </div>\n        <button\n          type=\"button\"\n          onClick={() => {\n            mutateClubs();\n            mutatePlayers();\n          }}\n          className={CTA_SECONDARY}\n        >\n          Tentar novamente\n        </button>\n      </div>\n    );\n  }\n\n  return (\n    <PadelHubClient\n      organizerId={organizerId}\n      organizationKind={organizationKind}\n      initialClubs={clubs}\n      initialPlayers={players}\n    />\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAuCA,MAAM,UAAU,CAAC,MAAgB,MAAM,KAAK,IAAI,CAAC,CAAC,MAAQ,IAAI,IAAI;AAEnD,SAAS,gBAAgB,EAAE,WAAW,EAAE,gBAAgB,EAAS;;IAC9E,MAAM,WAAW,cAAc,CAAC,+CAA+C,EAAE,aAAa,GAAG;IACjG,MAAM,aAAa,cAAc,CAAC,+BAA+B,EAAE,aAAa,GAAG;IAEnF,MAAM,EACJ,MAAM,QAAQ,EACd,WAAW,YAAY,EACvB,OAAO,UAAU,EACjB,QAAQ,WAAW,EACpB,GAAG,IAAA,4KAAM,EAA8B,UAAU;IAElD,MAAM,EACJ,MAAM,UAAU,EAChB,WAAW,cAAc,EACzB,OAAO,YAAY,EACnB,QAAQ,aAAa,EACtB,GAAG,IAAA,4KAAM,EAA2B,YAAY;IAEjD,MAAM,QAAQ,MAAM,OAAO,CAAC,UAAU,SAAS,SAAS,KAAK,GAAG,EAAE;IAClE,MAAM,UAAU,MAAM,OAAO,CAAC,YAAY,SAAS,WAAW,KAAK,GAAG,EAAE;IACxE,MAAM,YAAY,gBAAgB;IAClC,MAAM,WAAW,QAAQ,cAAc,gBAAgB,UAAU,OAAO,SAAS,YAAY,OAAO;IAEpG,IAAI,WAAW;QACb,qBACE,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAI,WAAU;;;;;;8BACf,6LAAC;oBAAI,WAAU;;;;;;8BACf,6LAAC;oBAAI,WAAU;;;;;;;;;;;;IAGrB;IAEA,IAAI,UAAU;QACZ,qBACE,6LAAC;YAAI,WAAU;;8BACb,6LAAC;;sCACC,6LAAC;4BAAE,WAAU;sCAAgB;;;;;;sCAC7B,6LAAC;4BAAE,WAAU;sCAA8B;;;;;;;;;;;;8BAE7C,6LAAC;oBACC,MAAK;oBACL,SAAS;wBACP;wBACA;oBACF;oBACA,WAAW,qJAAa;8BACzB;;;;;;;;;;;;IAKP;IAEA,qBACE,6LAAC,6KAAc;QACb,aAAa;QACb,kBAAkB;QAClB,cAAc;QACd,gBAAgB;;;;;;AAGtB;GA9DwB;;QASlB,4KAAM;QAON,4KAAM;;;KAhBY"}},
    {"offset": {"line": 5682, "column": 0}, "map": {"version":3,"sources":["file:///Users/nuno/orya/ORYA-WebApp/app/organizador/%28dashboard%29/inscricoes/page.tsx"],"sourcesContent":["\"use client\";\n\nimport Link from \"next/link\";\nimport { useEffect, useMemo, useState } from \"react\";\nimport { useRouter, useSearchParams } from \"next/navigation\";\nimport useSWR from \"swr\";\nimport { useUser } from \"@/app/hooks/useUser\";\nimport { useAuthModal } from \"@/app/components/autenticação/AuthModalContext\";\nimport ObjectiveSubnav from \"@/app/organizador/ObjectiveSubnav\";\n\ntype FormItem = {\n  id: number;\n  title: string;\n  description: string | null;\n  status: \"DRAFT\" | \"PUBLISHED\" | \"ARCHIVED\";\n  capacity: number | null;\n  waitlistEnabled: boolean;\n  startAt: string | null;\n  endAt: string | null;\n  createdAt: string;\n  submissionsCount: number;\n};\n\ntype FormsResponse = { ok: boolean; items: FormItem[]; error?: string };\n\nconst fetcher = (url: string) => fetch(url).then((res) => res.json());\n\nconst statusLabel: Record<FormItem[\"status\"], string> = {\n  DRAFT: \"Rascunho\",\n  PUBLISHED: \"Publicado\",\n  ARCHIVED: \"Arquivado\",\n};\n\nconst formatDate = (value: string | null) => {\n  if (!value) return \"Disponível sempre\";\n  const parsed = new Date(value);\n  if (Number.isNaN(parsed.getTime())) return \"Disponível sempre\";\n  return parsed.toLocaleDateString(\"pt-PT\", { day: \"2-digit\", month: \"short\", year: \"numeric\" });\n};\n\ntype InscricoesPageProps = {\n  embedded?: boolean;\n};\n\nexport default function InscricoesPage({ embedded }: InscricoesPageProps) {\n  const { user, isLoading } = useUser();\n  const { openModal } = useAuthModal();\n  const router = useRouter();\n  const searchParams = useSearchParams();\n  const orgParam = searchParams?.get(\"org\");\n  const orgMeUrl = useMemo(() => {\n    if (!user) return null;\n    return orgParam ? `/api/organizador/me?org=${orgParam}` : \"/api/organizador/me\";\n  }, [user, orgParam]);\n  const { data: organizerData } = useSWR<{\n    organizer?: { organizationCategory?: string | null } | null;\n  }>(orgMeUrl, fetcher);\n  const { data, mutate, isLoading: loadingForms } = useSWR<FormsResponse>(\n    user ? \"/api/organizador/inscricoes\" : null,\n    fetcher,\n  );\n\n  const [title, setTitle] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [creating, setCreating] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const items = useMemo(() => (data?.ok ? data.items : []), [data]);\n  const moduleDisabled = data?.ok === false && data?.error?.includes(\"Módulo\");\n  const loadError = data?.ok === false && !moduleDisabled ? data?.error : null;\n  const orgCategory = organizerData?.organizer?.organizationCategory ?? null;\n  const isPadelOrg = orgCategory?.toUpperCase() === \"PADEL\";\n\n  useEffect(() => {\n    if (!isPadelOrg) return;\n    const orgSuffix = orgParam ? `&org=${orgParam}` : \"\";\n    router.replace(`/organizador?tab=manage&section=eventos${orgSuffix}`);\n  }, [isPadelOrg, orgParam, router]);\n\n  const handleCreate = async () => {\n    if (!user) {\n      openModal({\n        mode: \"login\",\n        redirectTo: embedded ? \"/organizador?tab=manage&section=inscricoes\" : \"/organizador/inscricoes\",\n        showGoogle: true,\n      });\n      return;\n    }\n    setCreating(true);\n    setError(null);\n    try {\n      const res = await fetch(\"/api/organizador/inscricoes\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ title, description }),\n      });\n      const json = await res.json().catch(() => null);\n      if (!res.ok || json?.ok === false) {\n        setError(json?.error || \"Não foi possível criar a inscrição.\");\n        setCreating(false);\n        return;\n      }\n      setTitle(\"\");\n      setDescription(\"\");\n      mutate();\n      if (json?.form?.id) {\n        router.push(`/organizador/inscricoes/${json.form.id}`);\n      }\n      setCreating(false);\n    } catch (err) {\n      console.error(\"[inscricoes][create] erro\", err);\n      setError(\"Erro inesperado ao criar inscrição.\");\n      setCreating(false);\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <div className={embedded ? \"text-sm text-white/70\" : \"px-6 py-10 text-sm text-white/70\"}>\n        A carregar...\n      </div>\n    );\n  }\n  if (isPadelOrg) return null;\n\n  const wrapperClass = embedded ? \"space-y-6 text-white\" : \"px-6 py-8 space-y-6 text-white\";\n\n  return (\n    <div className={wrapperClass}>\n      {!embedded && <ObjectiveSubnav objective=\"manage\" activeId=\"inscricoes\" />}\n      <div className=\"flex flex-wrap items-center justify-between gap-4\">\n        <div>\n          <p className=\"text-[11px] uppercase tracking-[0.3em] text-white/60\">Inscrições</p>\n          <h1 className=\"text-2xl font-semibold\">Inscrições e formulários</h1>\n          <p className=\"text-sm text-white/60\">\n            Cria inscrições ou formulários simples para recolher informação e vagas.\n          </p>\n        </div>\n      </div>\n\n      <div className=\"rounded-3xl border border-white/12 bg-gradient-to-br from-white/8 via-[#0b1124]/70 to-[#050810]/90 p-5 shadow-[0_24px_80px_rgba(0,0,0,0.55)] backdrop-blur-2xl space-y-4\">\n        <div className=\"space-y-1\">\n          <h2 className=\"text-lg font-semibold\">Criar nova inscrição</h2>\n          <p className=\"text-[12px] text-white/60\">\n            Começa pelo nome e depois ajusta campos, datas e capacidade.\n          </p>\n        </div>\n        {moduleDisabled && (\n          <div className=\"rounded-2xl border border-amber-400/40 bg-amber-400/10 p-3 text-sm text-amber-100\">\n            O módulo de Inscrições está desativado para esta organização.\n          </div>\n        )}\n        <div className=\"grid gap-3 md:grid-cols-[1.2fr_1.8fr]\">\n          <input\n            className=\"w-full rounded-xl border border-white/15 bg-black/40 px-3 py-2 text-sm outline-none focus:border-[#6BFFFF]\"\n            placeholder=\"Título da inscrição\"\n            value={title}\n            onChange={(e) => setTitle(e.target.value)}\n          />\n          <input\n            className=\"w-full rounded-xl border border-white/15 bg-black/40 px-3 py-2 text-sm outline-none focus:border-[#6BFFFF]\"\n            placeholder=\"Descrição curta (opcional) · também pode ser só um formulário\"\n            value={description}\n            onChange={(e) => setDescription(e.target.value)}\n          />\n        </div>\n        {error && <p className=\"text-sm text-red-300\">{error}</p>}\n        <button\n          type=\"button\"\n          disabled={creating || !title.trim() || moduleDisabled}\n          onClick={handleCreate}\n          className=\"rounded-full bg-gradient-to-r from-[#FF00C8] via-[#6BFFFF] to-[#1646F5] px-4 py-2 text-sm font-semibold text-black shadow hover:brightness-110 disabled:opacity-60\"\n        >\n          {creating ? \"A criar...\" : \"Criar inscrição\"}\n        </button>\n      </div>\n\n      <section className=\"space-y-3\">\n        <div className=\"flex items-center justify-between\">\n          <h2 className=\"text-lg font-semibold\">As tuas inscrições</h2>\n          <span className=\"text-[12px] text-white/60\">{items.length} total</span>\n        </div>\n\n        {loadingForms && <p className=\"text-sm text-white/60\">A carregar inscrições...</p>}\n        {loadError && <p className=\"text-sm text-red-300\">{loadError}</p>}\n\n        {!loadingForms && !loadError && items.length === 0 && (\n          <div className=\"rounded-2xl border border-dashed border-white/15 bg-white/5 p-4 text-sm text-white/70\">\n            Ainda não criaste nenhuma inscrição ou formulário. Usa o botão acima para começar.\n          </div>\n        )}\n\n        <div className=\"grid gap-4 lg:grid-cols-2\">\n          {items.map((form) => (\n            <div\n              key={form.id}\n              className=\"rounded-3xl border border-white/12 bg-gradient-to-br from-white/8 via-[#0b1124]/70 to-[#050810]/90 p-5 shadow-[0_22px_70px_rgba(0,0,0,0.5)] backdrop-blur-2xl space-y-3\"\n            >\n              <div className=\"flex items-start justify-between gap-3\">\n                <div className=\"space-y-1\">\n                  <h3 className=\"text-lg font-semibold\">{form.title}</h3>\n                  {form.description && <p className=\"text-[12px] text-white/70\">{form.description}</p>}\n                </div>\n                <span className=\"rounded-full border border-white/15 bg-white/10 px-2 py-1 text-[11px] text-white/70\">\n                  {statusLabel[form.status]}\n                </span>\n              </div>\n              <div className=\"flex flex-wrap gap-2 text-[11px] text-white/60\">\n                <span className=\"rounded-full border border-white/10 bg-white/5 px-2 py-0.5\">\n                  {formatDate(form.startAt)}\n                </span>\n                <span className=\"rounded-full border border-white/10 bg-white/5 px-2 py-0.5\">\n                  {form.capacity ? `${form.capacity} vagas` : \"Sem limite\"}\n                </span>\n                <span className=\"rounded-full border border-white/10 bg-white/5 px-2 py-0.5\">\n                  {form.submissionsCount} inscrito{form.submissionsCount === 1 ? \"\" : \"s\"}\n                </span>\n              </div>\n              <div className=\"flex flex-wrap items-center gap-3 text-[12px]\">\n                <Link\n                  href={`/organizador/inscricoes/${form.id}`}\n                  className=\"rounded-full bg-white px-3 py-1 text-black\"\n                >\n                  Gerir\n                </Link>\n                <Link\n                  href={`/inscricoes/${form.id}`}\n                  className=\"rounded-full border border-white/20 px-3 py-1 text-white/80 hover:bg-white/10\"\n                >\n                  Ver público\n                </Link>\n              </div>\n            </div>\n          ))}\n        </div>\n      </section>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}